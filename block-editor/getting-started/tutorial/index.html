
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/block-editor/">Block Editor Handbook</a></span><span><a href="https://developer.wordpress.org/block-editor/getting-started/">Getting Started</a></span><span class="is-current-page">Tutorial: Build your first block</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>Tutorial: Build your first block</h1>
    
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-block-post-content-is-layout-flow"><p>In this tutorial, you will build a “Copyright Date Block”—a basic yet practical block that displays the copyright symbol (©), the current year, and an optional starting year. This type of content is commonly used in website footers.</p>
<p>The tutorial will guide you through the complete process, from scaffolding the block plugin using the <a href="https://developer.notmatt.press/block-editor/getting-started/devenv/get-started-with-create-block/"><code>create-block</code></a> package to modifying each file. While previous WordPress development experience is beneficial, it’s not a prerequisite for this tutorial.</p>
<p>By the end of this guide, you will have a clear understanding of block development fundamentals and the necessary skills to create your own WordPress blocks.</p>
<h2 class="is-toc-heading" id="what-youre-going-to-build" tabindex="-1"><a href="#what-youre-going-to-build">What you’re going to build</a></h2>
<p>Here’s a quick look at what you’re going to build.</p>
<p><img alt="What you're going to build" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-1.png?ssl=1"/></p>
<p>You can also interact with the finished project in <a href="https://playground.wordpress.net/?blueprint-url=https://raw.githubusercontent.com/WordPress/block-development-examples/trunk/plugins/copyright-date-block-09aac3/_playground/blueprint.json">WordPress Playground</a> or use the <a href="https://developer.notmatt.press/block-editor/getting-started/quick-start-guide/">Quick Start Guide</a> to install the complete block plugin in your local WordPress environment.</p>
<h2 class="is-toc-heading" id="prerequisites" tabindex="-1"><a href="#prerequisites">Prerequisites</a></h2>
<p>To complete this tutorial, you will need:</p>
<ol>
<li>Code editor</li>
<li>Node.js development tools</li>
<li>Local WordPress environment</li>
</ol>
<p>If you don’t have one or more of these items, the <a href="https://developer.notmatt.press/block-editor/getting-started/devenv/">Block Development Environment</a> documentation will help you get started. Come back here once you are all set up.</p>
<div class="callout callout-info">
    This tutorial uses <a href="https://developer.notmatt.press/block-editor/getting-started/devenv/get-started-with-wp-env/"><code>wp-env</code></a> to create a local WordPress development environment. However, feel free to use any development environment that meets the abovementioned prerequisites.
</div>
<h2 class="is-toc-heading" id="scaffolding-the-block" tabindex="-1"><a href="#scaffolding-the-block">Scaffolding the block</a></h2>
<p>The first step in creating the Copyright Date Block is to scaffold the initial block structure using the <a href="https://developer.notmatt.press/block-editor/reference-guides/packages/packages-create-block/"><code>@wordpress/create-block</code></a> package.</p>
<div class="callout callout-info">
    Review the <a href="https://developer.notmatt.press/block-editor/getting-started/devenv/get-started-with-create-block/">Get started with create-block</a> documentation for an introduction to using this package.
</div>
<p>You can use <code>create-block</code> from just about any directory (folder) on your computer and then use <code>wp-env</code> to create a local WordPress development environment with your new block plugin installed and activated.</p>
<p>Therefore, choose a directory to place the block plugin or optionally create a new folder called “Block Tutorial”. Open your terminal and <code>cd</code> to this directory. Then run the following command.</p>
<div class="callout callout-info">
    If you are not using <code>wp-env</code>, instead, navigate to the <code>plugins/</code> folder in your local WordPress installation using the terminal and run the following command.
</div>
<pre><code class="language-bash">npx @wordpress/create-block@latest copyright-date-block --variant=dynamic
cd copyright-date-block
</code></pre>
<p>After executing this command, you’ll find a new directory named <code>copyright-date-block</code> in the plugins folder. This directory contains all the initial files needed to start customizing your block.</p>
<p>This command also sets up the basic structure of your block, with <code>copyright-date-block</code> as its slug. This slug uniquely identifies your block within WordPress.</p>
<div class="callout callout-info">
    You might have noticed that the command uses the <code>--variant=dynamic</code> flag. This tells <code>create-block</code> you want to scaffold a dynamically rendered block. Later in this tutorial, you will learn about dynamic and static rendering and add static rendering to this block.
</div>
<p>Navigate to the Plugins page in the WordPress admin and confirm that the plugin is active. Then, create a new page or post and ensure you can insert the Copyright Date Block. It should look like this once inserted.</p>
<p><img alt="The scaffolded block in the Editor" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-2.png?ssl=1"/></p>
<h2 class="is-toc-heading" id="reviewing-the-files" tabindex="-1"><a href="#reviewing-the-files">Reviewing the files</a></h2>
<p>Before we begin modifying the scaffolded block, it’s important to review the plugin’s file structure. Open the plugin folder in your code editor.</p>
<p><img alt="The files that make up the block plugin" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-3.png?ssl=1"/></p>
<p>Next, look at the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/file-structure-of-a-block/">File structure of a block</a> documentation for a thorough overview of what each file does. Don’t worry if this is overwhelming right now. You will learn how to use each file throughout this tutorial.</p>
<div class="callout callout-info">
    Since you scaffolded a dynamic block, you will not see a <code>save.js</code> file. Later in the tutorial, you will add this file to the plugin to enable static rendering, so stay tuned.
</div>
<h2 class="is-toc-heading" id="initial-setup" tabindex="-1"><a href="#initial-setup">Initial setup</a></h2>
<p>Let’s start by creating the simplest Copyright Date Block possible, which will be a dynamically rendered block that simply displays the copyright symbol (©) and the current year. We’ll also add a few controls allowing the user to modify font size and text color.</p>
<p>Before proceeding to the following steps, run <code>npm run start</code> in the terminal from within the plugin directory. This command will watch each file in the <code>/src</code> folder for changes. The block’s build files will be updated each time you save a file.</p>
<p>Check out the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/javascript-in-the-block-editor/">Working with JavaScript for the Block Editor</a> documentation to learn more.</p>
<h3 class="is-toc-heading" id="updating-block-json" tabindex="-1"><a href="#updating-block-json">Updating block.json</a></h3>
<p>Open the <code>block.json</code> file in the <code>/src</code> folder.</p>
<pre><code class="language-json">{
    "$schema": "https://schemas.wp.org/trunk/block.json",
    "apiVersion": 3,
    "name": "create-block/copyright-date-block",
    "version": "0.1.0",
    "title": "Copyright Date Block",
    "category": "widgets",
    "icon": "smiley",
    "description": "Example block scaffolded with Create Block tool.",
    "example": {},
    "supports": {
        "html": false
    },
    "textdomain": "copyright-date-block",
    "editorScript": "file:./index.js",
    "editorStyle": "file:./index.css",
    "style": "file:./style-index.css",
    "render": "file:./render.php",
    "viewScript": "file:./view.js"
}
</code></pre>
<div class="callout callout-info">
    Review the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/block-json/">block.json</a> documentation for an introduction to this file.
</div>
<p>Since this scaffolding process created this file, it requires some updating to suit the needs of the Copyright Date Block.</p>
<h4>Modifying the block identity</h4>
<p>Begin by removing the icon and adding a more appropriate description. You will add a custom icon later.</p>
<ol>
<li>Remove the line for <code>icon</code></li>
<li>Update the description to “Display your site’s copyright date.”</li>
<li>Save the file</li>
</ol>
<p>After you refresh the Editor, you should now see that the block no longer has the smiley face icon, and its description has been updated.</p>
<p><img alt="The block in the Editor with updated information" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-4.png?ssl=1"/></p>
<h4>Adding block supports</h4>
<p>Next, let’s add a few <a href="https://developer.notmatt.press/block-editor/reference-guides/block-api/block-supports/">block supports</a> so that the user can control the font size and text color of the block.</p>
<div class="callout callout-tip">
    You should always try to use native block supports before building custom functionality. This approach provides users with a consistent editing experience across blocks, and your block benefits from Core functionality with only a few lines of code.
</div>
<p>Update the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/block-json/#enable-ui-settings-panels-for-the-block-with-supports"><code>supports</code></a> section of the <code>block.json</code> file to look like this.</p>
<pre><code class="language-json">"supports": {
    "color": {
        "background": false,
        "text": true
    },
    "html": false,
    "typography": {
        "fontSize": true
    }
},
</code></pre>
<p>Note that when you enable text color support with <code>"text": true</code>, the background color is also enabled by default. You are welcome to keep it enabled, but it’s not required for this tutorial, so you can manually set <code>"background": false</code>.</p>
<p>Save the file and select the block in the Editor. You will now see both Color and Typography panels in the Settings Sidebar. Try modifying the settings and see what happens.</p>
<p><img alt="The block in the Editor with block supports" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-5.png?ssl=1"/></p>
<h4>Removing unnecessary code</h4>
<p>For simplicity, the styling for the Copyright Date Block will be controlled entirely by the color and typography block supports. This block also does not have any front-end JavaScript. Therefore, you don’t need to specify stylesheets or a <code>viewScript</code> in the <code>block.json</code> file.</p>
<ol>
<li>Remove the line for <code>editorStyle</code></li>
<li>Remove the line for <code>style</code></li>
<li>Remove the line for <code>viewScript</code></li>
<li>Save the file</li>
</ol>
<p>Refresh the Editor, and you will see that the block styling now matches your current theme.</p>
<p><img alt="The block in the Editor without default styling" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-6.png?ssl=1"/></p>
<h4>Putting it all together</h4>
<p>Your final <code>block.json</code> file should look like this:</p>
<pre><code class="language-json">{
    "$schema": "https://schemas.wp.org/trunk/block.json",
    "apiVersion": 3,
    "name": "create-block/copyright-date-block",
    "version": "0.1.0",
    "title": "Copyright Date Block",
    "category": "widgets",
    "description": "Display your site's copyright date.",
    "example": {},
    "supports": {
        "color": {
            "background": false,
            "text": true
        },
        "html": false,
        "typography": {
            "fontSize": true
        }
    },
    "textdomain": "copyright-date-block",
    "editorScript": "file:./index.js",
    "render": "file:./render.php"
}
</code></pre>
<h3 class="is-toc-heading" id="updating-index-js" tabindex="-1"><a href="#updating-index-js">Updating index.js</a></h3>
<p>Before you start building the functionality of the block itself, let’s do a bit more cleanup and add a custom icon to the block.</p>
<p>Open the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/file-structure-of-a-block/#index-js"><code>index.js</code></a> file. This is the main JavaScript file of the block and is used to register it on the client. You can learn more about client-side and server-side registration in the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/registration-of-a-block/">Registration of a block</a> documentation.</p>
<p>Start by looking at the <a href="https://developer.notmatt.press/block-editor/reference-guides/block-api/block-registration/"><code>registerBlockType</code></a> function. This function accepts the name of the block, which we are getting from the imported <code>block.json</code> file, and the block configuration object.</p>
<pre><code class="language-js">import Edit from './edit';
import metadata from './block.json';

registerBlockType( metadata.name, {
    edit: Edit,
} );
</code></pre>
<p>By default, the object just includes the <code>edit</code> property, but you can add many more, including <code>icon</code>. While most of these properties are already defined in <code>block.json</code>, you need to specify the icon here to use a custom SVG.</p>
<h4>Adding a custom icon</h4>
<p>Using the calendar icon from the <a href="https://wordpress.github.io/gutenberg/?path=/story/icons-icon--library">Gutenberg Storybook</a>, add the SVG to the function like so:</p>
<pre><code class="language-js">const calendarIcon = (
    &lt;svg
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
        focusable="false"
    &gt;
        &lt;path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm.5 16c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V7h15v12zM9 10H7v2h2v-2zm0 4H7v2h2v-2zm4-4h-2v2h2v-2zm4 0h-2v2h2v-2zm-4 4h-2v2h2v-2zm4 0h-2v2h2v-2z"&gt;&lt;/path&gt;
    &lt;/svg&gt;
);

registerBlockType( metadata.name, {
    icon: calendarIcon,
    edit: Edit
} );
</code></pre>
<div class="callout callout-tip">
    All block icons should be 24 pixels square. Note the <code>viewBox</code> parameter above.
</div>
<p>Save the <code>index.js</code> file and refresh the Editor. You will now see the calendar icon instead of the default.</p>
<p><img alt="The block in the Editor a custom icon" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-7.png?ssl=1"/></p>
<p>At this point, the block’s icon and description are correct, and block supports allow you to change the font size and text color. Now, it’s time to move on to the actual functionality of the block.</p>
<h3 class="is-toc-heading" id="updating-edit-js" tabindex="-1"><a href="#updating-edit-js">Updating edit.js</a></h3>
<p>The <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/file-structure-of-a-block/#edit-js"><code>edit.js</code></a> file controls how the block functions and appears in the Editor. Right now, the user sees the message “Copyright Date Block – hello from the editor!”. Let’s change that.</p>
<p>Open the file and see that the <code>Edit()</code> function returns a paragraph tag with the default message.</p>
<pre><code class="language-js">export default function Edit() {
    return (
        &lt;p { ...useBlockProps() }&gt;
            { __(
                'Copyright Date Block – hello from the editor!',
                'copyright-date-block-demo'
            ) }
        &lt;/p&gt;
    );
}
</code></pre>
<p>It looks a bit more complicated than it is.</p>
<ul>
<li><a href="https://developer.notmatt.press/block-editor/reference-guides/block-api/block-edit-save/#block-wrapper-props"><code>useBlockProps()</code></a> outputs all the necessary CSS classes and styles in the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/block-wrapper/#the-edit-components-markup">block’s wrapper</a> needed by the Editor, which includes the style provided by the block supports you added earlier</li>
<li><a href="https://developer.notmatt.press/block-editor/reference-guides/packages/packages-i18n/"><code>__()</code></a> is used for the internationalization of text strings</li>
</ul>
<div class="callout callout-info">
    Review the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/block-wrapper/">block wrapper</a> documentation for an introductory guide on how to ensure the block’s markup wrapper has the proper attributes.
</div>
<p>As a reminder, the main purpose of this block is to display the copyright symbol (©) and the current year. So, you first need to get the current year in string form, which can be done with the following code.</p>
<pre><code class="language-js">const currentYear = new Date().getFullYear().toString();
</code></pre>
<p>Next, update the function to display the correct information.</p>
<pre><code class="language-js">export default function Edit() {
    const currentYear = new Date().getFullYear().toString();

    return (
        &lt;p { ...useBlockProps() }&gt;© { currentYear }&lt;/p&gt;
    );
}
</code></pre>
<p>Save the <code>edit.js</code> file and refresh the Editor. You will now see the copyright symbol (©) followed by the current year.</p>
<p><img alt="The block in the Editor displays the correct content" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-8.png?ssl=1"/></p>
<h3 class="is-toc-heading" id="updating-render-php" tabindex="-1"><a href="#updating-render-php">Updating render.php</a></h3>
<p>While the block is working properly in the Editor, the default block message is still being displayed on the front end. To fix this, open the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/file-structure-of-a-block/#render-php"><code>render.php</code></a> file, and you will see the following.</p>
<pre><code class="language-php">&lt;?php
...
?&gt;
&lt;p &lt;?php echo get_block_wrapper_attributes(); ?&gt;&gt;
    &lt;?php esc_html_e( 'Copyright Date Block – hello from a dynamic block!', 'copyright-date-block' ); ?&gt;
&lt;/p&gt;

</code></pre>
<p>Similar to the <code>useBlockProps()</code> function in the Editor, <a href="https://developer.notmatt.press/reference/functions/get_block_wrapper_attributes/"><code>get_block_wrapper_attributes()</code></a> outputs all the necessary CSS classes and styles in the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/block-wrapper/#the-server-side-render-markup">block’s wrapper</a>. Only the content needs to be updated.</p>
<p>You can use <code>date( "Y" )</code> to get the current year in PHP, and your <code>render.php</code> should look like this.</p>
<pre><code class="language-php">&lt;?php
...
?&gt;
&lt;p &lt;?php echo get_block_wrapper_attributes(); ?&gt;&gt;© &lt;?php echo date( "Y" ); ?&gt;&lt;/p&gt;
</code></pre>
<p>Save the file and confirm that the block appears correctly in the Editor and on the front end.</p>
<h3 class="is-toc-heading" id="cleaning-up" tabindex="-1"><a href="#cleaning-up">Cleaning up</a></h3>
<p>When you use the <code>create-block</code> package to scaffold a block, it might include files that you don’t need. In the case of this tutorial, the block doesn’t use stylesheets or front end JavaScript. Clean up the plugin’s <code>src/</code> folder with the following actions.</p>
<ol>
<li>In the <code>edit.js</code> file, remove the lines that import <code>editor.scss</code></li>
<li>In the <code>index.js</code> file, remove the lines that import <code>style.scss</code></li>
<li>Delete the editor.scss, style.scss, and view.js files</li>
</ol>
<p>Finally, make sure that there are no unsaved changes and then terminate the <code>npm run start</code> command. Run <code>npm run build</code> to optimize your code and make it production-ready.</p>
<p>You have built a fully functional WordPress block, but let’s not stop here. In the next sections, we’ll add functionality and enable static rendering.</p>
<h2 class="is-toc-heading" id="adding-block-attributes" tabindex="-1"><a href="#adding-block-attributes">Adding block attributes</a></h2>
<p>The Copyright Date Block you have built shows the current year, but what if you wanted to display a starting year as well?</p>
<p><img alt="What you're going to build" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-1.png?ssl=1"/></p>
<p>This functionality would require users to enter their starting year somewhere on the block. They should also have the ability to toggle it on or off.</p>
<p>You could implement this in different ways, but all would require <a href="https://developer.notmatt.press/block-editor/reference-guides/block-api/block-attributes/">block attributes</a>. Attributes allow you to store custom data for the block that can then be used to modify the block’s markup.</p>
<p>To enable this starting year functionality, you will need one attribute to store the starting year and another that will be used to tell WordPress whether the starting year should be displayed or not.</p>
<h3 class="is-toc-heading" id="updating-block-json-2" tabindex="-1"><a href="#updating-block-json-2">Updating block.json</a></h3>
<p>Block attributes are generally specified in the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/block-json/#data-storage-in-the-block-with-attributes"><code>block.json</code></a> file. So open up the file and add the following section after the <code>example</code> property.</p>
<pre><code class="language-json">"example": {},
"attributes": {
    "showStartingYear": {
        "type": "boolean"
    },
    "startingYear": {
        "type": "string"
    }
},
</code></pre>
<p>You must indicate the <code>type</code> when defining attributes. In this case, the <code>showStartingYear</code> should be true or false, so it’s set to <code>boolean</code>. The <code>startingYear</code> is just a string.</p>
<p>Save the file, and you can now move on to the Editor.</p>
<h3 class="is-toc-heading" id="updating-edit-js-2" tabindex="-1"><a href="#updating-edit-js-2">Updating edit.js</a></h3>
<p>Open the <code>edit.js</code> file. You will need to accomplish two tasks.</p>
<ul>
<li>Add a user interface that allows the user to enter a starting year, toggle the functionality on or off, and store these settings as attributes.</li>
<li>Update the block to display the correct content depending on the defined attributes.</li>
</ul>
<h4>Adding the user interface</h4>
<p>Earlier in this tutorial, you added block supports that automatically created Color and Typography panels in the Settings Sidebar of the block. You can create your own custom panels using the <code>InspectorControls</code> component.</p>
<h5>Inspector controls</h5>
<p>The <code>InspectorControls</code> belongs to the <a href="https://developer.notmatt.press/block-editor/reference-guides/packages/packages-block-editor/"><code>@wordpress/block-editor</code></a> package, so you can import it into the <code>edit.js</code> file by adding the component name on line 14. The result should look like this.</p>
<pre><code class="language-js">import { InspectorControls, useBlockProps } from '@wordpress/block-editor';
</code></pre>
<p>Next, update the Edit function to return the current block content and an <code>InspectorControls</code> component that includes the text “Testing.” You can wrap everything in a <a href="https://react.dev/reference/react/Fragment">Fragment</a> (<code>&lt;&gt;&lt;/&gt;</code>) to ensure proper JSX syntax. The result should look like this.</p>
<pre><code class="language-js">export default function Edit() {
    const currentYear = new Date().getFullYear().toString();

    return (
        &lt;&gt;
            &lt;InspectorControls&gt;
                Testing
            &lt;/InspectorControls&gt;
            &lt;p { ...useBlockProps() }&gt;© { currentYear }&lt;/p&gt;
        &lt;/&gt;
    );
}
</code></pre>
<p>Save the file and refresh the Editor. When selecting the block, you should see the “Testing” message in the Settings Sidebar.</p>
<p><img alt="The Setting Sidebar now displays the message" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-9.png?ssl=1"/></p>
<h5>Components and panels</h5>
<p>Now, let’s use a few more Core components to add a custom panel and the user interface for the starting year functionality. You will want to import <a href="https://developer.notmatt.press/block-editor/reference-guides/components/panel/#panelbody"><code>PanelBody</code></a>, <a href="https://developer.notmatt.press/block-editor/reference-guides/components/text-control/"><code>TextControl</code></a>, and <a href="https://developer.notmatt.press/block-editor/reference-guides/components/toggle-control/"><code>ToggleControl</code></a> from the <a href="https://developer.notmatt.press/block-editor/reference-guides/packages/packages-components/"><code>@wordpress/components</code></a> package.</p>
<p>Add the following line below the other imports in the <code>edit.js</code> file.</p>
<pre><code class="language-js">import { PanelBody, TextControl, ToggleControl } from '@wordpress/components';
</code></pre>
<p>Then wrap the “Testing” message in the <code>PanelBody</code> component and set the <code>title</code> parameter to “Settings”. Refer to the <a href="https://developer.notmatt.press/block-editor/reference-guides/components/panel/#panelbody">component documentation</a> for additional parameter options.</p>
<pre><code class="language-js">export default function Edit() {
    const currentYear = new Date().getFullYear().toString();

    return (
        &lt;&gt;
            &lt;InspectorControls&gt;
                &lt;PanelBody title={ __( 'Settings', 'copyright-date-block' ) }&gt;
                    Testing
                &lt;/PanelBody&gt;
            &lt;/InspectorControls&gt;
            &lt;p { ...useBlockProps() }&gt;© { currentYear }&lt;/p&gt;
        &lt;/&gt;
    );
}
</code></pre>
<p>Save the file and refresh the Editor. You should now see the new Settings panel.</p>
<p><img alt="The Setting Sidebar now displays a custom panel" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-10.png?ssl=1"/></p>
<h5>Text control</h5>
<p>The next step is to replace the “Testing” message with a <code>TextControl</code> component that allows the user to set the <code>startingYear</code> attribute. However, you must include two parameters in the <code>Edit()</code> function before doing so.</p>
<ul>
<li><code>attributes</code> is an object that contains all the attributes for the block</li>
<li><code>setAttributes</code> is a function that allows you to update the value of an attribute</li>
</ul>
<p>With these parameters included, you can fetch the <code>showStartingYear</code> and <code>startingYear</code> attributes.</p>
<p>Update the top of the <code>Edit()</code> function to look like this.</p>
<pre><code class="language-js">export default function Edit( { attributes, setAttributes } ) {
    const { showStartingYear, startingYear } = attributes;
    ...
</code></pre>
<div class="callout callout-tip">
    To see all the attributes associated with the Copyright Date Block, add <code>console.log( attributes );</code> at the top of the <code>Edit()</code> function. This can be useful when building and testing a custom block.
</div>
<p>Now, you can remove the “Testing” message and add a <code>TextControl</code>. It should include:</p>
<ol>
<li>A <code>label</code> property set to “Starting year”</li>
<li>A <code>value</code> property set to the attribute <code>startingYear</code></li>
<li>An <code>onChange</code> property that updates the <code>startingYear</code> attribute whenever the value changes</li>
</ol>
<p>Putting it all together, the <code>Edit()</code> function should look like the following.</p>
<pre><code class="language-js">export default function Edit( { attributes, setAttributes } ) {
    const { showStartingYear, startingYear } = attributes;
    const currentYear = new Date().getFullYear().toString();

    return (
        &lt;&gt;
            &lt;InspectorControls&gt;
                &lt;PanelBody title={ __( 'Settings', 'copyright-date-block' ) }&gt;
                    &lt;TextControl
                        __nextHasNoMarginBottom
                        __next40pxDefaultSize
                        label={ __(
                            'Starting year',
                            'copyright-date-block'
                        ) }
                        value={ startingYear || '' }
                        onChange={ ( value ) =&gt;
                            setAttributes( { startingYear: value } )
                        }
                    /&gt;
                &lt;/PanelBody&gt;
            &lt;/InspectorControls&gt;
            &lt;p { ...useBlockProps() }&gt;© { currentYear }&lt;/p&gt;
        &lt;/&gt;
    );
}
</code></pre>
<div class="callout callout-tip">
    You may have noticed that the <code>value</code> property has a value of <code>startingYear || ''</code>. The symbol <code>||</code> is called the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR">Logical OR</a> (logical disjunction) operator. This prevents warnings in React when the <code>startingYear</code> is empty. See <a href="https://react.dev/learn/sharing-state-between-components#controlled-and-uncontrolled-components">Controlled and uncontrolled components</a> for details.
</div>
<p>Save the file and refresh the Editor. Confirm that a text field now exists in the Settings panel. Add a starting year and confirm that when you update the page, the value is saved.</p>
<p><img alt="A live look at editing the new Starting Year field in the Settings Sidebar" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-11.gif?ssl=1"/></p>
<h5>Toggle control</h5>
<p>Next, let’s add a toggle that will turn the starting year functionality on or off. You can do this with a <code>ToggleControl</code> component that sets the <code>showStartingYear</code> attribute. It should include:</p>
<ol>
<li>A <code>label</code> property set to “Show starting year”</li>
<li>A <code>checked</code> property set to the attribute <code>showStartingYear</code></li>
<li>An <code>onChange</code> property that updates the <code>showStartingYear</code> attribute whenever the toggle is checked or unchecked</li>
</ol>
<p>You can also update the “Starting year” text input so it’s only displayed when <code>showStartingYear</code> is <code>true</code>, which can be done using the <code>&amp;&amp;</code> logical operator.</p>
<p>The <code>Edit()</code> function should look like the following.</p>
<pre><code class="language-js">export default function Edit( { attributes, setAttributes } ) {
    const { showStartingYear, startingYear } = attributes;
    const currentYear = new Date().getFullYear().toString();

    return (
        &lt;&gt;
            &lt;InspectorControls&gt;
                &lt;PanelBody title={ __( 'Settings', 'copyright-date-block' ) }&gt;
                    &lt;ToggleControl
                        checked={ !! showStartingYear }
                        label={ __(
                            'Show starting year',
                            'copyright-date-block'
                        ) }
                        onChange={ () =&gt;
                            setAttributes( {
                                showStartingYear: ! showStartingYear,
                            } )
                        }
                    /&gt;
                    { showStartingYear &amp;&amp; (
                        &lt;TextControl
                            __nextHasNoMarginBottom
                            __next40pxDefaultSize
                            label={ __(
                                'Starting year',
                                'copyright-date-block'
                            ) }
                            value={ startingYear || '' }
                            onChange={ ( value ) =&gt;
                                setAttributes( { startingYear: value } )
                            }
                        /&gt;
                    ) }
                &lt;/PanelBody&gt;
            &lt;/InspectorControls&gt;
            &lt;p { ...useBlockProps() }&gt;© { currentYear }&lt;/p&gt;
        &lt;/&gt;
    );
}
</code></pre>
<p>Save the file and refresh the Editor. Confirm that clicking the toggle displays the text input, and when you update the page, the toggle remains active.</p>
<p><img alt="A live look at editing the new Show Starting Year toggle in the Settings Sidebar" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-12.gif?ssl=1"/></p>
<h4>Updating the block content</h4>
<p>So far, you have created the user interface for adding a starting year and updating the associated block attributes. Now you need to actually update the block content in the Editor.</p>
<p>Let’s create a new variable called <code>displayDate</code>. When <code>showStartingYear</code> is <code>true</code> and the user has provided a <code>startingYear</code>, the <code>displayDate</code> should include the <code>startingYear</code> and the <code>currentYear</code> separated by an em dash. Otherwise, just display the <code>currentYear</code>.</p>
<p>The code should look something like this.</p>
<pre><code class="language-js">let displayDate;

if ( showStartingYear &amp;&amp; startingYear ) {
    displayDate = startingYear + '–' + currentYear;
} else {
    displayDate = currentYear;
}
</code></pre>
<div class="callout callout-tip">
    When you declare a variable with <code>let</code>, it means that the variable may be reassigned later. Declaring a variable with <code>const</code> means that the variable will never change. You could rewrite this code using <code>const</code>. It’s just a matter of personal preference.
</div>
<p>Next, you just need to update the block content to use the <code>displayDate</code> instead of the <code>currentYear</code> variable.</p>
<p>The <code>Edit()</code> function should look like the following.</p>
<pre><code class="language-js">export default function Edit( { attributes, setAttributes } ) {
    const { showStartingYear, startingYear } = attributes;
    const currentYear = new Date().getFullYear().toString();

    let displayDate;

    if ( showStartingYear &amp;&amp; startingYear ) {
            displayDate = startingYear + '–' + currentYear;
    } else {
        displayDate = currentYear;
    }

    return (
        &lt;&gt;
            &lt;InspectorControls&gt;
                &lt;PanelBody title={ __( 'Settings', 'copyright-date-block' ) }&gt;
                    &lt;ToggleControl
                        checked={ !! showStartingYear }
                        label={ __(
                            'Show starting year',
                            'copyright-date-block'
                        ) }
                        onChange={ () =&gt;
                            setAttributes( {
                                showStartingYear: ! showStartingYear,
                            } )
                        }
                    /&gt;
                    { showStartingYear &amp;&amp; (
                        &lt;TextControl
                            label={ __(
                                'Starting year',
                                'copyright-date-block'
                            ) }
                            value={ startingYear || '' }
                            onChange={ ( value ) =&gt;
                                setAttributes( { startingYear: value } )
                            }
                        /&gt;
                    ) }
                &lt;/PanelBody&gt;
            &lt;/InspectorControls&gt;
            &lt;p { ...useBlockProps() }&gt;© { displayDate }&lt;/p&gt;
        &lt;/&gt;
    );
}
</code></pre>
<p>Save the file and refresh the Editor. Confirm that the block content updates correctly when you make changes in the Settings panel.</p>
<p><img alt="A live look at the block content being updated by the new fields in the Setting Sidebar" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-13.gif?ssl=1"/></p>
<h3 class="is-toc-heading" id="updating-render-php-2" tabindex="-1"><a href="#updating-render-php-2">Updating render.php</a></h3>
<p>While the Editor looks great, the starting year functionality has yet to be added to the front end. Let’s fix that by updating the <code>render.php</code> file.</p>
<p>Start by adding a variable called <code>$display_date</code> and replicate what you did in the <code>Edit()</code> function above.</p>
<p>This variable should display the value of the <code>startingYear</code> attribute and the <code>$current_year</code> variable separated by an em dash, or just the <code>$current_year</code> if the <code>showStartingYear</code> attribute is <code>false</code>.</p>
<div class="callout callout-tip">
    Three variables are exposed in <code>render.php</code>, which you can use to customize the block’s output:
<ul>
<li><code>$attributes</code> (array): The block attributes.</li>
<li><code>$content</code> (string): The block default content.</li>
<li><code>$block</code> (<a href="https://developer.notmatt.press/reference/classes/wp_block/" rel="class">WP_Block</a>): The block instance.</li>
</ul>
</div>
<p>The code should look something like this.</p>
<pre><code class="language-php">if ( ! empty( $attributes['startingYear'] ) &amp;&amp; ! empty( $attributes['showStartingYear'] ) ) {
    $display_date = $attributes['startingYear'] . '–' . $current_year;
} else {
    $display_date = $current_year;
}
</code></pre>
<p>Next, you just need to update the block content to use the <code>$display_date</code> instead of the <code>$current_year</code> variable.</p>
<p>Your final <code>render.php</code> file should look like this.</p>
<pre><code class="language-php">&lt;?php
$current_year = date( "Y" );

if ( ! empty( $attributes['startingYear'] ) &amp;&amp; ! empty( $attributes['showStartingYear'] ) ) {
    $display_date = $attributes['startingYear'] . '–' . $current_year;
} else {
    $display_date = $current_year;
}
?&gt;
&lt;p &lt;?php echo get_block_wrapper_attributes(); ?&gt;&gt;
    © &lt;?php echo esc_html( $display_date ); ?&gt;
&lt;/p&gt;
</code></pre>
<p>Save the file and confirm that the correct block content is now appearing on the front end of your site.</p>
<p>You have now successfully built a dynamically rendered custom block that utilizes block supports, core WordPress components, and custom attributes. In many situations, this is as far as you would need to go for a block displaying the copyright date with some additional functionality.</p>
<p>In the next section, however, you will add static rendering to the block. This exercise will illustrate how block data is stored in WordPress and provide a fallback should this plugin ever be inadvertently disabled.</p>
<h2 class="is-toc-heading" id="adding-static-rendering" tabindex="-1"><a href="#adding-static-rendering">Adding static rendering</a></h2>
<p>A block can utilize dynamic rendering, static rendering, or both. The block you have built so far is dynamically rendered. Its block markup and associated attributes are stored in the database, but its HTML output is not.</p>
<p>Statically rendered blocks will always store the block markup, attributes, and output in the database. Blocks can also store static output in the database while being further enhanced dynamically on the front end, a combination of both methods.</p>
<p>You will see the following if you switch to the Code editor from within the Editor.</p>
<pre><code class="language-html">&lt;!-- wp:create-block/copyright-date-block {"showStartingYear":true,"startingYear":"2017"} /--&gt;
</code></pre>
<p>Compare this to a statically rendered block like the Paragraph block.</p>
<pre><code class="language-html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This is a test.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</code></pre>
<p>The HTML of the paragraph is stored in post content and saved in the database.</p>
<p>You can learn more about dynamic and static rendering in the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/static-dynamic-rendering/">Fundamentals documentation</a>. While most blocks are either dynamically or statically rendered, you can build a block that utilizes both methods.</p>
<h3 class="is-toc-heading" id="why-add-static-rendering" tabindex="-1"><a href="#why-add-static-rendering">Why add static rendering?</a></h3>
<p>When you add static rendering to a dynamically rendered block, the <code>render.php</code> file will still control the output on the front end, but the block’s HTML content will be saved in the database. This means that the content will remain if the plugin is ever removed from the site. In the case of this Copyright Date Block, the content will revert to a Custom HTML block that you can easily convert to a Paragraph block.</p>
<p><img alt="An error message in the Editor when a block type no longer exists" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-14.png?ssl=1"/></p>
<p>While not necessary in all situations, adding static rendering to a dynamically rendered block can provide a helpful fallback should the plugin ever be disabled unintentionally.</p>
<p>Also, consider a situation where the block markup is included in a block pattern or theme template. If a user installs that theme or uses the pattern without the Copyright Date Block installed, they will get a notice that the block is not available, but the content will still be displayed.</p>
<p>Adding static rendering is also a good exploration of how block content is stored and rendered in WordPress.</p>
<h3 class="is-toc-heading" id="adding-a-save-function" tabindex="-1"><a href="#adding-a-save-function">Adding a save function</a></h3>
<p>Start by adding a new file named <code>save.js</code> to the <code>src/</code> folder. In this file, add the following.</p>
<pre><code class="language-js">import { useBlockProps } from '@wordpress/block-editor';

export default function save() {
    return (
        &lt;p { ...useBlockProps.save() }&gt;
            { 'Copyright Date Block – hello from the saved content!' }
        &lt;/p&gt;
    );
}
</code></pre>
<p>This should look similar to the original <code>edit.js</code> file, and you can refer to the <a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/block-wrapper/#the-save-components-markup">block wrapper</a> documentation for additional information.</p>
<p>Next, in the <code>index.js</code> file, import this <code>save()</code> function and add a save property to the <code>registerBlockType()</code> function. Here’s a simplified view of the updated file.</p>
<pre><code class="language-js">import save from './save';

...

registerBlockType( metadata.name, {
    icon: calendarIcon,
    edit: Edit,
    save
} );
</code></pre>
<div class="callout callout-tip">
    When defining properties of an object, if the property name and the variable name are the same, you can use shorthand property names. This is why the code above uses <code>save</code> instead of <code>save: save</code>.
</div>
<p>Save both <code>save.js</code> and <code>index.js</code> files and refresh the Editor. It should look like this.</p>
<p><img alt="A block validation error message in the Editor" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-15.png?ssl=1"/></p>
<p>Don’t worry, the error is expected. If you open the inspector in your browser, you should see the following message.</p>
<p><img alt="A block validation error message in the console" data-recalc-dims="1" decoding="async" src="https://i0.wp.com/developer.wordpress.org/files/2023/12/block-tutorial-16.png?ssl=1"/></p>
<p>This block validation error occurs because the <code>save()</code> function returns block content, but no HTML is stored in the block markup since the previously saved block was dynamic. Remember that this is what the markup currently looks like.</p>
<pre><code class="language-html">&lt;!-- wp:create-block/copyright-date-block {"showStartingYear":true,"startingYear":"2017"} /--&gt;
</code></pre>
<p>You will see more of these errors as you update the <code>save()</code> function in subsequent steps. Just click “Attempt Block Recovery” and update the page.</p>
<p>After performing block recovery, open the Code editor and you will see the markup now looks like this.</p>
<pre><code class="language-html">&lt;!-- wp:create-block/copyright-date-block {"showStartingYear":true,"startingYear":"2017"} --&gt;
&lt;p class="wp-block-create-block-copyright-date-block"&gt;Copyright Date Block – hello from the saved content!&lt;/p&gt;
&lt;!-- /wp:create-block/copyright-date-block --&gt;
</code></pre>
<p>You will often encounter block validation errors when building a block with static rendering, and that’s ok. The output of the <code>save()</code> function must match the HTML in the post content exactly, which may end up out of sync as you add functionality. So long as there are no validation errors when you’re completely finished building the block, you will be all set.</p>
<h3 class="is-toc-heading" id="updating-save-js" tabindex="-1"><a href="#updating-save-js">Updating save.js</a></h3>
<p>Next, let’s update the output of the <code>save()</code> function to display the correct content. Start by copying the same approach used in <code>edit.js</code>.</p>
<ol>
<li>Add the <code>attributes</code> parameter to the function</li>
<li>Define the <code>showStartingYear</code> and <code>startingYear</code> variables</li>
<li>Define a <code>currentYear</code> variable</li>
<li>Define a <code>displayDate</code> variable depending on the values of <code>currentYear</code>, <code>showStartingYear</code>, and <code>startingYear</code></li>
</ol>
<p>The result should look like this.</p>
<pre><code class="language-js">export default function save( { attributes } ) {
    const { showStartingYear, startingYear } = attributes;
    const currentYear = new Date().getFullYear().toString();

    let displayDate;

    if ( showStartingYear &amp;&amp; startingYear ) {
        displayDate = startingYear + '–' + currentYear;
    } else {
        displayDate = currentYear;
    }

    return (
        &lt;p { ...useBlockProps.save() }&gt;© { displayDate }&lt;/p&gt;
    );
}
</code></pre>
<p>Save the file and refresh the Editor. Click “Attempt Block Recovery” and update the page. Check the Code editor, and the block markup should now look something like this.</p>
<pre><code class="language-html">&lt;!-- wp:create-block/copyright-date-block {"showStartingYear":true,"startingYear":"2017"} --&gt;
&lt;p class="wp-block-create-block-copyright-date-block"&gt;© 2017–2023&lt;/p&gt;
&lt;!-- /wp:create-block/copyright-date-block --&gt;
</code></pre>
<p>At this point, it might look like you’re done. The block content is now saved as HTML in the database and the output on the front end is dynamically rendered. However, there are still a few things that need to be addressed.</p>
<p>Consider the situation where the user added the block to a page in 2023 and then went back to edit the page in 2024. The front end will update as expected, but in the Editor, there will be a block validation error. The <code>save()</code> function knows that it’s 2024, but the block content saved in the database still says 2023.</p>
<p>Let’s fix this in the next section.</p>
<h3 class="is-toc-heading" id="handling-dynamic-content-in-statically-rendered-blocks" tabindex="-1"><a href="#handling-dynamic-content-in-statically-rendered-blocks">Handling dynamic content in statically rendered blocks</a></h3>
<p>Generally, you want to avoid dynamic content in statically rendered blocks. This is part of the reason why the term “dynamic” is used when referring to dynamic rendering.</p>
<p>That said, in this tutorial, you are combining both rendering methods, and you just need a bit more code to avoid any block validation errors when the year changes.</p>
<p>The root of the issue is that the <code>currentYear</code> variable is set dynamically in the <code>save()</code> function. Instead, this should be a static variable within the function, which can be solved with an additional attribute.</p>
<h4>Adding a new attribute</h4>
<p>Open the <code>block.json</code> file and add a new attribute called <code>fallbackCurrentYear</code> with the type <code>string</code>. The <code>attributes</code> section of the file should now look like this.</p>
<pre><code class="language-json">"attributes": {
    "fallbackCurrentYear": {
        "type": "string"
    },
    "showStartingYear": {
        "type": "boolean"
    },
    "startingYear": {
        "type": "string"
    }
},
</code></pre>
<p>Next, open the <code>save.js</code> file and use the new <code>fallbackCurrentYear</code> attribute in place of <code>currentYear</code>. Your updated <code>save()</code> function should look like this.</p>
<pre><code class="language-js">export default function save( { attributes } ) {
    const { fallbackCurrentYear, showStartingYear, startingYear } = attributes;

    let displayDate;

    if ( showStartingYear &amp;&amp; startingYear ) {
        displayDate = startingYear + '–' + fallbackCurrentYear;
    } else {
        displayDate = fallbackCurrentYear;
    }

    return (
        &lt;p { ...useBlockProps.save() }&gt;© { displayDate }&lt;/p&gt;
    );
}
</code></pre>
<p>Now, what happens if the <code>fallbackCurrentYear</code> is undefined?</p>
<p>Before the <code>currentYear</code> was defined within the function, so the <code>save()</code> function always had content to return, even if <code>showStartingYear</code> and <code>startingYear</code> were undefined.</p>
<p>Instead of returning just the copyright symbol, let’s add a condition that if <code>fallbackCurrentYear</code> is not set, return <code>null</code>. It’s generally better to save no HTML in the database than incomplete data.</p>
<p>The final <code>save()</code> function should look like this.</p>
<pre><code class="language-js">export default function save( { attributes } ) {
    const { fallbackCurrentYear, showStartingYear, startingYear } = attributes;

    if ( ! fallbackCurrentYear ) {
        return null;
    }

    let displayDate;

    if ( showStartingYear &amp;&amp; startingYear ) {
        displayDate = startingYear + '–' + fallbackCurrentYear;
    } else {
        displayDate = fallbackCurrentYear;
    }

    return (
        &lt;p { ...useBlockProps.save() }&gt;© { displayDate }&lt;/p&gt;
    );
}
</code></pre>
<p>Save both the <code>block.json</code> and <code>save.js</code> files; you won’t need to make any more changes.</p>
<h4>Setting the attribute in edit.js</h4>
<p>The <code>save()</code> function now uses the new <code>fallbackCurrentYear</code>, so it needs to be set somewhere. Let’s use the <code>Edit()</code> function.</p>
<p>Open the <code>edit.js</code> file and start by defining the <code>fallbackCurrentYear</code> variable at the top of the <code>Edit()</code> functional alongside the other attributes. Next, review what’s happening in the function.</p>
<p>When the block loads in the Editor, the <code>currentYear</code> variable is defined. The function then uses this variable to set the content of the block.</p>
<p>Now, let’s set the <code>fallbackCurrentYear</code> attribute to the <code>currentYear</code> when the block loads if the attribute is not already set.</p>
<pre><code class="language-js">if ( currentYear !== fallbackCurrentYear ) {
    setAttributes( { fallbackCurrentYear: currentYear } );
}
</code></pre>
<p>This will work but can be improved by ensuring this code only runs once when the block is initialized. To do so, you can use the <a href="https://react.dev/reference/react/useEffect"><code>useEffect</code></a> React hook. Refer to the React documentation for more information about how to use this hook.</p>
<p>First, import <code>useEffect</code> with the following code.</p>
<pre><code class="language-js">import { useEffect } from 'react';
</code></pre>
<p>Then wrap the <code>setAttribute()</code> code above in a <code>useEffect</code> and place this code after the <code>currentYear</code> definition in the <code>Edit()</code> function. The result should look like this.</p>
<pre><code class="language-js">export default function Edit( { attributes, setAttributes } ) {
    const { fallbackCurrentYear, showStartingYear, startingYear } = attributes;

    // Get the current year and make sure it's a string.
    const currentYear = new Date().getFullYear().toString();

    // When the block loads, set the fallbackCurrentYear attribute to the
    // current year if it's not already set.
    useEffect( () =&gt; {
        if ( currentYear !== fallbackCurrentYear ) {
            setAttributes( { fallbackCurrentYear: currentYear } );
        }
    }, [ currentYear, fallbackCurrentYear, setAttributes ] );

    ...
</code></pre>
<p>When the block is initialized in the Editor, the <code>fallbackCurrentYear</code> attribute will be immediately set. This value will then be available to the <code>save()</code> function, and the correct block content will be displayed without block validation errors.</p>
<p>The one caveat is when the year changes. If a Copyright Date Block was added to a page in 2023 and then edited in 2024, the <code>fallbackCurrentYear</code> attribute will no longer equal the <code>currentYear</code>, and the attribute will be automatically updated to <code>2024</code>. This will update the HTML returned by the <code>save()</code> function.</p>
<p>You will not get any block validation errors, but the Editor will detect that changes have been made to the page and prompt you to update.</p>
<h4>Optimizing render.php</h4>
<p>The final step is to optimize the <code>render.php</code> file. If the <code>currentYear</code> and the <code>fallbackCurrentYear</code> attribute are the same, then there is no need to dynamically create the block content. It is already saved in the database and is available in the  <code>render.php</code> file via the <code>$content</code> variable.</p>
<p>Therefore, update the file to render the generated content if <code>currentYear</code> and <code>fallbackCurrentYear</code> do not match.</p>
<pre><code class="language-php">$current_year = date( "Y" );

// Determine which content to display.
if ( isset( $attributes['fallbackCurrentYear'] ) &amp;&amp; $attributes['fallbackCurrentYear'] === $current_year ) {

    // The current year is the same as the fallback, so use the block content saved in the database (by the save.js function).
    $block_content = $content;
} else {

    // The current year is different from the fallback, so render the updated block content.
    if ( ! empty( $attributes['startingYear'] ) &amp;&amp; ! empty( $attributes['showStartingYear'] ) ) {
        $display_date = $attributes['startingYear'] . '–' . $current_year;
    } else {
        $display_date = $current_year;
    }

    $block_content = '&lt;p ' . get_block_wrapper_attributes() . '&gt;© ' . esc_html( $display_date ) . '&lt;/p&gt;';
}

echo wp_kses_post( $block_content );
</code></pre>
<p>That’s it! You now have a block that utilizes both dynamic and static rendering.</p>
<h2 class="is-toc-heading" id="wrapping-up" tabindex="-1"><a href="#wrapping-up">Wrapping up</a></h2>
<p>Congratulations on completing this tutorial and building your very own Copyright Date Block. Throughout this journey, you have gained a solid foundation in WordPress block development and are now ready to start building your own blocks.</p>
<p>For final reference, the complete code for this tutorial is available in the <a href="https://github.com/WordPress/block-development-examples/tree/trunk/plugins/copyright-date-block-09aac3">Block Development Examples</a> repository on GitHub.</p>
<p>Now, whether you’re now looking to refine your skills, tackle more advanced projects, or stay updated with the latest WordPress trends, the following resources will help you improve your block development skills:</p>
<ul>
<li><a href="https://developer.notmatt.press/block-editor/getting-started/devenv/">Block Development Environment</a></li>
<li><a href="https://developer.notmatt.press/block-editor/getting-started/fundamentals/">Fundamentals of Block Development</a></li>
<li><a href="https://developer.notmatt.press/news/">WordPress Developer Blog</a></li>
<li><a href="https://github.com/WordPress/block-development-examples">Block Development Examples</a> | GitHub repository</li>
</ul>
<p>Remember, every expert was once a beginner. Keep learning, experimenting, and, most importantly, have fun building with WordPress.</p>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
