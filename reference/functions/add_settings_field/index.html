
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">add_settings_field()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>add_settings_field()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">add_settings_field( <span class="arg-type">string</span> <span class="arg-name">$id</span>,  <span class="arg-type">string</span> <span class="arg-name">$title</span>,  <span class="arg-type">callable</span> <span class="arg-name">$callback</span>,  <span class="arg-type">string</span> <span class="arg-name">$page</span>,  <span class="arg-type">string</span> <span class="arg-name">$section</span> = <span class="arg-default">'default'</span>,  <span class="arg-type">array</span> <span class="arg-name">$args</span> = <span class="arg-default">array()</span> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Adds a new field to a section of a settings page.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>Part of the Settings API. Use this to define a settings field that will show as part of a settings section inside a settings page. The fields are shown using <a href="https://developer.notmatt.press/reference/functions/do_settings_fields/" rel="function">do_settings_fields()</a>  in <a href="https://developer.notmatt.press/reference/functions/do_settings_sections/" rel="function">do_settings_sections()</a> .</p>
<p>The $callback argument should be the name of a function that echoes out the HTML input tags for this setting field. Use <a href="https://developer.notmatt.press/reference/functions/get_option/" rel="function">get_option()</a>  to retrieve existing values to show.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$id</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Slug-name to identify the field. Used in the <code>'id'</code> attribute of tags.</span></div></dd><dt><code>$title</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Formatted title of the field. Shown as the label for the field                           during output.</span></div></dd><dt><code>$callback</code><span class="type"><span class="callable">callable</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Function that fills the field with the desired form inputs. The                           function should echo its output.</span></div></dd><dt><code>$page</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The slug-name of the settings page on which to show the section                           (general, reading, writing, …).</span></div></dd><dt><code>$section</code><span class="type"><span class="string">string</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">The slug-name of the section of the settings page                           in which to show the box. Default <code>'default'</code>.</span></div><p class="default">Default:<code>'default'</code></p></dd><dt><code>$args</code><span class="type"><span class="array">array</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Extra arguments that get passed to the callback function.<br/>
<ul class="param-hash"><li><code>label_for</code> <span class="type">string</span><div class="desc">When supplied, the setting title will be wrapped in a <code>&lt;label&gt;</code> element, its <code>for</code> attribute populated with this value.</div></li>
<li><code>class</code> <span class="type">string</span><div class="desc">CSS Class to be added to the <code>&lt;tr&gt;</code> element when the field is output.</div></li>
</ul>
</span></div><p class="default">Default:<code>array()</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<p><b>You MUST register any options</b> used by this function with <a href="https://developer.notmatt.press/reference/functions/register_setting/" title="Function Reference/register setting">register_setting()</a> or they won’t be saved and updated automatically.</p>
<p><b>The callback function</b> needs to output the appropriate html input and fill it with the old value, the saving will be done behind the scenes.</p>
<p>The html input field’s <b>name</b> attribute must match $option_name in <a href="https://developer.notmatt.press/reference/functions/register_setting/" title="Function Reference/register setting">register_setting()</a>, and <b>value</b> can be filled using <a href="https://developer.notmatt.press/reference/functions/get_option/" title="Function Reference/get option">get_option()</a>.</p>
<p>This function can also be used to add extra settings fields to the default WP settings pages like media or general. You can add them to an existing section, or use <a href="https://developer.notmatt.press/reference/functions/add_settings_section/" rel="function">add_settings_section()</a>  to create a new section to add the fields to.</p>
<p>See <a href="https://developer.notmatt.press/apis/handbook/settings/" title="Settings API">Settings API</a> for details.</p>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1713"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function add_settings_field( $id, $title, $callback, $page, $section = 'default', $args = array() ) {
	global $wp_settings_fields;

	if ( 'misc' === $page ) {
		_deprecated_argument(
			__FUNCTION__,
			'3.0.0',
			sprintf(
				/* translators: %s: misc */
				__( 'The "%s" options group has been removed. Use another settings group.' ),
				'misc'
			)
		);
		$page = 'general';
	}

	if ( 'privacy' === $page ) {
		_deprecated_argument(
			__FUNCTION__,
			'3.5.0',
			sprintf(
				/* translators: %s: privacy */
				__( 'The "%s" options group has been removed. Use another settings group.' ),
				'privacy'
			)
		);
		$page = 'reading';
	}

	$wp_settings_fields[ $page ][ $section ][ $id ] = array(
		'id'       =&gt; $id,
		'title'    =&gt; $title,
		'callback' =&gt; $callback,
		'args'     =&gt; $args,
	);
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-admin/includes/template.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-admin/includes/template.php#L1713">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-admin/includes/template.php#L1713-L1748">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/_deprecated_argument/">_deprecated_argument()</a><code>wp-includes/functions.php</code></td><td><p>Marks a function argument as deprecated and inform when it has been used.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/4.2.0/">4.2.0</a></td><td><span class="since-description">The <code>$class</code> argument was added.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.7.0/">2.7.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="511" id="comment-511">
<article class="comment-body" id="div-comment-511">
<a class="screen-reader-text" href="#comment-content-511">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-511">
<p><strong>With Label</strong></p>
<p>Adds a setting with id <code>myprefix_setting-id</code> to the General Settings page. <code>myprefix</code> should be a unique string for your plugin or theme. Sets a label so that the setting title can be clicked on to focus on the field.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_settings_field( 'myprefix_setting-id',
	'This is the setting title',
 	'myprefix_setting_callback_function',
	'general',
	'myprefix_settings-section-name',
	array( 'label_for' =&gt; 'myprefix_setting-id' ) );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-511">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-tradesouthwestgmailcom odd alt thread-odd thread-alt depth-1" data-comment-id="3531" id="comment-3531">
<article class="comment-body" id="div-comment-3531">
<a class="screen-reader-text" href="#comment-content-3531">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3531">
<p>A checkbox settings field can be checked on the front end by simply looking for <em>isset</em>. No need to add additional checks like 1, 0, true, false…. if a checkbox is not set then it returns false.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/* **************** CHECKBOXES **************** */
    // settings checkbox 
    add_settings_field(
        'wpdevref_removestyles_field',
        esc_attr__('Remove Plugin Styles', 'wpdevref'),
        'wpdevref_removestyles_field_cb',
        'wpdevref_options',
        'wpdevref_options_section',
        array( 
            'type'         =&gt; 'checkbox',
            'option_group' =&gt; 'wpdevref_options', 
            'name'         =&gt; 'wpdevref_removestyles_field',
            'label_for'    =&gt; 'wpdevref_removestyles_field',
            'value'        =&gt; (empty(get_option('wpdevref_options')['wpdevref_removestyles_field']))
            ? 0 : get_option('unitizr_options')['wpdevref_removestyles_field'],
            'description'  =&gt; __( 'Check to remove preset plugin overrides.', 
                            'wpdevref' ),
            'checked'      =&gt; (!isset(get_option('wpdevref_options')['wpdevref_removestyles_field']))
                               ? 0 : get_option('wpdevref_options')['wpdevref_removestyles_field'],
            // Used 0 in this case but will still return Boolean not[see notes below] 
            'tip'          =&gt; esc_attr__( 'Use if plugin fields drastically changed when installing this plugin.', 'wpdevref' ) 
            )
    ); </code></pre>
<p>Then the callback would be added as such:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/** 
 * switch for 'remove styles' field
 * @since 2.0.1
 * @input type checkbox
 */
function wpdevref_removestyles_field_cb($args)
{ 
    $checked = '';
    $options = get_option($args['option_group']);
    $value   = ( !isset( $options[$args['name']] ) ) 
                ? null : $options[$args['name']];
    if($value) { $checked = ' checked="checked" '; }
        // Could use ob_start.
        $html  = '';
        $html .= '&lt;input id="' . esc_attr( $args['name'] ) . '" 
        name="' . esc_attr( $args['option_group'] . '['.$args['name'].']') .'" 
        type="checkbox" ' . $checked . '/&gt;';
        $html .= '&lt;span class="wndspan"&gt;' . esc_html( $args['description'] ) .'&lt;/span&gt;';
        $html .= '&lt;b class="wntip" data-title="'. esc_attr( $args['tip'] ) .'"&gt; ? &lt;/b&gt;';

        echo $html;
}</code></pre>
<p>And checking to render action on the front side would use:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php"> // Options getter could be a function with arguments.
    $options = get_option('wpdevref_options');
    $value   = ( !isset($options['wpdevref_removestyles_field'] ) ) 
                 ? '' : $options['wpdevref_removestyles_field'];
    if ( !$value ) { 
    // Do some magic
    }</code></pre>
<p>Optionally you can add a ‘false’ into any conditional (empty, null, ”, 0).</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3531">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-princepink even thread-even depth-1" data-comment-id="427" id="comment-427">
<article class="comment-body" id="div-comment-427">
<a class="screen-reader-text" href="#comment-content-427">Skip to note 9 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-427">
<p>I suspect <em>Used in the ‘id’ attribute of tags</em> might be rewritten to <strong>Used in the ‘name’ attribute of tags</strong>.<br>
I think the <strong>$id</strong> param is used for identifying the field to be recognised by WP and to show the field or get that’s value. Whether to be used as actual tag’s attribute <em>id</em>‘s value or not depends on the circumstances (in $callback). Normally the <em>name</em> attribute might be taken for this aim.<br/>
I just had been confused this param means to generate the attribute for some form element, but it seems not. When put <em>‘label_for’</em> in the $args that will be passed to the $callback, this generates <em>label</em> tag with attribute <em>for</em> automatically. So this value should be same as an actual <em>id</em>‘s value in the $callback which you write.</br></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-427">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-tehlivi odd alt thread-odd thread-alt depth-1" data-comment-id="2392" id="comment-2392">
<article class="comment-body" id="div-comment-2392">
<a class="screen-reader-text" href="#comment-content-2392">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2392">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action('admin_init', 'your_function');
function your_function(){
	add_settings_field(
		'myprefix_setting-id',
		'This is the setting title',
		'myprefix_setting_callback_function',
		'general',
		'default',
		array( 'label_for' =&gt; 'myprefix_setting-id' )
	);
}

function myprefix_setting_callback_function($args){
	echo 'Content here';
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2392">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-tehlivi even thread-even depth-1" data-comment-id="2393" id="comment-2393">
<article class="comment-body" id="div-comment-2393">
<a class="screen-reader-text" href="#comment-content-2393">Skip to note 11 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2393">
<p>Object Oriented:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">class ClassName {
	public function __construct() {
		add_action( 'admin_init', array( $this, 'your_function' ) );
	}

	function your_function() {
		add_settings_field(
			'myprefix_setting-id',
			'This is the setting title',
			array( $this, 'myprefix_setting_callback_function' ),
			'general',
			'default',
			array( 'label_for' =&gt; 'myprefix_setting-id' ),
		);
	}

	function myprefix_setting_callback_function( $args ) {
		echo 'Content here';
	}
}

$ClassName = new ClassName();</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-2393">
<ul class="children">
<li class="comment byuser comment-author-abhijitrakas odd alt depth-2" data-comment-id="3571" id="comment-3571">
<article class="comment-body" id="div-comment-3571">
<div class="wporg-has-embedded-code comment-content" id="comment-content-3571">
<div>Fixed Object Oriented code:  
<pre class="wp-block-code"><code class="language-php" lang="php">class ClassName {     public function __construct() {         add_action( 'admin_init', array( $this, 'your_function' ) );     }       function your_function() {         add_settings_field(             'myprefix_setting-id',             'This is the setting title',             array( $this, 'myprefix_setting_callback_function' ),             'general',             'default',             array( 'label_for' =&amp;gt; 'myprefix_setting-id' )         );     }       function myprefix_setting_callback_function( $args ) {         echo 'Content here';     } }   $ClassName = new ClassName();</code></pre>
</div>
<div><a class="url" href="https://profiles.wordpress.org/abhijitrakas/" rel="external nofollow">Abhijit Rakas</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_settings_field/#comment-3571"><time datetime="2020-01-15T10:24:12+00:00">5 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-grapestain even thread-odd thread-alt depth-1" data-comment-id="3052" id="comment-3052">
<article class="comment-body" id="div-comment-3052">
<a class="screen-reader-text" href="#comment-content-3052">Skip to note 12 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3052">
<p>The <code>$id</code> argument description says “Used in the ‘id’ attribute of tags”, however this means <strong>you have to ensure this <code>$id</code> is used as the HTML <code>id</code> tag of your <code>input</code> element</strong> related to the field. WP only use this <code>$id</code> to have an unique key for your field in it’s internal settings_field list (<code>$wp_settings_fields</code>).<br/>
As WP does not control the way the input element is added to your Admin HTML, you have to ensure you output the input element with an <code>id</code> that matches the <code>$id</code> tag. This can be done by configuring the <code>$callback</code> to a function, that will produce the correct <code>input</code> element with the correct <code>id</code> tag.<br/>
The ‘label_for’ element in the $args array should also match the very same <code>id</code> in order for the browser to understand which <code>label</code> belongs to which <code>input</code> field.</p>
<p>It worth noting also, that the <code>id</code> tag of the <code>input</code> element should also match the $option_name (2nd) parameter you are using in your <code>register_setting()</code> call, otherwise the Settings API will fail to match the value sent by the browser in <code>$_POST</code> to your setting, and your setting will never be saved.</p>
<p>So long story short, we have a bunch of different names and arguments, but basically <code>$id</code> and <code>$args['label_for']</code> of <code>add_settings_field()</code> call and the <code>$option_name</code> of <code>register_setting()</code> call PLUS the <code>id</code> you use in your input field callback, should all be <strong>the same, unique <code>id</code></strong>. Also the same <code>id</code> should be used as the <code>$option</code> parameter in the <code>get_option($option)</code> calls to get the value of the setting.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">register_setting( 'mygroup', 'mynewcheckboxID' );
add_settings_field(
		'mynewcheckboxID', 
		'My New Checkbox',
		'callback_input_myid',
		'myAdminPage',
		'myAdminSection', 
		[
			'label_for' =&gt; 'mynewcheckboxID'
		] );

function callback_input_myid() {
	echo "&lt;input type='checkbox' id='mynewcheckboxID' value='1'"
	if ( get_option('mynewcheckboxID') == '1' ) {
		echo ' checked';
	}
 	echo '/&gt;';
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-3052">
<ul class="children">
<li class="comment byuser comment-author-davidhbrown odd alt depth-2" data-comment-id="6553" id="comment-6553">
<article class="comment-body" id="div-comment-6553">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6553">
<div>If storing multiple values in an array as recommended, the name attribute of each HTML input generated in your callback must be in the form <code>name="<em>option_name</em>[<em>key</em>]"</code>. The <em>option_name</em> is the value passed to <code>register_setting()</code> (the 2nd parameter). The <em>key</em> sets the key of the key=&gt;value pair in the resulting associative array that is passed to your <code>sanitize_callback</code> handler.  Even though <code>register_setting()</code>‘s optional $args parameter can state that your option type is an array, there is no automatic combining or separating of individual key=&gt;value pairs you might be storing within the array. That needs to be done by you in your <code>sanitize_callback</code> handler, after you <code>get_option()</code>, and in the <code>add_settings_field()</code> callbacks.</div>
<div><a class="url" href="https://profiles.wordpress.org/davidhbrown/" rel="external nofollow">David Brown</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_settings_field/#comment-6553"><time datetime="2023-07-10T15:16:30+00:00">2 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
