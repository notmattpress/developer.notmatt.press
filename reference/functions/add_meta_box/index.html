
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/functions/">Functions</a></span><span class="is-current-page">add_meta_box()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>add_meta_box()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">add_meta_box( <span class="arg-type">string</span> <span class="arg-name">$id</span>,  <span class="arg-type">string</span> <span class="arg-name">$title</span>,  <span class="arg-type">callable</span> <span class="arg-name">$callback</span>,  <span class="arg-type">string|array|WP_Screen</span> <span class="arg-name">$screen</span> = <span class="arg-default">null</span>,  <span class="arg-type">string</span> <span class="arg-name">$context</span> = <span class="arg-default">'advanced'</span>,  <span class="arg-type">string</span> <span class="arg-name">$priority</span> = <span class="arg-default">'default'</span>,  <span class="arg-type">array</span> <span class="arg-name">$callback_args</span> = <span class="arg-default">null</span> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Adds a meta box to one or more screens.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$id</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Meta box ID (used in the <code>'id'</code> attribute for the meta box).</span></div></dd><dt><code>$title</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Title of the meta box.</span></div></dd><dt><code>$callback</code><span class="type"><span class="callable">callable</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Function that fills the box with the desired content.<br/>
The function should echo its output.</span></div></dd><dt><code>$screen</code><span class="type"><span class="string">string</span>|<span class="array">array</span>|<span class="WP_Screen"><a href="https://developer.notmatt.press/reference/classes/wp_screen/" rel="class">WP_Screen</a></span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">The screen or screens on which to show the box                                              (such as a post type, <code>'link'</code>, or <code>'comment'</code>). Accepts a single                                              screen ID, <a href="https://developer.notmatt.press/reference/classes/wp_screen/" rel="class">WP_Screen</a> object, or array of screen IDs. Default                                              is the current screen.  If you have used <a href="https://developer.notmatt.press/reference/functions/add_menu_page/" rel="function">add_menu_page()</a>  or                                              <a href="https://developer.notmatt.press/reference/functions/add_submenu_page/" rel="function">add_submenu_page()</a>  to create a new screen (and hence screen_id),                                              make sure your menu slug conforms to the limits of <a href="https://developer.notmatt.press/reference/functions/sanitize_key/" rel="function">sanitize_key()</a>                                               otherwise the <code>'screen'</code> menu may not correctly render on your page.</span></div><p class="default">Default:<code>null</code></p></dd><dt><code>$context</code><span class="type"><span class="string">string</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">The context within the screen where the box                                              should display. Available contexts vary from screen to                                              screen. Post edit screen contexts include <code>'normal'</code>, <code>'side'</code>,                                              and <code>'advanced'</code>. Comments screen contexts include <code>'normal'</code>                                              and <code>'side'</code>. Menus meta boxes (accordion sections) all use                                              the <code>'side'</code> context. Global default is <code>'advanced'</code>.</span></div><p class="default">Default:<code>'advanced'</code></p></dd><dt><code>$priority</code><span class="type"><span class="string">string</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">The priority within the context where the box should show.<br/>
Accepts <code>'high'</code>, <code>'core'</code>, <code>'default'</code>, or <code>'low'</code>. Default <code>'default'</code>.</span></div><p class="default">Default:<code>'default'</code></p></dd><dt><code>$callback_args</code><span class="type"><span class="array">array</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Data that should be set as the $args property                                              of the box array (which is the second parameter passed                                              to your callback). </span></div><p class="default">Default:<code>null</code></p></dd></dl></section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1078"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function add_meta_box( $id, $title, $callback, $screen = null, $context = 'advanced', $priority = 'default', $callback_args = null ) {
	global $wp_meta_boxes;

	if ( empty( $screen ) ) {
		$screen = get_current_screen();
	} elseif ( is_string( $screen ) ) {
		$screen = convert_to_screen( $screen );
	} elseif ( is_array( $screen ) ) {
		foreach ( $screen as $single_screen ) {
			add_meta_box( $id, $title, $callback, $single_screen, $context, $priority, $callback_args );
		}
	}

	if ( ! isset( $screen-&gt;id ) ) {
		return;
	}

	$page = $screen-&gt;id;

	if ( ! isset( $wp_meta_boxes ) ) {
		$wp_meta_boxes = array();
	}
	if ( ! isset( $wp_meta_boxes[ $page ] ) ) {
		$wp_meta_boxes[ $page ] = array();
	}
	if ( ! isset( $wp_meta_boxes[ $page ][ $context ] ) ) {
		$wp_meta_boxes[ $page ][ $context ] = array();
	}

	foreach ( array_keys( $wp_meta_boxes[ $page ] ) as $a_context ) {
		foreach ( array( 'high', 'core', 'default', 'low' ) as $a_priority ) {
			if ( ! isset( $wp_meta_boxes[ $page ][ $a_context ][ $a_priority ][ $id ] ) ) {
				continue;
			}

			// If a core box was previously removed, don't add.
			if ( ( 'core' === $priority || 'sorted' === $priority )
				&amp;&amp; false === $wp_meta_boxes[ $page ][ $a_context ][ $a_priority ][ $id ]
			) {
				return;
			}

			// If a core box was previously added by a plugin, don't add.
			if ( 'core' === $priority ) {
				/*
				 * If the box was added with default priority, give it core priority
				 * to maintain sort order.
				 */
				if ( 'default' === $a_priority ) {
					$wp_meta_boxes[ $page ][ $a_context ]['core'][ $id ] = $wp_meta_boxes[ $page ][ $a_context ]['default'][ $id ];
					unset( $wp_meta_boxes[ $page ][ $a_context ]['default'][ $id ] );
				}
				return;
			}

			// If no priority given and ID already present, use existing priority.
			if ( empty( $priority ) ) {
				$priority = $a_priority;
				/*
				 * Else, if we're adding to the sorted priority, we don't know the title
				 * or callback. Grab them from the previously added context/priority.
				 */
			} elseif ( 'sorted' === $priority ) {
				$title         = $wp_meta_boxes[ $page ][ $a_context ][ $a_priority ][ $id ]['title'];
				$callback      = $wp_meta_boxes[ $page ][ $a_context ][ $a_priority ][ $id ]['callback'];
				$callback_args = $wp_meta_boxes[ $page ][ $a_context ][ $a_priority ][ $id ]['args'];
			}

			// An ID can be in only one priority and one context.
			if ( $priority !== $a_priority || $context !== $a_context ) {
				unset( $wp_meta_boxes[ $page ][ $a_context ][ $a_priority ][ $id ] );
			}
		}
	}

	if ( empty( $priority ) ) {
		$priority = 'low';
	}

	if ( ! isset( $wp_meta_boxes[ $page ][ $context ][ $priority ] ) ) {
		$wp_meta_boxes[ $page ][ $context ][ $priority ] = array();
	}

	$wp_meta_boxes[ $page ][ $context ][ $priority ][ $id ] = array(
		'id'       =&gt; $id,
		'title'    =&gt; $title,
		'callback' =&gt; $callback,
		'args'     =&gt; $callback_args,
	);
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-admin/includes/template.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-admin/includes/template.php#L1078">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-admin/includes/template.php#L1078-L1167">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_current_screen/">get_current_screen()</a><code>wp-admin/includes/screen.php</code></td><td><p>Get the current screen object</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/convert_to_screen/">convert_to_screen()</a><code>wp-admin/includes/template.php</code></td><td><p>Converts a screen string to a screen object.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/add_meta_box/">add_meta_box()</a><code>wp-admin/includes/template.php</code></td><td><p>Adds a meta box to one or more screens.</p>
</td></tr></tbody></table></figure></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/register_and_do_post_meta_boxes/">register_and_do_post_meta_boxes()</a><code>wp-admin/includes/meta-boxes.php</code></td><td><p>Registers the default post meta boxes, and runs the <code>do_meta_boxes</code> actions.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_add_dashboard_widget/">wp_add_dashboard_widget()</a><code>wp-admin/includes/dashboard.php</code></td><td><p>Adds a new dashboard widget.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/add_meta_box/">add_meta_box()</a><code>wp-admin/includes/template.php</code></td><td><p>Adds a meta box to one or more screens.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/do_meta_boxes/">do_meta_boxes()</a><code>wp-admin/includes/template.php</code></td><td><p>Meta-Box template function.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_nav_menu_setup/">wp_nav_menu_setup()</a><code>wp-admin/includes/nav-menu.php</code></td><td><p>Register nav menu meta boxes and advanced menu items.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_nav_menu_post_type_meta_boxes/">wp_nav_menu_post_type_meta_boxes()</a><code>wp-admin/includes/nav-menu.php</code></td><td><p>Creates meta boxes for any post type menu item.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_nav_menu_taxonomy_meta_boxes/">wp_nav_menu_taxonomy_meta_boxes()</a><code>wp-admin/includes/nav-menu.php</code></td><td><p>Creates meta boxes for any taxonomy menu item.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 2 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/4.4.0/">4.4.0</a></td><td><span class="since-description">The <code>$screen</code> parameter now accepts an array of screen IDs.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.5.0/">2.5.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-codex odd alt thread-even depth-1" data-comment-id="343" id="comment-343">
<article class="comment-body" id="div-comment-343">
<a class="screen-reader-text" href="#comment-content-343">Skip to note 21 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-343">
<p><strong>Class</strong><br>
This is an example of how to add a meta box from inside a class</br></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Calls the class on the post edit screen.
 */
function call_someClass() {
	new someClass();
}

if ( is_admin() ) {
	add_action( 'load-post.php',     'call_someClass' );
	add_action( 'load-post-new.php', 'call_someClass' );
}

/**
 * The Class.
 */
class someClass {

	/**
	 * Hook into the appropriate actions when the class is constructed.
	 */
	public function __construct() {
		add_action( 'add_meta_boxes', array( $this, 'add_meta_box' ) );
		add_action( 'save_post',      array( $this, 'save'         ) );
	}

	/**
	 * Adds the meta box container.
	 */
	public function add_meta_box( $post_type ) {
		// Limit meta box to certain post types.
		$post_types = array( 'post', 'page' );

		if ( in_array( $post_type, $post_types ) ) {
			add_meta_box(
				'some_meta_box_name',
				__( 'Some Meta Box Headline', 'textdomain' ),
				array( $this, 'render_meta_box_content' ),
				$post_type,
				'advanced',
				'high'
			);
		}
	}

	/**
	 * Save the meta when the post is saved.
	 *
	 * @param int $post_id The ID of the post being saved.
	 */
	public function save( $post_id ) {

		/*
		 * We need to verify this came from the our screen and with proper authorization,
		 * because save_post can be triggered at other times.
		 */

		// Check if our nonce is set.
		if ( ! isset( $_POST['myplugin_inner_custom_box_nonce'] ) ) {
			return $post_id;
		}

		$nonce = $_POST['myplugin_inner_custom_box_nonce'];

		// Verify that the nonce is valid.
		if ( ! wp_verify_nonce( $nonce, 'myplugin_inner_custom_box' ) ) {
			return $post_id;
		}

		/*
		 * If this is an autosave, our form has not been submitted,
		 * so we don't want to do anything.
		 */
		if ( defined( 'DOING_AUTOSAVE' ) &amp;&amp; DOING_AUTOSAVE ) {
			return $post_id;
		}

		// Check the user's permissions.
		if ( 'page' == $_POST['post_type'] ) {
			if ( ! current_user_can( 'edit_page', $post_id ) ) {
				return $post_id;
			}
		} else {
			if ( ! current_user_can( 'edit_post', $post_id ) ) {
				return $post_id;
			}
		}

		/* OK, it's safe for us to save the data now. */

		// Sanitize the user input.
		$mydata = sanitize_text_field( $_POST['myplugin_new_field'] );

		// Update the meta field.
		update_post_meta( $post_id, '_my_meta_value_key', $mydata );
	}


	/**
	 * Render Meta Box content.
	 *
	 * @param WP_Post $post The post object.
	 */
	public function render_meta_box_content( $post ) {

		// Add an nonce field so we can check for it later.
		wp_nonce_field( 'myplugin_inner_custom_box', 'myplugin_inner_custom_box_nonce' );

		// Use get_post_meta to retrieve an existing value from the database.
		$value = get_post_meta( $post-&gt;ID, '_my_meta_value_key', true );

		// Display the form, using the current value.
		?&gt;
		&lt;label for="myplugin_new_field"&gt;
			&lt;?php _e( 'Description for this field', 'textdomain' ); ?&gt;
		&lt;/label&gt;
		&lt;input type="text" id="myplugin_new_field" name="myplugin_new_field" value="&lt;?php echo esc_attr( $value ); ?&gt;" size="25" /&gt;
		&lt;?php
	}
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-343">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-drewapicture even thread-odd thread-alt depth-1" data-comment-id="60" id="comment-60">
<article class="comment-body" id="div-comment-60">
<a class="screen-reader-text" href="#comment-content-60">Skip to note 22 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-60">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Register meta box(es).
 */
function wpdocs_register_meta_boxes() {
	add_meta_box( 'meta-box-id', __( 'My Meta Box', 'textdomain' ), 'wpdocs_my_display_callback', 'post' );
}
add_action( 'add_meta_boxes', 'wpdocs_register_meta_boxes' );

/**
 * Meta box display callback.
 *
 * @param WP_Post $post Current post object.
 */
function wpdocs_my_display_callback( $post ) {
	// Display code/markup goes here. Don't forget to include nonces!
}

/**
 * Save meta box content.
 *
 * @param int $post_id Post ID
 */
function wpdocs_save_meta_box( $post_id ) {
	// Save logic goes here. Don't forget to include nonce checks!
}
add_action( 'save_post', 'wpdocs_save_meta_box' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-60">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-wpdevco odd alt thread-even depth-1" data-comment-id="1284" id="comment-1284">
<article class="comment-body" id="div-comment-1284">
<a class="screen-reader-text" href="#comment-content-1284">Skip to note 23 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1284">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Register a meta box using a class.
 */
class WPDocs_Custom_Meta_Box {

	/**
	 * Constructor.
	 */
	public function __construct() {
		if ( is_admin() ) {
			add_action( 'load-post.php',     array( $this, 'init_metabox' ) );
			add_action( 'load-post-new.php', array( $this, 'init_metabox' ) );
		}

	}

	/**
	 * Meta box initialization.
	 */
	public function init_metabox() {
		add_action( 'add_meta_boxes', array( $this, 'add_metabox'  )        );
		add_action( 'save_post',      array( $this, 'save_metabox' ), 10, 2 );
	}

	/**
	 * Adds the meta box.
	 */
	public function add_metabox() {
		add_meta_box(
			'my-meta-box',
			__( 'My Meta Box', 'textdomain' ),
			array( $this, 'render_metabox' ),
			'post',
			'advanced',
			'default'
		);

	}

	/**
	 * Renders the meta box.
	 */
	public function render_metabox( $post ) {
		// Add nonce for security and authentication.
		wp_nonce_field( 'custom_nonce_action', 'custom_nonce' );
	}

	/**
	 * Handles saving the meta box.
	 *
	 * @param int     $post_id Post ID.
	 * @param WP_Post $post    Post object.
	 * @return null
	 */
	public function save_metabox( $post_id, $post ) {
		// Add nonce for security and authentication.
		$nonce_name   = isset( $_POST['custom_nonce'] ) ? $_POST['custom_nonce'] : '';
		$nonce_action = 'custom_nonce_action';

		// Check if nonce is valid.
		if ( ! wp_verify_nonce( $nonce_name, $nonce_action ) ) {
			return;
		}

		// Check if user has permissions to save data.
		if ( ! current_user_can( 'edit_post', $post_id ) ) {
			return;
		}

		// Check if not an autosave.
		if ( wp_is_post_autosave( $post_id ) ) {
			return;
		}

		// Check if not a revision.
		if ( wp_is_post_revision( $post_id ) ) {
			return;
		}
	}
}

new WPDocs_Custom_Meta_Box();</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1284">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-odd thread-alt depth-1" data-comment-id="342" id="comment-342">
<article class="comment-body" id="div-comment-342">
<a class="screen-reader-text" href="#comment-content-342">Skip to note 24 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-342">
<p><strong>Callback args</strong></p>
<p>The <code>$callback_args</code> array will be passed to the callback function as the second argument. The first argument is the post’s <code>$post</code> object.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * This function adds a meta box with a callback function of my_metabox_callback()
 */
function add_wpdocs_meta_box() {
	$var1 = 'this';
	$var2 = 'that';
	add_meta_box(
		'metabox_id',
		__( 'Metabox Title', 'textdomain' ),
		'wpdocs_metabox_callback',
		'page',
		'normal',
		'low',
		array( 'foo' =&gt; $var1, 'bar' =&gt; $var2 )
	);
}

/**
 * Get post meta in a callback
 *
 * @param WP_Post $post    The current post.
 * @param array   $metabox With metabox id, title, callback, and args elements.
 */

function wpdocs_metabox_callback( $post, $metabox ) {
	// Output last time the post was modified.
	echo 'Last Modified: ' . $post-&gt;post_modified;

	// Output 'this'.
	echo $metabox['args']['foo'];

	// Output 'that'.
	echo $metabox['args']['bar'];

	// Output value of custom field.
	echo get_post_meta( $post-&gt;ID, 'wpdocs_custom_field', true );
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-342">
<ul class="children">
<li class="comment byuser comment-author-starbuck odd alt depth-2" data-comment-id="5410" id="comment-5410">
<article class="comment-body" id="div-comment-5410">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5410">
<div>The second parameter of the callback is an array, but I don’t think it’s correct in this example to say it’s a $metabox. That gives the impression that it’s the same value passed in to <code>add_meta_box()</code>. The argument only contains a subset of the data passed in. Further, the definition on this page currently says: “(array) (Optional) Data that should be set as the $args property of the box array (which is the second parameter passed to your callback).” Yes, that says “the box array”, and that $args is a property of that. But it’s not clear that the second parameter is this “mostly complete” array of metabox data. Without careful reading I think one could confuse this “property of an array” relationship with a “parameter of a method” relationship, leading someone to try a callback like <code>my_callback($post,$args)</code> rather than <code>my_callback($post,$box_data)</code>, and then referencing <code>$box_data['args']['foo']</code>. So this example by @Codex is very helpful but I think more info in the descriptions would provide some clarity and detail that doesn’t need to be realized with an example down in this page.</div>
<div><a class="url" href="https://profiles.notmatt.press/starbuck/" rel="external nofollow">Tony G</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_meta_box/#comment-5410"><time datetime="2021-10-16T02:43:37+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-obiplabon even thread-even depth-1" data-comment-id="1772" id="comment-1772">
<article class="comment-body" id="div-comment-1772">
<a class="screen-reader-text" href="#comment-content-1772">Skip to note 25 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1772">
<p>This is the way to register menu screen metabox :)</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function op_register_menu_meta_box() {
    add_meta_box(
        'op-menu-meta-box-id',
        esc_html__( 'Op Menu MetaBox Title', 'text-domain' ),
        'op_render_menu_meta_box',
        'nav-menus',
        'side',
        'core'
        );
}
add_action( 'load-nav-menus.php', 'op_register_menu_meta_box' );

function op_render_menu_meta_box() {
    // Metabox content
    echo '&lt;strong&gt;Hi, I am MetaBox.&lt;/strong&gt;';
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1772">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-yitwail odd alt thread-odd thread-alt depth-1" data-comment-id="3290" id="comment-3290">
<article class="comment-body" id="div-comment-3290">
<a class="screen-reader-text" href="#comment-content-3290">Skip to note 26 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3290">
<p>Seems to me this page should reference the ‘__block_editor_compatible_meta_box’ and ‘__back_compat_meta_box’ options for $callback_args as described in this article: <a href="https://make.notmatt.press/core/2018/11/07/meta-box-compatibility-flags/" rel="nofollow ugc">https://make.notmatt.press/core/2018/11/07/meta-box-compatibility-flags/</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3290">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-dnaber-de even thread-even depth-1" data-comment-id="1744" id="comment-1744">
<article class="comment-body" id="div-comment-1744">
<a class="screen-reader-text" href="#comment-content-1744">Skip to note 27 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1744">
<p>An often forgotten, but also very important, fact is that any <code>save_post</code> handler should check for a multisite switched context. Here’s an example of such guard:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
namespace DevWpNote\MetaBox;

add_action( 'save_post', __NAMESPACE_ . '\save_fields', 10, 3 );
function save_fields( $post_id, WP_Post $post, $update ) {
   // check nonce ...
   // check autosave ... 
   // check user capabilities ...

   // check if there was a multisite switch before
   if ( is_multisite() &amp;&amp; ms_is_switched() ) {
      return $post_id;
   }

   // handle your meta box input ...
}</code></pre>
<p>That ensures compatibility with other plugins that uses <code>switch_to_blog()</code> while they are working on the <code>save_post</code> hook. If they are calling <code>wp_insert_post()</code> again on other sites, your code would overwrite the wrong content without this check.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1744">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-rubel_miah odd alt thread-odd thread-alt depth-1" data-comment-id="1861" id="comment-1861">
<article class="comment-body" id="div-comment-1861">
<a class="screen-reader-text" href="#comment-content-1861">Skip to note 28 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1861">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">//Register Meta Box
function rm_register_meta_box() {
	add_meta_box( 'rm-meta-box-id', esc_html__( 'RM MetaBox Title', 'text-domain' ), 'rm_meta_box_callback', 'post', 'advanced', 'high' );
}
add_action( 'add_meta_boxes', 'rm_register_meta_box');

//Add field
function rm_meta_box_callback( $meta_id ) {

	$outline = '&lt;label for="title_field" style="width:150px; display:inline-block;"&gt;'. esc_html__('Title Field', 'text-domain') .'&lt;/label&gt;';
	$title_field = get_post_meta( $meta_id-&gt;ID, 'title_field', true );
	$outline .= '&lt;input type="text" name="title_field" id="title_field" class="title_field" value="'. esc_attr($title_field) .'" style="width:300px;"/&gt;';

	echo $outline;
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1861">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-mehedi_csit even thread-even depth-1" data-comment-id="3677" id="comment-3677">
<article class="comment-body" id="div-comment-3677">
<a class="screen-reader-text" href="#comment-content-3677">Skip to note 29 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3677">
<p>Example:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">//Register Meta box
add_action( 'add_meta_boxes', function() {
	add_meta_box( 'wpdocs-id', 'Social link', 'wpdocs_field_cb', 'post', 'side' );
} );

//Meta callback function
function wpdocs_field_cb( $post ) {
	$wpdocs_meta_val = get_post_meta( $post-&gt;ID, 'wpdocs-meta-name', true );
	?&gt;
	&lt;input type="url" name="wpdocs-meta-name" value="&lt;?php echo esc_attr( $wpdocs_meta_val ) ?&gt;"&gt;
	&lt;?php
}

//save meta value with save post hook
add_action( 'save_post', function( $post_id ) {
	if ( isset( $_POST['wpdocs-meta-name'] ) ) {
		update_post_meta( $post_id, 'wpdocs-meta-name', $_POST['wpdocs-meta-name'] );
	}
} );

// show meta value after post content
add_filter( 'the_content', function( $content ) {
	$meta_val = get_post_meta( get_the_ID(), 'wpdocs-meta-name', true );
	return $content . $meta_val;
} );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3677">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-kubitomakita odd alt thread-odd thread-alt depth-1" data-comment-id="1907" id="comment-1907">
<article class="comment-body" id="div-comment-1907">
<a class="screen-reader-text" href="#comment-content-1907">Skip to note 30 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1907">
<p>This is how the metabox data should be processed in the <code>save_post</code> action.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function save_metabox_callback( $post_id ) {

	if ( ! isset( $_POST['nonce'] ) ) {
		return;
	}

	if ( ! wp_verify_nonce( $_POST['nonce'], 'nonce_value' ) ) {
		return;
	}

	if ( defined( 'DOING_AUTOSAVE' ) &amp;&amp; DOING_AUTOSAVE ) {
		return;
	}

	if ( ! current_user_can( 'edit_post', $post_id ) ) {
		return;
	}

	if ( isset( $_POST['post_type'] ) &amp;&amp; 'page' === $_POST['post_type'] ) {

		// do stuff

	}

	// Check if $_POST field(s) are available

	// Sanitize

	// Save
	
}
add_action( 'save_post', 'save_metabox_callback' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1907">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-tomas-eklund even thread-even depth-1" data-comment-id="3089" id="comment-3089">
<article class="comment-body" id="div-comment-3089">
<a class="screen-reader-text" href="#comment-content-3089">Skip to note 31 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3089">
<p>Not only is the second parameter <code>$title</code> required. If <code>$title</code> is an empty string or the string <code>"0"</code>, the meta box will not be rendered.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3089">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-bucur odd alt thread-odd thread-alt depth-1" data-comment-id="5302" id="comment-5302">
<article class="comment-body" id="div-comment-5302">
<a class="screen-reader-text" href="#comment-content-5302">Skip to note 32 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5302">
<p>This is an example of how to add a meta box from inside a class with textarea. Replace tabs post type with your custom post type name.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * The Class.
 */
class someClass {
 
    /**
     * Hook into the appropriate actions when the class is constructed.
     */
    public function __construct() {
        add_action( 'add_meta_boxes', array( $this, 'add_meta_box' ) );
        add_action( 'save_post',      array( $this, 'save'         ) );
    }
 
    /**
     * Adds the meta box container.
     */
    public function add_meta_box( $post_type ) {
        // Limit meta box to certain post types.
        $post_types = array('tabs' );
 
        if ( in_array( $post_type, $post_types ) ) {
            add_meta_box(
                'some_meta_box_name',
                __( 'Some Meta Box Headline', 'textdomain' ),
                array( $this, 'render_meta_box_content' ),
                $post_type,
                'advanced',
                'high'
            );
        }
    }
 
    /**
     * Save the meta when the post is saved.
     *
     * @param int $post_id The ID of the post being saved.
     */
    public function save( $post_id ) {
 
        /*
         * We need to verify this came from the our screen and with proper authorization,
         * because save_post can be triggered at other times.
         */
 
        // Check if our nonce is set.
        if ( ! isset( $_POST['myplugin_inner_custom_box_nonce'] ) ) {
            return $post_id;
        }
 
        $nonce = $_POST['myplugin_inner_custom_box_nonce'];
 
        // Verify that the nonce is valid.
        if ( ! wp_verify_nonce( $nonce, 'myplugin_inner_custom_box' ) ) {
            return $post_id;
        }
 
        /*
         * If this is an autosave, our form has not been submitted,
         * so we don't want to do anything.
         */
        if ( defined( 'DOING_AUTOSAVE' ) &amp;&amp; DOING_AUTOSAVE ) {
            return $post_id;
        }
 
        // Check the user's permissions.
        if ( 'page' == $_POST['post_type'] ) {
            if ( ! current_user_can( 'edit_page', $post_id ) ) {
                return $post_id;
            }
        } else {
            if ( ! current_user_can( 'edit_post', $post_id ) ) {
                return $post_id;
            }
        }
 
        /* OK, it's safe for us to save the data now. */
 
        // Sanitize the user input.
        $mydata = sanitize_text_field( $_POST['myplugin_new_field'] );
 
        // Update the meta field.
        update_post_meta( $post_id, '_my_meta_value_key', $mydata );
    }
 
 
    /**
     * Render Meta Box content.
     *
     * @param WP_Post $post The post object.
     */
    public function render_meta_box_content( $post ) {
 
        // Add an nonce field so we can check for it later.
        wp_nonce_field( 'myplugin_inner_custom_box', 'myplugin_inner_custom_box_nonce' );
 
        // Use get_post_meta to retrieve an existing value from the database.
        $value = get_post_meta( $post-&gt;ID, '_my_meta_value_key', true );
 
        // Display the form, using the current value.
        ?&gt;
        &lt;label for="myplugin_new_field"&gt;
            &lt;?php _e( 'Description for this field', 'textdomain' ); ?&gt;
        &lt;/label&gt;

        
        &lt;textarea style="width:100%;min-height:200px;" type="textarea" class="form-control" name="myplugin_new_field" &gt;&lt;?php echo esc_attr( $value ); ?&gt;&lt;/textarea&gt; 
        
        &lt;?php
    }
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5302">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-joydevs even thread-even depth-1" data-comment-id="5469" id="comment-5469">
<article class="comment-body" id="div-comment-5469">
<a class="screen-reader-text" href="#comment-content-5469">Skip to note 33 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5469">
<p>How to add metabox in custom post type:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">class Register_Post_Type
{

    /**
     * Register_Post_Type constructor.
     */
    public function __construct() {
        add_action( "init", array( $this, "register_post_type" ) );
        add_action( "add_meta_boxes", array( $this, "add_mata_box" ) );
        add_action( "save_post", array( $this, "save_mata_date" ) );
    }

    /**
     * Register post type
     */
    public function register_post_type() {
        register_post_type( "newsletter", array(
            "labels"      =&gt; array(
                "name"               =&gt; esc_html( "Newsletter", "newsletter" ),
                "singular_name"      =&gt; esc_html( "Newsletter", "newsletter" ),
                'menu_name'          =&gt; esc_html( "Newsletter", "newsletter" ),
                'name_admin_bar'     =&gt; esc_html( "Newsletter", "newsletter" ),
                'add_new'            =&gt; esc_html( "Add Newsletter", "newsletter" ),
                'add_new_item'       =&gt; esc_html( "Add Newsletter", "newsletter" ),
                'new_item'           =&gt; esc_html( "New Newsletter", "newsletter" ),
                'edit_item'          =&gt; esc_html( "Edit Newsletter", "newsletter" ),
                'view_item'          =&gt; esc_html( "View Newsletter", "newsletter" ),
                'all_items'          =&gt; esc_html( "All Newsletter", "newsletter" ),
                'search_items'       =&gt; esc_html( "Search Newsletter", "newsletter" ),
                'not_found'          =&gt; esc_html( "No news found.", "newsletter" ),
                'featured_image'     =&gt; esc_html( "Newsletter Cover Image", "newsletter" ),
                'set_featured_image' =&gt; esc_html( "Set newsletter image", "newsletter" ),
            ),
            "public"      =&gt; true,
            "has_archive" =&gt; false,
            "rewrite"     =&gt; array(
                "slug" =&gt; "newsletter"
            ),
            'menu_icon'   =&gt; 'dashicons-book',
            //'supports'    =&gt; array( 'title', 'editor', 'author', 'thumbnail', 'excerpt', 'comments' ),
            'supports'    =&gt; array( 'title','editor','thumbnail' ),
        ) );
    }

    /**
     * Add post mata box
     */
    public function add_mata_box() {
        add_meta_box( "newsletter_main_post", esc_html( "Add article", "newsletter" ), array( $this, "add_article_html" ), "newsletter", 'advanced' );
    }

    /**
     * Add article html
     */
    public function add_article_html() {
        ?&gt;
        
        &lt;?php
    }

    /**
     * Save mata data
     */
    public function save_mata_date( $post_id ) {
        update_post_meta( $post_id, "add_article_main", array( "adf", "bfdf" ) );
    }
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5469">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-wprakibhossain odd alt thread-odd thread-alt depth-1" data-comment-id="5695" id="comment-5695">
<article class="comment-body" id="div-comment-5695">
<a class="screen-reader-text" href="#comment-content-5695">Skip to note 34 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5695">
<p>Use same Meta Box for multiple post_type</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
* Register Metabox
*/
function prefix_add_meta_boxes(){
	add_meta_box( 'unique_mb_id', __( 'Metabox Title','text-domain' ),'prefix_mb_callback', ['page', 'post'] );
}
add_action('add_meta_boxes', 'prefix_add_meta_boxes' );
	
/**
* Meta field callback function
*/
function prefix_mb_callback(){ ?&gt;
	&lt;label for="mb_id"&gt;&lt;?php echo esc_html('Field Label','text-domain'); ?&gt;&lt;/label&gt;
	&lt;input type="text" class="regular-text" name="unique_mb_id" id="mb_id"&gt;
&lt;?php }</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5695">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-vincentdubroeucq even thread-even depth-1" data-comment-id="3496" id="comment-3496">
<article class="comment-body" id="div-comment-3496">
<a class="screen-reader-text" href="#comment-content-3496">Skip to note 35 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3496">
<p><strong>Slight gotcha for comments metabox</strong></p>
<p>If you need to add a metabox to the comment edit screen, <strong>you have to pass in the value ‘<code>normal</code>‘ for the <code>$context</code> parameter.</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">// This will NOT work
add_meta_box( 
	'my_comment_metabox_1',      // ID
	__('My comment metabox 1' ), // Title
	'prefix_comment_metabox',    // Callback
	'comment' 					 // Screen
);
// This WILL work. Same call, but with 'normal' for context instead of default 'advanced'
add_meta_box( 
	'my_comment_metabox_2', 	  // ID
	__('My comment metabox 2' ),  // Title 
	'prefix_comment_metabox', 	  // Callback
	'comment', 					  // Screen
	'normal' 					  // Context
);</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3496">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-infomasud odd alt thread-odd thread-alt depth-1" data-comment-id="6008" id="comment-6008">
<article class="comment-body" id="div-comment-6008">
<a class="screen-reader-text" href="#comment-content-6008">Skip to note 36 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6008">
<p>In Plugin context:<br>
Add multiple meta boxes for custom post type.</br></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">//In admin_init: 
add_action('add_meta_boxes', [static::class, 'add_my_action_boxes'], 10, 2);

//related functions structure 
public static function add_my_action_boxes($post_type, $post){
			add_meta_box(
					'action_box_1',
					'Action box title',
					[static::class,'call_back_function_one_to_show_content'],
					self::POST_TYPE,
					'normal',
					'high',
                    $args1,
			);

			add_meta_box(
				'action_box_2',
				'Comments box',
				[static::class,'call_back_function_two_to_show_content'],
				self::POST_TYPE,
				'normal',
				'default',
                 $args2,
			);
}

public static function call_back_function_one_to_show_content($args1){
 //echo content here 
}

public static function call_back_function_two_to_show_content($args2){
//echo content here
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6008">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-slamorte even thread-even depth-1 bad-note" data-comment-id="2318" id="comment-2318">
<article class="comment-body" id="div-comment-2318">
<a class="screen-reader-text" href="#comment-content-2318">Skip to note 37 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2318">
<p>From WordPress 4.4 the $screen arg can be an array, which greatly simplifies mass additions or alterations of meta boxes. The following code changes the title of the “Author” meta box to “Editor” on pages, posts, attachments, and all custom post types no matter how many  are added or when they are added to your site.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action( 'do_meta_boxes', 'my_customize_meta_boxes'); //do_meta_boxes also allows plugin metaboxes to be modified
function my_customize_meta_boxes(){
    $post_types = get_post_types();
    remove_meta_box( 'authordiv', $post_types, 'normal' );

    add_meta_box( 'authordiv', __( 'Editor', 'textdomain' ), 'post_author_meta_box', $post_types, 'side', 'default' );
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2318">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-bappidgreat odd alt thread-odd thread-alt depth-1 bad-note" data-comment-id="1136" id="comment-1136">
<article class="comment-body" id="div-comment-1136">
<a class="screen-reader-text" href="#comment-content-1136">Skip to note 38 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1136">
<p>Sorry didn’t find any edit option. The last function should be declared as static:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">static public function wpdocs_register_meta_boxes_static() {
        add_meta_box( 'meta-box-id', __( 'My Meta Box', 'textdomain' ), 'wpdocs_my_display_callback', 'post' );
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1136">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-bappidgreat even thread-even depth-1 bad-note" data-comment-id="1135" id="comment-1135">
<article class="comment-body" id="div-comment-1135">
<a class="screen-reader-text" href="#comment-content-1135">Skip to note 39 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1135">
<p>This is how it can be called within a class:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">class MyClass{
    
    public function __construct() {
        add_action( 'add_meta_boxes', array( &amp;$this, 'wpdocs_register_meta_boxes' ) );
        // If static
        add_action( 'add_meta_boxes', array( __CLASS__, 'wpdocs_register_meta_boxes_static' ) );
    }
    
    // Singleton
    static function get_instance() {
        static $Inst = null;
        if( $Inst == null ) {
            $Inst = new self();
        }
        
        return $Inst;
    }
    
    public function wpdocs_register_meta_boxes() {
        add_meta_box( 'meta-box-id', __( 'My Meta Box', 'textdomain' ), 'wpdocs_my_display_callback', 'post' );
    }
    
    public function wpdocs_register_meta_boxes_static() {
        add_meta_box( 'meta-box-id', __( 'My Meta Box', 'textdomain' ), 'wpdocs_my_display_callback', 'post' );
    }
    
}

MyClass::get_instance();</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1135">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-designdrumm odd alt thread-odd thread-alt depth-1 bad-note" data-comment-id="1028" id="comment-1028">
<article class="comment-body" id="div-comment-1028">
<a class="screen-reader-text" href="#comment-content-1028">Skip to note 40 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1028">
<p>You have $screen = null in the function call but no check and balances for if it IS null. This was causing an error warning when error logging was turned on. </p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function add_meta_box( $id, $title, $callback, $screen = null, $context = 'advanced', $priority = 'default', $callback_args = null ) {
    global $wp_meta_boxes;
 
    if ( empty( $screen ) ) {
        $screen = get_current_screen();
    } elseif ( is_string( $screen ) ) {
        $screen = convert_to_screen( $screen );
    } elseif ( is_array( $screen ) ) {
        foreach ( $screen as $single_screen ) {
            add_meta_box( $id, $title, $callback, $single_screen, $context, $priority, $callback_args );
        }
    }
 
    if ( ! isset( $screen-&amp;gt;id ) ) {
        return;
    }
 
    $page = $screen-&amp;gt;id;

… </code></pre>
<p>should be replaced with..</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function add_meta_box( $id, $title, $callback, $screen = null, $context = 'advanced', $priority = 'default', $callback_args = null ) {
	global $wp_meta_boxes;

	if ( $screen == null ) {
$screen = WP_Screen::get( );
} elseif ( empty( $screen ) ) {
$screen = get_current_screen();
} elseif ( is_string( $screen ) ) {
$screen = convert_to_screen( $screen );
} elseif ( is_array( $screen ) ) {
foreach ( $screen as $single_screen ) {
add_meta_box( $id, $title, $callback, $single_screen, $context, $priority, $callback_args );
}
}

$page = $screen-&amp;gt;id;

… </code></pre>
<p>not</p>
<pre class="wp-block-code"><code class="language-php" lang="php">if ( ! isset( $screen-&amp;gt;id ) ) {
        return;
    }</code></pre>
<p>IMHO</p>
<p>Best,<br/>
Design Drumm</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1028">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
