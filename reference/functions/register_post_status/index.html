
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">register_post_status()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>register_post_status()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">register_post_status( <span class="arg-type">string</span> <span class="arg-name">$post_status</span>,  <span class="arg-type">array|string</span> <span class="arg-name">$args</span> = <span class="arg-default">array()</span> ): <span class="return-type">object</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Registers a post status. Do not use before init.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>A simple function for creating or modifying a post status based on the parameters given. The function will accept an array (second optional parameter), along with a string for the post status name.</p>
<p>Arguments prefixed with an _underscore shouldn’t be used by plugins and themes.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$post_status</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Name of the post status.</span></div></dd><dt><code>$args</code><span class="type"><span class="array">array</span>|<span class="string">string</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Array or string of post status arguments.<br/>
<ul class="param-hash"><li><code>label</code> <span class="type">bool|string</span><div class="desc">A descriptive name for the post status marked for translation. Defaults to value of $post_status.</div></li>
<li><code>label_count</code> <span class="type">array|false</span><div class="desc">Nooped plural text from <a href="https://developer.notmatt.press/reference/functions/_n_noop/" rel="function">_n_noop()</a>  to provide the singular and plural forms of the label for counts. Default false which means the <code>$label</code> argument will be used for both the singular and plural forms of this label.</div></li>
<li><code>exclude_from_search</code> <span class="type">bool</span><div class="desc">Whether to exclude posts with this post status from search results. Default is value of $internal.</div></li>
<li><code>_builtin</code> <span class="type">bool</span><div class="desc">Whether the status is built-in. Core-use only.<br/>
Default false.</div></li>
<li><code>public</code> <span class="type">bool</span><div class="desc">Whether posts of this status should be shown in the front end of the site. Default false.</div></li>
<li><code>internal</code> <span class="type">bool</span><div class="desc">Whether the status is for internal use only.<br/>
Default false.</div></li>
<li><code>protected</code> <span class="type">bool</span><div class="desc">Whether posts with this status should be protected.<br/>
Default false.</div></li>
<li><code>private</code> <span class="type">bool</span><div class="desc">Whether posts with this status should be private.<br/>
Default false.</div></li>
<li><code>publicly_queryable</code> <span class="type">bool</span><div class="desc">Whether posts with this status should be publicly- queryable. Default is value of $public.</div></li>
<li><code>show_in_admin_all_list</code> <span class="type">bool</span><div class="desc">Whether to include posts in the edit listing for their post type. Default is the opposite value of $internal.</div></li>
<li><code>show_in_admin_status_list</code> <span class="type">bool</span><div class="desc">Show in the list of statuses with post counts at the top of the edit listings, e.g. All (12) | Published (9) | My Custom Status (2) Default is the opposite value of $internal.</div></li>
<li><code>date_floating</code> <span class="type">bool</span><div class="desc">Whether the post has a floating creation date.<br/>
Default to false.</div></li>
</ul>
</span></div><p class="default">Default:<code>array()</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">object</span> </section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1393"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function register_post_status( $post_status, $args = array() ) {
	global $wp_post_statuses;

	if ( ! is_array( $wp_post_statuses ) ) {
		$wp_post_statuses = array();
	}

	// Args prefixed with an underscore are reserved for internal use.
	$defaults = array(
		'label'                     =&gt; false,
		'label_count'               =&gt; false,
		'exclude_from_search'       =&gt; null,
		'_builtin'                  =&gt; false,
		'public'                    =&gt; null,
		'internal'                  =&gt; null,
		'protected'                 =&gt; null,
		'private'                   =&gt; null,
		'publicly_queryable'        =&gt; null,
		'show_in_admin_status_list' =&gt; null,
		'show_in_admin_all_list'    =&gt; null,
		'date_floating'             =&gt; null,
	);
	$args     = wp_parse_args( $args, $defaults );
	$args     = (object) $args;

	$post_status = sanitize_key( $post_status );
	$args-&gt;name  = $post_status;

	// Set various defaults.
	if ( null === $args-&gt;public &amp;&amp; null === $args-&gt;internal &amp;&amp; null === $args-&gt;protected &amp;&amp; null === $args-&gt;private ) {
		$args-&gt;internal = true;
	}

	if ( null === $args-&gt;public ) {
		$args-&gt;public = false;
	}

	if ( null === $args-&gt;private ) {
		$args-&gt;private = false;
	}

	if ( null === $args-&gt;protected ) {
		$args-&gt;protected = false;
	}

	if ( null === $args-&gt;internal ) {
		$args-&gt;internal = false;
	}

	if ( null === $args-&gt;publicly_queryable ) {
		$args-&gt;publicly_queryable = $args-&gt;public;
	}

	if ( null === $args-&gt;exclude_from_search ) {
		$args-&gt;exclude_from_search = $args-&gt;internal;
	}

	if ( null === $args-&gt;show_in_admin_all_list ) {
		$args-&gt;show_in_admin_all_list = ! $args-&gt;internal;
	}

	if ( null === $args-&gt;show_in_admin_status_list ) {
		$args-&gt;show_in_admin_status_list = ! $args-&gt;internal;
	}

	if ( null === $args-&gt;date_floating ) {
		$args-&gt;date_floating = false;
	}

	if ( false === $args-&gt;label ) {
		$args-&gt;label = $post_status;
	}

	if ( false === $args-&gt;label_count ) {
		// phpcs:ignore WordPress.WP.I18n.NonSingularStringLiteralSingular,WordPress.WP.I18n.NonSingularStringLiteralPlural
		$args-&gt;label_count = _n_noop( $args-&gt;label, $args-&gt;label );
	}

	$wp_post_statuses[ $post_status ] = $args;

	return $args;
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/post.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/post.php#L1393">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/post.php#L1393-L1474">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/sanitize_key/">sanitize_key()</a><code>wp-includes/formatting.php</code></td><td><p>Sanitizes a string key.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_parse_args/">wp_parse_args()</a><code>wp-includes/functions.php</code></td><td><p>Merges user defined arguments into defaults array.</p>
</td></tr></tbody></table></figure></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/create_initial_post_types/">create_initial_post_types()</a><code>wp-includes/post.php</code></td><td><p>Creates the initial post types when ‘init’ action is fired.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/3.0.0/">3.0.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-ajfleming odd alt thread-even depth-1" data-comment-id="3927" id="comment-3927">
<article class="comment-body" id="div-comment-3927">
<a class="screen-reader-text" href="#comment-content-3927">Skip to note 5 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3927">
<p><code>20</code> is the maximum character length for the <code>$post_status</code> parameter. </p>
<p><code>wp shell<br>
wp&gt; global $wpdb;<br>
wp&gt; $wpdb-&gt;get_col_length('wp_posts','post_status')<br>
=&gt; phar:///usr/local/bin/wp/vendor/wp-cli/shell-command/src/WP_CLI/Shell/REPL.php:52:<br>
array(2) {<br>
  'type' =&gt;<br>
  string(4) "char"<br/>
  'length' =&gt;<br/>
  int(20)<br/>
}</br></br></br></br></br></br></code></p>
<p>We’re able to register a post status with a <code>$post_status</code> parameter longer than 20 characters, but we’re unable to save/update posts with it. Instead, the <code>wpdb-&gt;process_fields()</code> method compares the converted data to the provided data and returns <code>false</code> because they’re different.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-3927">
<ul class="children">
<li class="comment byuser comment-author-imddev even depth-2" data-comment-id="6929" id="comment-6929">
<article class="comment-body" id="div-comment-6929">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6929">
<div>It is still the case in February 27th of 2024. This should be better communicated to the users and the developers. Causes glitches and unexpected behavior.</div>
<div><a class="url" href="https://profiles.wordpress.org/imddev/" rel="external nofollow">imddev</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/register_post_status/#comment-6929"><time datetime="2024-02-27T17:59:27+00:00">11 months ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="718" id="comment-718">
<article class="comment-body" id="div-comment-718">
<a class="screen-reader-text" href="#comment-content-718">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-718">
<p><strong>Example</strong><br/>
An example of registering a post status called “Unread”:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Add 'Unread' post status.
 */
function wpdocs_custom_post_status(){
	register_post_status( 'unread', array(
		'label'                     =&gt; _x( 'Unread', 'post' ),
		'public'                    =&gt; true,
		'exclude_from_search'       =&gt; false,
		'show_in_admin_all_list'    =&gt; true,
		'show_in_admin_status_list' =&gt; true,
		'label_count'               =&gt; _n_noop( 'Unread &lt;span class="count"&gt;(%s)&lt;/span&gt;', 'Unread &lt;span class="count"&gt;(%s)&lt;/span&gt;' ),
	) );
}
add_action( 'init', 'wpdocs_custom_post_status' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-718">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-brentleavitt even thread-even depth-1" data-comment-id="5517" id="comment-5517">
<article class="comment-body" id="div-comment-5517">
<a class="screen-reader-text" href="#comment-content-5517">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5517">
<p>Something that was not clear in my understanding was the independent nature of Post Statuses in connection with Custom Post Types (CPT). I had always been under the assumption that a specific Post Status had to be linked to a specific post type, but the reality is that post statuses exist separate or independent from any post type or custom post type. </p>
<p>From what I can see, the only place where Post Status is declared is within the code. A list of available post statuses can be generated from the global variable </p>
<pre class="wp-block-code"><code class="language-php" lang="php">global  $wp_post_statuses;</code></pre>
<p>. These different post_status are not stored as list or array in the options table of database. The only place where post_status is used in the database is in the wp_posts table as the actual `post_status` value. </p>
<p>To load a specific set of post_status values in the post editor screen (for example) is beyond the scope of this comment, but you will want to look into filtering the values for the post_status as is relevant to your needs.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5517">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-webgenerationnz odd alt thread-odd thread-alt depth-1" data-comment-id="6931" id="comment-6931">
<article class="comment-body" id="div-comment-6931">
<a class="screen-reader-text" href="#comment-content-6931">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6931">
<p>It seems that using the register_post_status function doesn’t add the new post status as an option in the edit post page, or quick edit either, which is disappointing. The issue, and some workarounds, is discussed in more detail here:<br/>
<a href="https://stackoverflow.com/q/20298346/612253" rel="nofollow ugc">https://stackoverflow.com/q/20298346/612253</a><br/>
Hopefully it will help others avoid wasting as much time on the issue as I did!</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6931">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
