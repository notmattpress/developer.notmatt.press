
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">wp_get_archives()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>wp_get_archives()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">wp_get_archives( <span class="arg-type">string|array</span> <span class="arg-name">$args</span> = <span class="arg-default">''</span> ): <span class="return-type">void|string</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Displays archive links based on type and format.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <h3 class="is-toc-heading has-heading-5-font-size" id="see-also" tabindex="-1"><a href="#see-also">See also</a></h3><ul><li><a href="https://developer.notmatt.press/reference/functions/get_archives_link">get_archives_link()</a></li>
</ul></section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$args</code><span class="type"><span class="string">string</span>|<span class="array">array</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Default archive links arguments. Optional.<br/>
<ul class="param-hash"><li><code>type</code> <span class="type">string</span><div class="desc">Type of archive to retrieve. Accepts <code>'daily'</code>, <code>'weekly'</code>, <code>'monthly'</code>, <code>'yearly'</code>, <code>'postbypost'</code>, or <code>'alpha'</code>. Both <code>'postbypost'</code> and <code>'alpha'</code> display the same archive link list as well as post titles instead of displaying dates. The difference between the two is that <code>'alpha'</code> will order by post title and <code>'postbypost'</code> will order by post date.<br/>
Default <code>'monthly'</code>.</div></li>
<li><code>limit</code> <span class="type">string|int</span><div class="desc">Number of links to limit the query to. Default empty (no limit).</div></li>
<li><code>format</code> <span class="type">string</span><div class="desc">Format each link should take using the $before and $after args.<br/>
Accepts <code>'link'</code> (<code>&lt;link&gt;</code> tag), <code>'option'</code> (<code>&lt;option&gt;</code> tag), <code>'html'</code> (<code>&lt;li&gt;</code> tag), or a custom format, which generates a link anchor with $before preceding and $after succeeding. Default <code>'html'</code>.</div></li>
<li><code>before</code> <span class="type">string</span><div class="desc">Markup to prepend to the beginning of each link. </div></li>
<li><code>after</code> <span class="type">string</span><div class="desc">Markup to append to the end of each link. </div></li>
<li><code>show_post_count</code> <span class="type">bool</span><div class="desc">Whether to display the post count alongside the link. Default false.</div></li>
<li><code>echo</code> <span class="type">bool|int</span><div class="desc">Whether to echo or return the links list. Default <code>1|true</code> to echo.</div></li>
<li><code>order</code> <span class="type">string</span><div class="desc">Whether to use ascending or descending order. Accepts <code>'ASC'</code>, or <code>'DESC'</code>.<br/>
Default <code>'DESC'</code>.</div></li>
<li><code>post_type</code> <span class="type">string</span><div class="desc">Post type. Default <code>'post'</code>.</div></li>
<li><code>year</code> <span class="type">string</span><div class="desc">Year. Default current year.</div></li>
<li><code>monthnum</code> <span class="type">string</span><div class="desc">Month number. Default current month number.</div></li>
<li><code>day</code> <span class="type">string</span><div class="desc">Day. Default current day.</div></li>
<li><code>w</code> <span class="type">string</span><div class="desc">Week. Default current week.</div></li>
</ul>
</span></div><p class="default">Default:<code>''</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">void|string</span> Void if <code>'echo'</code> argument is true, archive links if <code>'echo'</code> is false.</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1996"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function wp_get_archives( $args = '' ) {
	global $wpdb, $wp_locale;

	$defaults = array(
		'type'            =&gt; 'monthly',
		'limit'           =&gt; '',
		'format'          =&gt; 'html',
		'before'          =&gt; '',
		'after'           =&gt; '',
		'show_post_count' =&gt; false,
		'echo'            =&gt; 1,
		'order'           =&gt; 'DESC',
		'post_type'       =&gt; 'post',
		'year'            =&gt; get_query_var( 'year' ),
		'monthnum'        =&gt; get_query_var( 'monthnum' ),
		'day'             =&gt; get_query_var( 'day' ),
		'w'               =&gt; get_query_var( 'w' ),
	);

	$parsed_args = wp_parse_args( $args, $defaults );

	$post_type_object = get_post_type_object( $parsed_args['post_type'] );
	if ( ! is_post_type_viewable( $post_type_object ) ) {
		return;
	}

	$parsed_args['post_type'] = $post_type_object-&gt;name;

	if ( '' === $parsed_args['type'] ) {
		$parsed_args['type'] = 'monthly';
	}

	if ( ! empty( $parsed_args['limit'] ) ) {
		$parsed_args['limit'] = absint( $parsed_args['limit'] );
		$parsed_args['limit'] = ' LIMIT ' . $parsed_args['limit'];
	}

	$order = strtoupper( $parsed_args['order'] );
	if ( 'ASC' !== $order ) {
		$order = 'DESC';
	}

	// This is what will separate dates on weekly archive links.
	$archive_week_separator = '&amp;#8211;';

	$sql_where = $wpdb-&gt;prepare( "WHERE post_type = %s AND post_status = 'publish'", $parsed_args['post_type'] );

	/**
	 * Filters the SQL WHERE clause for retrieving archives.
	 *
	 * @since 2.2.0
	 *
	 * @param string $sql_where   Portion of SQL query containing the WHERE clause.
	 * @param array  $parsed_args An array of default arguments.
	 */
	$where = apply_filters( 'getarchives_where', $sql_where, $parsed_args );

	/**
	 * Filters the SQL JOIN clause for retrieving archives.
	 *
	 * @since 2.2.0
	 *
	 * @param string $sql_join    Portion of SQL query containing JOIN clause.
	 * @param array  $parsed_args An array of default arguments.
	 */
	$join = apply_filters( 'getarchives_join', '', $parsed_args );

	$output = '';

	$last_changed = wp_cache_get_last_changed( 'posts' );

	$limit = $parsed_args['limit'];

	if ( 'monthly' === $parsed_args['type'] ) {
		$query   = "SELECT YEAR(post_date) AS `year`, MONTH(post_date) AS `month`, count(ID) as posts FROM $wpdb-&gt;posts $join $where GROUP BY YEAR(post_date), MONTH(post_date) ORDER BY post_date $order $limit";
		$key     = md5( $query );
		$key     = "wp_get_archives:$key:$last_changed";
		$results = wp_cache_get( $key, 'post-queries' );
		if ( ! $results ) {
			$results = $wpdb-&gt;get_results( $query );
			wp_cache_set( $key, $results, 'post-queries' );
		}
		if ( $results ) {
			$after = $parsed_args['after'];
			foreach ( (array) $results as $result ) {
				$url = get_month_link( $result-&gt;year, $result-&gt;month );
				if ( 'post' !== $parsed_args['post_type'] ) {
					$url = add_query_arg( 'post_type', $parsed_args['post_type'], $url );
				}
				/* translators: 1: Month name, 2: 4-digit year. */
				$text = sprintf( __( '%1$s %2$d' ), $wp_locale-&gt;get_month( $result-&gt;month ), $result-&gt;year );
				if ( $parsed_args['show_post_count'] ) {
					$parsed_args['after'] = '&amp;nbsp;(' . $result-&gt;posts . ')' . $after;
				}
				$selected = is_archive() &amp;&amp; (string) $parsed_args['year'] === $result-&gt;year &amp;&amp; (string) $parsed_args['monthnum'] === $result-&gt;month;
				$output  .= get_archives_link( $url, $text, $parsed_args['format'], $parsed_args['before'], $parsed_args['after'], $selected );
			}
		}
	} elseif ( 'yearly' === $parsed_args['type'] ) {
		$query   = "SELECT YEAR(post_date) AS `year`, count(ID) as posts FROM $wpdb-&gt;posts $join $where GROUP BY YEAR(post_date) ORDER BY post_date $order $limit";
		$key     = md5( $query );
		$key     = "wp_get_archives:$key:$last_changed";
		$results = wp_cache_get( $key, 'post-queries' );
		if ( ! $results ) {
			$results = $wpdb-&gt;get_results( $query );
			wp_cache_set( $key, $results, 'post-queries' );
		}
		if ( $results ) {
			$after = $parsed_args['after'];
			foreach ( (array) $results as $result ) {
				$url = get_year_link( $result-&gt;year );
				if ( 'post' !== $parsed_args['post_type'] ) {
					$url = add_query_arg( 'post_type', $parsed_args['post_type'], $url );
				}
				$text = sprintf( '%d', $result-&gt;year );
				if ( $parsed_args['show_post_count'] ) {
					$parsed_args['after'] = '&amp;nbsp;(' . $result-&gt;posts . ')' . $after;
				}
				$selected = is_archive() &amp;&amp; (string) $parsed_args['year'] === $result-&gt;year;
				$output  .= get_archives_link( $url, $text, $parsed_args['format'], $parsed_args['before'], $parsed_args['after'], $selected );
			}
		}
	} elseif ( 'daily' === $parsed_args['type'] ) {
		$query   = "SELECT YEAR(post_date) AS `year`, MONTH(post_date) AS `month`, DAYOFMONTH(post_date) AS `dayofmonth`, count(ID) as posts FROM $wpdb-&gt;posts $join $where GROUP BY YEAR(post_date), MONTH(post_date), DAYOFMONTH(post_date) ORDER BY post_date $order $limit";
		$key     = md5( $query );
		$key     = "wp_get_archives:$key:$last_changed";
		$results = wp_cache_get( $key, 'post-queries' );
		if ( ! $results ) {
			$results = $wpdb-&gt;get_results( $query );
			wp_cache_set( $key, $results, 'post-queries' );
		}
		if ( $results ) {
			$after = $parsed_args['after'];
			foreach ( (array) $results as $result ) {
				$url = get_day_link( $result-&gt;year, $result-&gt;month, $result-&gt;dayofmonth );
				if ( 'post' !== $parsed_args['post_type'] ) {
					$url = add_query_arg( 'post_type', $parsed_args['post_type'], $url );
				}
				$date = sprintf( '%1$d-%2$02d-%3$02d 00:00:00', $result-&gt;year, $result-&gt;month, $result-&gt;dayofmonth );
				$text = mysql2date( get_option( 'date_format' ), $date );
				if ( $parsed_args['show_post_count'] ) {
					$parsed_args['after'] = '&amp;nbsp;(' . $result-&gt;posts . ')' . $after;
				}
				$selected = is_archive() &amp;&amp; (string) $parsed_args['year'] === $result-&gt;year &amp;&amp; (string) $parsed_args['monthnum'] === $result-&gt;month &amp;&amp; (string) $parsed_args['day'] === $result-&gt;dayofmonth;
				$output  .= get_archives_link( $url, $text, $parsed_args['format'], $parsed_args['before'], $parsed_args['after'], $selected );
			}
		}
	} elseif ( 'weekly' === $parsed_args['type'] ) {
		$week    = _wp_mysql_week( '`post_date`' );
		$query   = "SELECT DISTINCT $week AS `week`, YEAR( `post_date` ) AS `yr`, DATE_FORMAT( `post_date`, '%Y-%m-%d' ) AS `yyyymmdd`, count( `ID` ) AS `posts` FROM `$wpdb-&gt;posts` $join $where GROUP BY $week, YEAR( `post_date` ) ORDER BY `post_date` $order $limit";
		$key     = md5( $query );
		$key     = "wp_get_archives:$key:$last_changed";
		$results = wp_cache_get( $key, 'post-queries' );
		if ( ! $results ) {
			$results = $wpdb-&gt;get_results( $query );
			wp_cache_set( $key, $results, 'post-queries' );
		}
		$arc_w_last = '';
		if ( $results ) {
			$after = $parsed_args['after'];
			foreach ( (array) $results as $result ) {
				if ( $result-&gt;week != $arc_w_last ) {
					$arc_year       = $result-&gt;yr;
					$arc_w_last     = $result-&gt;week;
					$arc_week       = get_weekstartend( $result-&gt;yyyymmdd, get_option( 'start_of_week' ) );
					$arc_week_start = date_i18n( get_option( 'date_format' ), $arc_week['start'] );
					$arc_week_end   = date_i18n( get_option( 'date_format' ), $arc_week['end'] );
					$url            = add_query_arg(
						array(
							'm' =&gt; $arc_year,
							'w' =&gt; $result-&gt;week,
						),
						home_url( '/' )
					);
					if ( 'post' !== $parsed_args['post_type'] ) {
						$url = add_query_arg( 'post_type', $parsed_args['post_type'], $url );
					}
					$text = $arc_week_start . $archive_week_separator . $arc_week_end;
					if ( $parsed_args['show_post_count'] ) {
						$parsed_args['after'] = '&amp;nbsp;(' . $result-&gt;posts . ')' . $after;
					}
					$selected = is_archive() &amp;&amp; (string) $parsed_args['year'] === $result-&gt;yr &amp;&amp; (string) $parsed_args['w'] === $result-&gt;week;
					$output  .= get_archives_link( $url, $text, $parsed_args['format'], $parsed_args['before'], $parsed_args['after'], $selected );
				}
			}
		}
	} elseif ( ( 'postbypost' === $parsed_args['type'] ) || ( 'alpha' === $parsed_args['type'] ) ) {
		$orderby = ( 'alpha' === $parsed_args['type'] ) ? 'post_title ASC ' : 'post_date DESC, ID DESC ';
		$query   = "SELECT * FROM $wpdb-&gt;posts $join $where ORDER BY $orderby $limit";
		$key     = md5( $query );
		$key     = "wp_get_archives:$key:$last_changed";
		$results = wp_cache_get( $key, 'post-queries' );
		if ( ! $results ) {
			$results = $wpdb-&gt;get_results( $query );
			wp_cache_set( $key, $results, 'post-queries' );
		}
		if ( $results ) {
			foreach ( (array) $results as $result ) {
				if ( '0000-00-00 00:00:00' !== $result-&gt;post_date ) {
					$url = get_permalink( $result );
					if ( $result-&gt;post_title ) {
						/** This filter is documented in wp-includes/post-template.php */
						$text = strip_tags( apply_filters( 'the_title', $result-&gt;post_title, $result-&gt;ID ) );
					} else {
						$text = $result-&gt;ID;
					}
					$selected = get_the_ID() === $result-&gt;ID;
					$output  .= get_archives_link( $url, $text, $parsed_args['format'], $parsed_args['before'], $parsed_args['after'], $selected );
				}
			}
		}
	}

	if ( $parsed_args['echo'] ) {
		echo $output;
	} else {
		return $output;
	}
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/general-template.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/general-template.php#L1996">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/general-template.php#L1996-L2214">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-hooks"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="hooks" tabindex="-1"><a href="#hooks">Hooks</a></h2> <dl><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/getarchives_join/"><span class="hook-func">apply_filters</span>( ‘getarchives_join’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$sql_join</span></nobr>,  <nobr><span class="arg-type">array</span> <span class="arg-name">$parsed_args</span></nobr> )</a></dt><dd><p>Filters the SQL JOIN clause for retrieving archives.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/getarchives_where/"><span class="hook-func">apply_filters</span>( ‘getarchives_where’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$sql_where</span></nobr>,  <nobr><span class="arg-type">array</span> <span class="arg-name">$parsed_args</span></nobr> )</a></dt><dd><p>Filters the SQL WHERE clause for retrieving archives.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/the_title/"><span class="hook-func">apply_filters</span>( ‘the_title’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$post_title</span></nobr>,  <nobr><span class="arg-type">int</span> <span class="arg-name">$post_id</span></nobr> )</a></dt><dd><p>Filters the post title.</p>
</dd></dl></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_cache_get_last_changed/">wp_cache_get_last_changed()</a><code>wp-includes/functions.php</code></td><td><p>Gets last changed date for the specified cache group.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/is_post_type_viewable/">is_post_type_viewable()</a><code>wp-includes/post.php</code></td><td><p>Determines whether a post type is considered “viewable”.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_cache_set/">wp_cache_set()</a><code>wp-includes/cache.php</code></td><td><p>Saves the data to the cache.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_archives_link/">get_archives_link()</a><code>wp-includes/general-template.php</code></td><td><p>Retrieves archive link content based on predefined or custom code.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_query_var/">get_query_var()</a><code>wp-includes/query.php</code></td><td><p>Retrieves the value of a query variable in the <a href="https://developer.notmatt.press/reference/classes/wp_query/" rel="class">WP_Query</a> class.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/is_archive/">is_archive()</a><code>wp-includes/query.php</code></td><td><p>Determines whether the query is for an existing archive page.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_weekstartend/">get_weekstartend()</a><code>wp-includes/functions.php</code></td><td><p>Gets the week start and end from the datetime or date string from MySQL.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/date_i18n/">date_i18n()</a><code>wp-includes/functions.php</code></td><td><p>Retrieves the date in localized format, based on a sum of Unix timestamp and timezone offset in seconds.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/mysql2date/">mysql2date()</a><code>wp-includes/functions.php</code></td><td><p>Converts given MySQL date string into a different format.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_locale/get_month/">WP_Locale::get_month()</a><code>wp-includes/class-wp-locale.php</code></td><td><p>Retrieves the full translated month by month number.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_month_link/">get_month_link()</a><code>wp-includes/link-template.php</code></td><td><p>Retrieves the permalink for the month archives with year.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_day_link/">get_day_link()</a><code>wp-includes/link-template.php</code></td><td><p>Retrieves the permalink for the day archives with year and month.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_year_link/">get_year_link()</a><code>wp-includes/link-template.php</code></td><td><p>Retrieves the permalink for the year archives.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_the_id/">get_the_ID()</a><code>wp-includes/post-template.php</code></td><td><p>Retrieves the ID of the current item in the WordPress Loop.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_cache_get/">wp_cache_get()</a><code>wp-includes/cache.php</code></td><td><p>Retrieves the cache contents from the cache by key and group.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_parse_args/">wp_parse_args()</a><code>wp-includes/functions.php</code></td><td><p>Merges user defined arguments into defaults array.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/absint/">absint()</a><code>wp-includes/load.php</code></td><td><p>Converts a value to non-negative integer.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_query_arg/">add_query_arg()</a><code>wp-includes/functions.php</code></td><td><p>Retrieves a modified URL query string.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/home_url/">home_url()</a><code>wp-includes/link-template.php</code></td><td><p>Retrieves the URL for the current site where the front end is accessible.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_permalink/">get_permalink()</a><code>wp-includes/link-template.php</code></td><td><p>Retrieves the full permalink for the current post or post ID.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/apply_filters/">apply_filters()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to a filter hook.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_option/">get_option()</a><code>wp-includes/option.php</code></td><td><p>Retrieves an option value based on an option name.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_post_type_object/">get_post_type_object()</a><code>wp-includes/post.php</code></td><td><p>Retrieves a post type object by name.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wpdb/get_results/">wpdb::get_results()</a><code>wp-includes/class-wpdb.php</code></td><td><p>Retrieves an entire SQL result set from the database (i.e., many rows).</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wpdb/prepare/">wpdb::prepare()</a><code>wp-includes/class-wpdb.php</code></td><td><p>Prepares a SQL query for safe execution.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 20 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_archives/">get_archives()</a><code>wp-includes/deprecated.php</code></td><td><p>Retrieves a list of archives.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_widget_archives/widget/">WP_Widget_Archives::widget()</a><code>wp-includes/widgets/class-wp-widget-archives.php</code></td><td><p>Outputs the content for the current Archives widget instance.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.2.0/">5.2.0</a></td><td><span class="since-description">The <code>$year</code>, <code>$monthnum</code>, <code>$day</code>, and <code>$w</code> arguments were added.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/4.4.0/">4.4.0</a></td><td><span class="since-description">The <code>$post_type</code> argument was added.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/1.2.0/">1.2.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-khoipro odd alt thread-odd thread-alt depth-1" data-comment-id="3182" id="comment-3182">
<article class="comment-body" id="div-comment-3182">
<a class="screen-reader-text" href="#comment-content-3182">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3182">
<p>To filter a specific category/term, we have a specific case to add filters. It works in case we wish to change archive link based on <em>get_query_var(‘news_category’)</em>.</p>
<p>For example, on same template we have:</p>
<p>– News Category #1 has dropdown of 2019, 2018, 2017.<br>
– News Category #2 has dropdown of 2017.</br></p>
<p>If the user access /news/news-category-2/2019, it will return no posts. We should disable an archive link 2018, 2019 if a current category is News Category.</p>
<p>The below code work with Taxonomy “news_category” and custom post type “news”. To work with default post, you should change back to Taxonomy “category” and default post “post”.</p>
<p><strong>In templates/custom-archive-template.php</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">  add_filter( 'getarchives_where', 'custom_archive_by_category_where' );
  add_filter( 'getarchives_join', 'custom_archive_by_category_join' );

  $args = array();

  wp_get_archives(
    array(
      'type'            =&gt; 'yearly',
      'format'          =&gt; 'option',
      'post_type'       =&gt; 'news',
    )
  );

  remove_filter( 'getarchives_where', 'custom_archive_by_category_where' );
  remove_filter( 'getarchives_join', 'custom_archive_by_category_join' );</code></pre>
<p><strong>In functions.php:</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function custom_archive_by_category_join( $x ) {
    global $wpdb;
    return $x . " INNER JOIN $wpdb-&gt;term_relationships ON ($wpdb-&gt;posts.ID = $wpdb-&gt;term_relationships.object_id) INNER JOIN $wpdb-&gt;term_taxonomy ON ($wpdb-&gt;term_relationships.term_taxonomy_id = $wpdb-&gt;term_taxonomy.term_taxonomy_id)";
}

function custom_archive_by_category_where($x) {
    global $wpdb;
    $current_term_slug = get_query_var( 'news_category' );

    if (!empty($current_term_slug)) {
        $current_term = get_term_by('slug', $current_term_slug, 'news_category');

        if (is_wp_error($current_term) ) {
            return $x;
        }

        $current_term_id = $current_term-&gt;term_id;

        return $x . " AND $wpdb-&gt;term_taxonomy.taxonomy = 'news_category' AND $wpdb-&gt;term_taxonomy.term_id IN ($current_term_id)";

    }

    return $x;
}</code></pre>
<p>Read more about <a href="https://developer.notmatt.press/reference/hooks/getarchives_where/" rel="ugc">https://developer.notmatt.press/reference/hooks/getarchives_where/</a> and <a href="https://developer.notmatt.press/reference/hooks/getarchives_join/" rel="ugc">https://developer.notmatt.press/reference/hooks/getarchives_join/</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3182">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="936" id="comment-936">
<article class="comment-body" id="div-comment-936">
<a class="screen-reader-text" href="#comment-content-936">Skip to note 11 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-936">
<p><strong>Display list of links to last two weeks of daily archives</strong><br>
Lists last 14 days that had at least one post, with count total for each day in parentheses, e.g. “November 2, 2015 (3)”.</br></p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php wp_get_archives( array( 'type' =&gt; 'daily', 'limit' =&gt; 14, 'show_post_count' =&gt; 'true' ) ); ?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-936">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="938" id="comment-938">
<article class="comment-body" id="div-comment-938">
<a class="screen-reader-text" href="#comment-content-938">Skip to note 12 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-938">
<p><strong>Dropdown Box</strong><br>
Displays a dropdown menu of monthly archives, in option tags, with the post count (uses JavaScript to navigate to the selected archive page).</br></p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;select name="archive-dropdown" onchange="document.location.href=this.options[this.selectedIndex].value;"&gt;
	&lt;option value=""&gt;&lt;?php esc_attr( _e( 'Select Month', 'textdomain' ) ); ?&gt;&lt;/option&gt; 
	&lt;?php wp_get_archives( array( 'type' =&gt; 'monthly', 'format' =&gt; 'option', 'show_post_count' =&gt; 1 ) ); ?&gt;
&lt;/select&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-938">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-lokiwp even thread-even depth-1" data-comment-id="3570" id="comment-3570">
<article class="comment-body" id="div-comment-3570">
<a class="screen-reader-text" href="#comment-content-3570">Skip to note 13 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3570">
<p>To return an array of years with name and value only like:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">array(
   array(
      'name' =&gt; 'January 2020',
      'value' =&gt; 'http://demo.com/2020/01/'
   ),
   array(
      'name' =&gt; 'February 2020',
      'value' =&gt; 'http://demo.com/2020/02/'
   )
)</code></pre>
<p>We must capture using <code>echo=false&amp;format=custom</code>:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function theme_name_get_year_archive_array() {
  $years = array();
  $years_args = array(
    'type' =&gt; 'monthly',
    'format' =&gt; 'custom', // My advise: WordPress Core shoud be add support "format=array" to keep it easy to catch for many custom cases
    'before' =&gt; '',
    'after' =&gt; '|',
    'echo' =&gt; false,
    'post_type' =&gt; 'news',
    'order' =&gt; 'ASC'
  );

  // Get Years
  $years_content = wp_get_archives($years_args);
  if (!empty($years_content) ) {
    $years_arr = explode('|', $years_content);
    $years_arr = array_filter($years_arr, function($item) {
      return trim($item) !== '';
    }); // Remove empty whitespace item from array

    foreach($years_arr as $year_item) {
      $year_row = trim($year_item);
      preg_match('/href=["\']?([^"\'&gt;]+)["\']&gt;(.+)&lt;\/a&gt;/', $year_row, $year_vars);

      if (!empty($year_vars)) {
        $years[] = array(
          'name' =&gt; $year_vars[2], // Ex: January 2020
          'value' =&gt; $year_vars[1] // Ex: <a href="http://demo.com/2020/01/" rel="nofollow ugc">http://demo.com/2020/01/</a>
        );
      }
    }
  }

  return $years;
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3570">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="934" id="comment-934">
<article class="comment-body" id="div-comment-934">
<a class="screen-reader-text" href="#comment-content-934">Skip to note 14 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-934">
<p><strong>Default Usage</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php 
$args = array(
	'type'            =&gt; 'monthly',
	'limit'           =&gt; '',
	'format'          =&gt; 'html', 
	'before'          =&gt; '',
	'after'           =&gt; '',
	'show_post_count' =&gt; false,
	'echo'            =&gt; 1,
	'order'           =&gt; 'DESC'
);
wp_get_archives( $args );
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-934">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="935" id="comment-935">
<article class="comment-body" id="div-comment-935">
<a class="screen-reader-text" href="#comment-content-935">Skip to note 15 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-935">
<p><strong>Display list of links to last 12 months of archives</strong></p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php wp_get_archives( array( 'type' =&gt; 'monthly', 'limit' =&gt; 12 ) ); ?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-935">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="937" id="comment-937">
<article class="comment-body" id="div-comment-937">
<a class="screen-reader-text" href="#comment-content-937">Skip to note 16 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-937">
<p><strong>Display the titles of the last 20 posts</strong><br>
Uses <code>custom</code> as the value for the <code>format</code> argument and specifies <code>before</code> and <code>after</code> values (so, in this example, prints the titles within span tags and separated by commas):</br></p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php wp_get_archives( array( 'type' =&gt; 'postbypost', 'limit' =&gt; 20, 'format' =&gt; 'custom', 'before' =&gt; '&lt;span class="my-post-title"&gt;', 'after' =&gt; '&lt;/span&gt;, ' ) ); ?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-937">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="939" id="comment-939">
<article class="comment-body" id="div-comment-939">
<a class="screen-reader-text" href="#comment-content-939">Skip to note 17 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-939">
<p><strong>Display linked titles of all posts, listed alphabetically</strong><br/>
Of possible use on a sitemap.</p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php wp_get_archives( 'type=alpha' ); ?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-939">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-talymo36 odd alt thread-odd thread-alt depth-1" data-comment-id="4214" id="comment-4214">
<article class="comment-body" id="div-comment-4214">
<a class="screen-reader-text" href="#comment-content-4214">Skip to note 18 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4214">
<p>An example using custom wrappers on each link item in the archive. Helpful if you are doing special styling that require a more complicated structure.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
	$args = array(
		'type'            =&gt; 'monthly',
		'limit'           =&gt; '',
		'format'          =&gt; 'custom',
		'before'          =&gt; '&lt;div class="sub-item"&gt;',
		'after'           =&gt; '&lt;/div&gt;',
		'show_post_count' =&gt; false,
		'echo'            =&gt; 1,
		'order'           =&gt; 'DESC'
	);
	wp_get_archives( $args );
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4214">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
