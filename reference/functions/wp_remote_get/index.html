
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/functions/">Functions</a></span><span class="is-current-page">wp_remote_get()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>wp_remote_get()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">wp_remote_get( <span class="arg-type">string</span> <span class="arg-name">$url</span>,  <span class="arg-type">array</span> <span class="arg-name">$args</span> = <span class="arg-default">array()</span> ): <span class="return-type">array|<a href="https://developer.notmatt.press/reference/classes/wp_error/" rel="class">WP_Error</a></span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Performs an HTTP request using the GET method and returns its response.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <h3 class="is-toc-heading has-heading-5-font-size" id="see-also" tabindex="-1"><a href="#see-also">See also</a></h3><ul><li><a href="https://developer.notmatt.press/reference/functions/wp_remote_request">wp_remote_request()</a>: For more information on the response array format.</li>
<li><a href="https://developer.notmatt.press/reference/classes/WP_Http/request">WP_Http::request()</a>: For default arguments information.</li>
</ul></section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$url</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">URL to retrieve.</span></div></dd><dt><code>$args</code><span class="type"><span class="array">array</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Request arguments. <br/>
See <a href="https://developer.notmatt.press/reference/classes/wp_http/request/" rel="method">WP_Http::request()</a> for information on accepted arguments.</span></div><p class="default">Default:<code>array()</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">array|<a href="https://developer.notmatt.press/reference/classes/wp_error/" rel="class">WP_Error</a></span> The response or <a href="https://developer.notmatt.press/reference/classes/wp_error/" rel="class">WP_Error</a> on failure.<br/>
See <a href="https://developer.notmatt.press/reference/classes/wp_http/request/" rel="method">WP_Http::request()</a> for information on return value.</section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<p>Use <tt><a href="https://developer.notmatt.press/reference/functions/wp_remote_retrieve_body/" title="Function Reference/wp remote retrieve body"> wp_remote_retrieve_body( $response )</a></tt> to get the response body.</p>
<p>Use <tt><a href="https://codex.notmatt.press/Function_Reference/wp_remote_retrieve_response_code" title="Function Reference/wp remote retrieve response code"> wp_remote_retrieve_response_code( $response )</a></tt> to get the HTTP status code for the response.</p>
<p>Use related functions in <code><a class="external text" href="https://core.trac.notmatt.press/browser/tags/4.5.3/src/wp-includes/http.php#L207" rel="nofollow">wp-includes/http.php</a></code> to get other parameters such as headers.</p>
<p>See <tt><a href="https://developer.notmatt.press/reference/classes/wp_http_streams/request/" rel="method">WP_Http_Streams::request()</a></tt> method located in <code><a class="external text" href="https://core.trac.notmatt.press/browser/tags/4.5.3/src/wp-includes/class-wp-http-streams.php#L287" rel="nofollow">wp-includes/class-wp-http-streams.php</a></code> for the format of the array returned by <tt><a href="https://developer.notmatt.press/reference/functions/wp_remote_get/" rel="function">wp_remote_get()</a> .</tt></p>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="175"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function wp_remote_get( $url, $args = array() ) {
	$http = _wp_http_get_object();
	return $http-&gt;get( $url, $args );
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/http.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-includes/http.php#L175">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/http.php#L175-L178">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/_wp_http_get_object/">_wp_http_get_object()</a><code>wp-includes/http.php</code></td><td><p>Returns the initialized <a href="https://developer.notmatt.press/reference/classes/wp_http/" rel="class">WP_Http</a> Object</p>
</td></tr></tbody></table></figure></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_automatic_updater/has_fatal_error/">WP_Automatic_Updater::has_fatal_error()</a><code>wp-admin/includes/class-wp-automatic-updater.php</code></td><td><p>Performs a loopback request to check for potential fatal errors.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_site_health/check_for_page_caching/">WP_Site_Health::check_for_page_caching()</a><code>wp-admin/includes/class-wp-site-health.php</code></td><td><p>Checks if site has page cache enabled or not.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_rest_pattern_directory_controller/get_items/">WP_REST_Pattern_Directory_Controller::get_items()</a><code>wp-includes/rest-api/endpoints/class-wp-rest-pattern-directory-controller.php</code></td><td><p>Search and retrieve block patterns metadata</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_block_editor_theme_styles/">get_block_editor_theme_styles()</a><code>wp-includes/block-editor.php</code></td><td><p>Creates an array of theme styles to load into the block editor.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_site_health/wp_cron_scheduled_check/">WP_Site_Health::wp_cron_scheduled_check()</a><code>wp-admin/includes/class-wp-site-health.php</code></td><td><p>Runs the scheduled event to check and update the latest site health status for the website.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_site_health/get_test_rest_availability/">WP_Site_Health::get_test_rest_availability()</a><code>wp-admin/includes/class-wp-site-health.php</code></td><td><p>Tests if the REST API is accessible.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_site_health/get_test_dotorg_communication/">WP_Site_Health::get_test_dotorg_communication()</a><code>wp-admin/includes/class-wp-site-health.php</code></td><td><p>Tests if the site can communicate with WordPress.org.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_check_php_version/">wp_check_php_version()</a><code>wp-admin/includes/misc.php</code></td><td><p>Checks if the user needs to update PHP.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_edit_theme_plugin_file/">wp_edit_theme_plugin_file()</a><code>wp-admin/includes/file.php</code></td><td><p>Attempts to edit a file for a theme or plugin.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_community_events/get_events/">WP_Community_Events::get_events()</a><code>wp-admin/includes/class-wp-community-events.php</code></td><td><p>Gets data about events near a particular location.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_install_maybe_enable_pretty_permalinks/">wp_install_maybe_enable_pretty_permalinks()</a><code>wp-admin/includes/upgrade.php</code></td><td><p>Maybe enable pretty permalinks on installation.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/network_step2/">network_step2()</a><code>wp-admin/includes/network.php</code></td><td><p>Prints step 2 for Network installation process.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/themes_api/">themes_api()</a><code>wp-admin/includes/theme.php</code></td><td><p>Retrieves theme installer pages from the WordPress.org Themes API.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/populate_network/">populate_network()</a><code>wp-admin/includes/schema.php</code></td><td><p>Populate network settings.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_core_checksums/">get_core_checksums()</a><code>wp-admin/includes/update.php</code></td><td><p>Gets and caches the checksums for the given version of WordPress.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/plugins_api/">plugins_api()</a><code>wp-admin/includes/plugin-install.php</code></td><td><p>Retrieves plugin installer pages from the WordPress.org Plugins API.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_get_popular_importers/">wp_get_popular_importers()</a><code>wp-admin/includes/import.php</code></td><td><p>Returns a list from WordPress.org of popular importer plugins.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_credits/">wp_credits()</a><code>wp-admin/includes/credits.php</code></td><td><p>Retrieves the contributor credits.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/url_is_accessable_via_ssl/">url_is_accessable_via_ssl()</a><code>wp-includes/deprecated.php</code></td><td><p>Determines if the URL can be accessed over SSL.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 14 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.7.0/">2.7.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-charlestonsw even thread-odd thread-alt depth-1" data-comment-id="1906" id="comment-1906">
<article class="comment-body" id="div-comment-1906">
<a class="screen-reader-text" href="#comment-content-1906">Skip to note 14 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1906">
<p>Valid arguments for the second parameter can be found in class-http.php in the header.   There is not easy way to reference the list on the current version of this guide so I’m pasting the PHPDoc header here.  Hopefully the docs site will expand the <a href="https://developer.notmatt.press/reference/classes/wp_http/" rel="class">WP_Http</a> page or find a way to reference the valid parameters through indirection while the robots build these pages.</p>
<p><code><br>
	 * @param string|array $args {<br>
	 *     Optional. Array or string of HTTP request arguments.<br/>
	 *<br/>
	 *     @type string       $method              Request method. Accepts 'GET', 'POST', 'HEAD', or 'PUT'.<br/>
	 *                                             Some transports technically allow others, but should not be<br/>
	 *                                             assumed. Default 'GET'.<br/>
	 *     @type int          $timeout             How long the connection should stay open in seconds. Default 5.<br/>
	 *     @type int          $redirection         Number of allowed redirects. Not supported by all transports<br/>
	 *                                             Default 5.<br/>
	 *     @type string       $httpversion         Version of the HTTP protocol to use. Accepts '1.0' and '1.1'.<br/>
	 *                                             Default '1.0'.<br/>
	 *     @type string       $user-agent          User-agent value sent.<br/>
	 *                                             Default WordPress/' . $wp_version . '; ' . get_bloginfo( 'url' ).<br/>
	 *     @type bool         $reject_unsafe_urls  Whether to pass URLs through wp_http_validate_url().<br/>
	 *                                             Default false.<br/>
	 *     @type bool         $blocking            Whether the calling code requires the result of the request.<br/>
	 *                                             If set to false, the request will be sent to the remote server,<br/>
	 *                                             and processing returned to the calling code immediately, the caller<br/>
	 *                                             will know if the request succeeded or failed, but will not receive<br/>
	 *                                             any response from the remote server. Default true.<br/>
	 *     @type string|array $headers             Array or string of headers to send with the request.<br/>
	 *                                             Default empty array.<br/>
	 *     @type array        $cookies             List of cookies to send with the request. Default empty array.<br/>
	 *     @type string|array $body                Body to send with the request. Default null.<br/>
	 *     @type bool         $compress            Whether to compress the $body when sending the request.<br/>
	 *                                             Default false.<br/>
	 *     @type bool         $decompress          Whether to decompress a compressed response. If set to false and<br/>
	 *                                             compressed content is returned in the response anyway, it will<br/>
	 *                                             need to be separately decompressed. Default true.<br/>
	 *     @type bool         $sslverify           Whether to verify SSL for the request. Default true.<br/>
	 *     @type string       sslcertificates      Absolute path to an SSL certificate .crt file.<br/>
	 *                                             Default ABSPATH . WPINC . '/certificates/ca-bundle.crt'.<br/>
	 *     @type bool         $stream              Whether to stream to a file. If set to true and no filename was<br/>
	 *                                             given, it will be droped it in the WP temp dir and its name will<br/>
	 *                                             be set using the basename of the URL. Default false.<br/>
	 *     @type string       $filename            Filename of the file to write to when streaming. $stream must be<br/>
	 *                                             set to true. Default null.<br/>
	 *     @type int          $limit_response_size Size in bytes to limit the response to. Default null.<br/>
</br></br></code></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-1906">
<ul class="children">
<li class="comment byuser comment-author-andrija odd alt depth-2" data-comment-id="6299" id="comment-6299">
<article class="comment-body" id="div-comment-6299">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6299">
<div>Nowadays there is a way to reference the $args: <a href="https://developer.notmatt.press/reference/classes/WP_Http/request/" rel="ugc">https://developer.notmatt.press/reference/classes/WP_Http/request/</a></div>
<div><a class="url" href="https://profiles.notmatt.press/andrija/" rel="external nofollow">Andrija Naglic</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_remote_get/#comment-6299"><time datetime="2023-01-24T11:01:03+00:00">2 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="590" id="comment-590">
<article class="comment-body" id="div-comment-590">
<a class="screen-reader-text" href="#comment-content-590">Skip to note 15 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-590">
<p><strong>Get a remote URL</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/** @var array|WP_Error $response */
$response = wp_remote_get( 'http://www.example.com/index.html' );

if ( is_array( $response ) &amp;&amp; ! is_wp_error( $response ) ) {
	$headers = $response['headers']; // array of http header lines
	$body    = $response['body']; // use the content
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-590">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-khr2003 odd alt thread-odd thread-alt depth-1" data-comment-id="5186" id="comment-5186">
<article class="comment-body" id="div-comment-5186">
<a class="screen-reader-text" href="#comment-content-5186">Skip to note 16 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5186">
<p>The top comment by Store Locator Plus adds good information but it is hard to read. </p>
<p>To find the arguments you can see <a href="https://developer.notmatt.press/reference/classes/wp_http/request/">WP_Http::request documentation</a> or see below for a formatted PHPDoc version:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
* @param string|array $args {
*     Optional. Array or string of HTTP request arguments.
*
*     @type string       $method              Request method. Accepts 'GET', 'POST', 'HEAD', 'PUT', 'DELETE',
*                                             'TRACE', 'OPTIONS', or 'PATCH'.
*                                             Some transports technically allow others, but should not be
*                                             assumed. Default 'GET'.
*     @type float        $timeout             How long the connection should stay open in seconds. Default 5.
*     @type int          $redirection         Number of allowed redirects. Not supported by all transports
*                                             Default 5.
*     @type string       $httpversion         Version of the HTTP protocol to use. Accepts '1.0' and '1.1'.
*                                             Default '1.0'.
*     @type string       $user-agent          User-agent value sent.
*                                             Default 'WordPress/' . get_bloginfo( 'version' ) . '; ' . get_bloginfo( 'url' ).
*     @type bool         $reject_unsafe_urls  Whether to pass URLs through wp_http_validate_url().
*                                             Default false.
*     @type bool         $blocking            Whether the calling code requires the result of the request.
*                                             If set to false, the request will be sent to the remote server,
*                                             and processing returned to the calling code immediately, the caller
*                                             will know if the request succeeded or failed, but will not receive
*                                             any response from the remote server. Default true.
*     @type string|array $headers             Array or string of headers to send with the request.
*                                             Default empty array.
*     @type array        $cookies             List of cookies to send with the request. Default empty array.
*     @type string|array $body                Body to send with the request. Default null.
*     @type bool         $compress            Whether to compress the $body when sending the request.
*                                             Default false.
*     @type bool         $decompress          Whether to decompress a compressed response. If set to false and
*                                             compressed content is returned in the response anyway, it will
*                                             need to be separately decompressed. Default true.
*     @type bool         $sslverify           Whether to verify SSL for the request. Default true.
*     @type string       $sslcertificates     Absolute path to an SSL certificate .crt file.
*                                             Default ABSPATH . WPINC . '/certificates/ca-bundle.crt'.
*     @type bool         $stream              Whether to stream to a file. If set to true and no filename was
*                                             given, it will be droped it in the WP temp dir and its name will
*                                             be set using the basename of the URL. Default false.
*     @type string       $filename            Filename of the file to write to when streaming. $stream must be
*                                             set to true. Default null.
*     @type int          $limit_response_size Size in bytes to limit the response to. Default null.
*
* }
*/</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5186">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="591" id="comment-591">
<article class="comment-body" id="div-comment-591">
<a class="screen-reader-text" href="#comment-content-591">Skip to note 17 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-591">
<p><strong>Get a remote URL with special arguments</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/** @var array|WP_Error $response */
$response = wp_remote_get( 'http://www.example.com/index.php?action=foo',
	array(
		'timeout'     =&gt; 120,
		'httpversion' =&gt; '1.1',
	)
);</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-591">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-dleeward odd alt thread-odd thread-alt depth-1" data-comment-id="3103" id="comment-3103">
<article class="comment-body" id="div-comment-3103">
<a class="screen-reader-text" href="#comment-content-3103">Skip to note 18 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3103">
<p>When adding headers, each part of the header has to be a separate element like this:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$args = array(
	  'headers' =&gt; array(
		'Content-Type' =&gt; 'application/json',
		'X-Api-Key' =&gt; 'apikey12345'
	  ) </code></pre>
<p><strong>not </strong>like cURL where you can use ‘Content-Type: application/json’</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3103">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-ancientro even thread-even depth-1" data-comment-id="4098" id="comment-4098">
<article class="comment-body" id="div-comment-4098">
<a class="screen-reader-text" href="#comment-content-4098">Skip to note 19 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4098">
<p>If you load data from an API and have set a domain restriction on the API key (such as only allow on “www.example.com/*”), you need to set the “referer” in “headers” in $args, as <a href="https://developer.notmatt.press/reference/functions/wp_remote_get/" rel="function">wp_remote_get()</a>  does not set the referer automatically:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$response = wp_remote_get(
	esc_url_raw( $api_url ),
	array(
		'headers' =&gt; array(
			'referer' =&gt; home_url()
		)
	)
);</code></pre>
<p>Or, as a string, to work on your localhost as well:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">'referer' =&gt; 'www.example.com'</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4098">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-emanweb odd alt thread-odd thread-alt depth-1" data-comment-id="2976" id="comment-2976">
<article class="comment-body" id="div-comment-2976">
<a class="screen-reader-text" href="#comment-content-2976">Skip to note 20 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2976">
<p>It would be cool to have a link to this somewhere on this page: <a href="https://developer.notmatt.press/reference/functions/wp_safe_remote_get/" rel="ugc">https://developer.notmatt.press/reference/functions/wp_safe_remote_get/</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2976">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-spacegrrl even thread-even depth-1" data-comment-id="3015" id="comment-3015">
<article class="comment-body" id="div-comment-3015">
<a class="screen-reader-text" href="#comment-content-3015">Skip to note 21 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3015">
<p>replace <code>wp_get_http( $url, $filename )</code> to get a remote file and write to the file system:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$args_for_get = array(
	'stream' =&amp;gt; true,
	'filename' =&amp;gt; $filename,
);
$response = wp_remote_get( $url, $args_for_get );</code></pre>
<p>Thank you @charlestonsw for pasting in the comments with the meaning of all the args, which lead me to this simple replacement.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3015">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-khoipro odd alt thread-odd thread-alt depth-1" data-comment-id="3128" id="comment-3128">
<article class="comment-body" id="div-comment-3128">
<a class="screen-reader-text" href="#comment-content-3128">Skip to note 22 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3128">
<p>It’s better to execute JSON response like that to keep it managed.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$request = wp_remote_get($url, $options);

return load_request($request);

function load_request($response) {
  try {
    $json = json_decode( $response['body'] );
  } catch ( Exception $ex ) {
    $json = null;
  }
  return $json;
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3128">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-namithjawahar even thread-even depth-1" data-comment-id="5841" id="comment-5841">
<article class="comment-body" id="div-comment-5841">
<a class="screen-reader-text" href="#comment-content-5841">Skip to note 23 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5841">
<p>An example for reading a JSON response from an API end point with error checking.<br/>
Here we are checking for the response code of 200 utilizing the <a href="https://developer.notmatt.press/reference/functions/wp_remote_retrieve_response_code/">wp_remote_retrieve_response_code()</a> function and also verifying there are no JSON errors during the json_decode() function call utilising the json_last_error() function.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">try {
	$response = wp_remote_get( 'https://yourapi.end/point/', array(
		'headers' =&gt; array(
			'Accept' =&gt; 'application/json',
		)
	) );
	if ( ( !is_wp_error($response)) &amp;&amp; (200 === wp_remote_retrieve_response_code( $response ) ) ) {
		$responseBody = json_decode($response['body']);
		if( json_last_error() === JSON_ERROR_NONE ) {
			//Do your thing.
		}
	}
} catch( Exception $ex ) {
	//Handle Exception.
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5841">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-matejpodstrelenec odd alt thread-odd thread-alt depth-1" data-comment-id="6741" id="comment-6741">
<article class="comment-body" id="div-comment-6741">
<a class="screen-reader-text" href="#comment-content-6741">Skip to note 24 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6741">
<p>You may come across following error:</p>
<p><code>http_build_query() expects parameter 1 to be array, string given</code></p>
<p>That happens when you try using <a href="https://developer.notmatt.press/reference/functions/wp_remote_get/" rel="function">wp_remote_get()</a>  with body parameter. This is <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET" rel="nofollow ugc">not a recommended standard</a> and WordPress will not let you do it.<br/>
Use <a href="https://developer.notmatt.press/reference/functions/wp_remote_post/" rel="function">wp_remote_post()</a>  instead.</p>
<p>Example:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$response = wp_remote_post( $api_url, array(
	'headers' =&gt; array(
		'Content-Type'  =&gt; 'application/json',
		'Authorization' =&gt; 'Bearer ' . $api_key
	),
	'body'    =&gt; json_encode( $body, JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES )
) );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6741">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-zauddelig even thread-even depth-1" data-comment-id="7036" id="comment-7036">
<article class="comment-body" id="div-comment-7036">
<a class="screen-reader-text" href="#comment-content-7036">Skip to note 25 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-7036">
<p>You can use it to fetch external Authenticated APIs</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">// If the API is using a Bearer Token
$auth_scheme = 'Bearer';
$api_key     = 'token';

// If the API is using Basic Auth
$auth_scheme = 'Basic';
$api_key     = base64_encode( 'username' . ':' . 'password' );

// set the API URL and make the request.
$api_url = 'https://...';

$response = wp_remote_get( $api_url, array(
    'headers' =&gt; array(
        'Accepts'       =&gt; 'application/json',
        'Authorization' =&gt; $auth_scheme . ' ' . $api_key
    ),
) );

if ( is_wp_error( $response ) ) {
   ... // Handle the error
} else {
   $body = wp_remote_retrieve_body( $response );
   $data = json_decode( $body, true );
   ...  // do something with the data
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-7036">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-shahalom odd alt thread-odd thread-alt depth-1 bad-note" data-comment-id="3418" id="comment-3418">
<article class="comment-body" id="div-comment-3418">
<a class="screen-reader-text" href="#comment-content-3418">Skip to note 26 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3418">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">    $apiUrl = 'https://example.com/wp-json/wp/v2/posts?page=0&amp;per_page=0';
    $response = wp_remote_get($apiUrl);
    $responseBody = wp_remote_retrieve_body( $response );
    $result = json_decode( $responseBody );
    if ( is_array( $result ) &amp;&amp; ! is_wp_error( $result ) ) {
        // Work with the $result data
    } else {
        // Work with the error
    }</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="2" id="feedback-3418">
<ul class="children">
<li class="comment byuser comment-author-srmsilva even depth-2" data-comment-id="4933" id="comment-4933">
<article class="comment-body" id="div-comment-4933">
<div class="wporg-has-embedded-code comment-content" id="comment-content-4933">
<div><code>$result = json_decode($responseBody);</code> if success as it is will return an <strong> object </strong> and not a array, my friend, so the if will fail even if there are no errors. Consider changing line 4 to: <code>$result = json_decode($responseBody, true); </code></div>
<div><a class="url" href="https://profiles.notmatt.press/srmsilva/" rel="external nofollow">Marcos Silva</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_remote_get/#comment-4933"><time datetime="2021-03-19T03:20:22+00:00">4 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
<li class="comment byuser comment-author-crstauf odd alt depth-2" data-comment-id="4949" id="comment-4949">
<article class="comment-body" id="div-comment-4949">
<div class="wporg-has-embedded-code comment-content" id="comment-content-4949">
<div><code>json_decode()</code> is native to PHP, and so will never return an instance of <code>WP_Error</code> object; that check is unnecessary, or, should be adjusted to check <code>$response</code>.</div>
<div><a class="url" href="https://profiles.notmatt.press/crstauf/" rel="external nofollow">crstauf</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_remote_get/#comment-4949"><time datetime="2021-03-23T15:01:56+00:00">4 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
