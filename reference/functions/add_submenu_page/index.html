
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">add_submenu_page()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>add_submenu_page()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">add_submenu_page( <span class="arg-type">string</span> <span class="arg-name">$parent_slug</span>,  <span class="arg-type">string</span> <span class="arg-name">$page_title</span>,  <span class="arg-type">string</span> <span class="arg-name">$menu_title</span>,  <span class="arg-type">string</span> <span class="arg-name">$capability</span>,  <span class="arg-type">string</span> <span class="arg-name">$menu_slug</span>,  <span class="arg-type">callable</span> <span class="arg-name">$callback</span> = <span class="arg-default">''</span>,  <span class="arg-type">int|float</span> <span class="arg-name">$position</span> = <span class="arg-default">null</span> ): <span class="return-type">string|false</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Adds a submenu page.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>This function takes a capability which will be used to determine whether or not a page is included in the menu.</p>
<p>The function which is hooked in to handle the output of the page must check that the user has the required capability as well.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$parent_slug</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The slug name for the parent menu (or the file name of a standard                               WordPress admin page).</span></div></dd><dt><code>$page_title</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The text to be displayed in the title tags of the page when the menu                               is selected.</span></div></dd><dt><code>$menu_title</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The text to be used for the menu.</span></div></dd><dt><code>$capability</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The capability required for this menu to be displayed to the user.</span></div></dd><dt><code>$menu_slug</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The slug name to refer to this menu by. Should be unique for this menu                               and only include lowercase alphanumeric, dashes, and underscores characters                               to be compatible with <a href="https://developer.notmatt.press/reference/functions/sanitize_key/" rel="function">sanitize_key()</a> .</span></div></dd><dt><code>$callback</code><span class="type"><span class="callable">callable</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">The function to be called to output the content for this page.</span></div><p class="default">Default:<code>''</code></p></dd><dt><code>$position</code><span class="type"><span class="int">int</span>|<span class="float">float</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">The position in the menu order this item should appear.</span></div><p class="default">Default:<code>null</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">string|false</span> The resulting page’s hook_suffix, or false if the user does not have the capability required.</section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<h3 class="is-toc-heading wp-block-heading" id="notes" tabindex="-1"><a href="#notes">Notes</a></h3>
<ul class="wp-block-list">
<li><strong>NOTE:</strong>If you’re running into the “You do not have sufficient permissions to access this page.” message in a <tt><a href="https://developer.notmatt.press/reference/functions/wp_die/" rel="function">wp_die()</a> </tt> screen, then you’ve hooked too early. The hook you should use is <a href="https://developer.notmatt.press/reference/hooks/admin_menu/"><code>admin_menu</code></a>.</li>
<li>For <code>$menu_slug</code> please don’t use <code>__FILE__</code> it makes for an ugly URL, and is a minor security nuisance.</li>
<li>Within the rendering function <code>$function</code> you may want to access parameters you used in <a href="https://developer.notmatt.press/reference/functions/add_submenu_page/"><code>add_submenu_page()</code></a>, such as the <code>$page_title</code>. Typically, these will work:
<ul class="wp-block-list">
<li><tt>$parent_slug</tt>: <a href="https://developer.notmatt.press/reference/functions/get_admin_page_parent/"><code>get_admin_page_parent()</code></a></li>
<li><tt>$page_title</tt>: <a href="https://developer.notmatt.press/reference/functions/get_admin_page_title/"><code>get_admin_page_title()</code></a>, or simply <code>global $title</code></li>
<li><tt>$menu_slug</tt>: <code>global $plugin_page</code>.</li>
</ul>
</li>
<li>This function should normally be hooked in with one of the the <a href="https://developer.notmatt.press/reference/hooks/admin_menu/"><tt>admin_menu</tt></a> actions depending on the menu where the sub menu is to appear:<br/>
<table>
<tbody>
<tr>
<td><a href="https://developer.notmatt.press/reference/hooks/admin_menu/" title="Plugin API/Action Reference/admin menu">admin_menu</a></td>
<td>The normal, or site, administration menu</td>
</tr>
<tr>
<td><a href="https://developer.notmatt.press/reference/hooks/user_admin_menu/" title="Plugin API/Action Reference/user admin menu">user_admin_menu</a></td>
<td>The user administration menu</td>
</tr>
<tr>
<td><a href="https://developer.notmatt.press/reference/hooks/network_admin_menu/" title="Plugin API/Action Reference/network admin menu">network_admin_menu</a></td>
<td>The <a href="https://codex.wordpress.org/Glossary#Network" title="Glossary">network</a> administration menu</td>
</tr>
</tbody>
</table>
</li>
</ul>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1473"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function add_submenu_page( $parent_slug, $page_title, $menu_title, $capability, $menu_slug, $callback = '', $position = null ) {
	global $submenu, $menu, $_wp_real_parent_file, $_wp_submenu_nopriv,
		$_registered_pages, $_parent_pages;

	$menu_slug   = plugin_basename( $menu_slug );
	$parent_slug = plugin_basename( $parent_slug );

	if ( isset( $_wp_real_parent_file[ $parent_slug ] ) ) {
		$parent_slug = $_wp_real_parent_file[ $parent_slug ];
	}

	if ( ! current_user_can( $capability ) ) {
		$_wp_submenu_nopriv[ $parent_slug ][ $menu_slug ] = true;
		return false;
	}

	/*
	 * If the parent doesn't already have a submenu, add a link to the parent
	 * as the first item in the submenu. If the submenu file is the same as the
	 * parent file someone is trying to link back to the parent manually. In
	 * this case, don't automatically add a link back to avoid duplication.
	 */
	if ( ! isset( $submenu[ $parent_slug ] ) &amp;&amp; $menu_slug !== $parent_slug ) {
		foreach ( (array) $menu as $parent_menu ) {
			if ( $parent_menu[2] === $parent_slug &amp;&amp; current_user_can( $parent_menu[1] ) ) {
				$submenu[ $parent_slug ][] = array_slice( $parent_menu, 0, 4 );
			}
		}
	}

	$new_sub_menu = array( $menu_title, $capability, $menu_slug, $page_title );

	if ( null !== $position &amp;&amp; ! is_numeric( $position ) ) {
		_doing_it_wrong(
			__FUNCTION__,
			sprintf(
				/* translators: %s: add_submenu_page() */
				__( 'The seventh parameter passed to %s should be numeric representing menu position.' ),
				'&lt;code&gt;add_submenu_page()&lt;/code&gt;'
			),
			'5.3.0'
		);
		$position = null;
	}

	if (
		null === $position ||
		( ! isset( $submenu[ $parent_slug ] ) || $position &gt;= count( $submenu[ $parent_slug ] ) )
	) {
		$submenu[ $parent_slug ][] = $new_sub_menu;
	} else {
		// Test for a negative position.
		$position = max( $position, 0 );
		if ( 0 === $position ) {
			// For negative or `0` positions, prepend the submenu.
			array_unshift( $submenu[ $parent_slug ], $new_sub_menu );
		} else {
			$position = absint( $position );
			// Grab all of the items before the insertion point.
			$before_items = array_slice( $submenu[ $parent_slug ], 0, $position, true );
			// Grab all of the items after the insertion point.
			$after_items = array_slice( $submenu[ $parent_slug ], $position, null, true );
			// Add the new item.
			$before_items[] = $new_sub_menu;
			// Merge the items.
			$submenu[ $parent_slug ] = array_merge( $before_items, $after_items );
		}
	}

	// Sort the parent array.
	ksort( $submenu[ $parent_slug ] );

	$hookname = get_plugin_page_hookname( $menu_slug, $parent_slug );
	if ( ! empty( $callback ) &amp;&amp; ! empty( $hookname ) ) {
		add_action( $hookname, $callback );
	}

	$_registered_pages[ $hookname ] = true;

	/*
	 * Backward-compatibility for plugins using add_management_page().
	 * See wp-admin/admin.php for redirect from edit.php to tools.php.
	 */
	if ( 'tools.php' === $parent_slug ) {
		$_registered_pages[ get_plugin_page_hookname( $menu_slug, 'edit.php' ) ] = true;
	}

	// No parent as top level.
	$_parent_pages[ $menu_slug ] = $parent_slug;

	return $hookname;
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-admin/includes/plugin.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-admin/includes/plugin.php#L1473">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-admin/includes/plugin.php#L1473-L1564">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_plugin_page_hookname/">get_plugin_page_hookname()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Gets the hook name for the administrative page of a plugin.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/plugin_basename/">plugin_basename()</a><code>wp-includes/plugin.php</code></td><td><p>Gets the basename of a plugin.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/current_user_can/">current_user_can()</a><code>wp-includes/capabilities.php</code></td><td><p>Returns whether the current user has the specified capability.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_doing_it_wrong/">_doing_it_wrong()</a><code>wp-includes/functions.php</code></td><td><p>Marks something as being incorrectly called.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/absint/">absint()</a><code>wp-includes/load.php</code></td><td><p>Converts a value to non-negative integer.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_action/">add_action()</a><code>wp-includes/plugin.php</code></td><td><p>Adds a callback function to an action hook.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 4 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/_add_plugin_file_editor_to_tools/">_add_plugin_file_editor_to_tools()</a><code>wp-admin/menu.php</code></td><td><p>Adds the ‘Plugin File Editor’ menu item after the ‘Themes File Editor’ in Tools for block themes.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/add_management_page/">add_management_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Tools main menu.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/add_options_page/">add_options_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Settings main menu.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/add_theme_page/">add_theme_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Appearance main menu.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/add_plugins_page/">add_plugins_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Plugins main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_users_page/">add_users_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Users/Profile main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_dashboard_page/">add_dashboard_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Dashboard main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_posts_page/">add_posts_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Posts main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_media_page/">add_media_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Media main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_links_page/">add_links_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Links main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_pages_page/">add_pages_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Pages main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_comments_page/">add_comments_page()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Adds a submenu page to the Comments main menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_add_themes_utility_last/">_add_themes_utility_last()</a><code>wp-admin/menu.php</code></td><td><p>Adds the ‘Theme File Editor’ menu item to the bottom of the Appearance (non-block themes) or Tools (block themes) menu.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_add_post_type_submenus/">_add_post_type_submenus()</a><code>wp-includes/post.php</code></td><td><p>Adds submenus for post types.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 9 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.3.0/">5.3.0</a></td><td><span class="since-description">Added the <code>$position</code> parameter.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/1.5.0/">1.5.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-jakeparis even thread-odd thread-alt depth-1" data-comment-id="1404" id="comment-1404">
<article class="comment-body" id="div-comment-1404">
<a class="screen-reader-text" href="#comment-content-1404">Skip to note 16 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1404">
<p>Slugs for $parent_slug (first parameter)</p>
<p><strong>Dashboard</strong>: ‘index.php’<br>
<strong>Posts</strong>: ‘edit.php’<br/>
<strong>Media</strong>: ‘upload.php’<br/>
<strong>Pages</strong>: ‘edit.php?post_type=page’<br/>
<strong>Comments</strong>: ‘edit-comments.php’<br/>
<strong>Custom Post Types</strong>: ‘edit.php?post_type=your_post_type’<br/>
<strong>Appearance</strong>: ‘themes.php’<br/>
<strong>Plugins</strong>: ‘plugins.php’<br/>
<strong>Users</strong>: ‘users.php’<br/>
<strong>Tools</strong>: ‘tools.php’<br/>
<strong>Settings</strong>: ‘options-general.php’<br/>
<strong><i>Network</i> Settings</strong>: ‘settings.php’</br></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1404">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-christinablust odd alt thread-even depth-1" data-comment-id="1261" id="comment-1261">
<article class="comment-body" id="div-comment-1261">
<a class="screen-reader-text" href="#comment-content-1261">Skip to note 17 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1261">
<p><strong>Adding a submenu page to a custom post type</strong><br/>
If you want to add a submenu type to a custom post type, such as a reference page for a custom post type created by a plugin, you can use for the <code>$parent_slug</code> parameter whatever you see up top on the “All Posts” view for that post type. For instance, for a custom post type “Book,” the <code>$parent_slug</code> could be <code>'edit.php?post_type=book'</code>.</p>
<p><strong>Example:</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Adds a submenu page under a custom post type parent.
 */
function books_register_ref_page() {
    add_submenu_page(
        'edit.php?post_type=book',
        __( 'Books Shortcode Reference', 'textdomain' ),
        __( 'Shortcode Reference', 'textdomain' ),
        'manage_options',
        'books-shortcode-ref',
        'books_ref_page_callback'
    );
}

/**
 * Display callback for the submenu page.
 */
function books_ref_page_callback() { 
    ?&gt;
    &lt;div class="wrap"&gt;
        &lt;h1&gt;&lt;?php _e( 'Books Shortcode Reference', 'textdomain' ); ?&gt;&lt;/h1&gt;
        &lt;p&gt;&lt;?php _e( 'Helpful stuff here', 'textdomain' ); ?&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;?php
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1261">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-odd thread-alt depth-1" data-comment-id="446" id="comment-446">
<article class="comment-body" id="div-comment-446">
<a class="screen-reader-text" href="#comment-content-446">Skip to note 18 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-446">
<p><strong>Inside menu created with <a href="https://developer.notmatt.press/reference/functions/add_menu_page/" rel="function">add_menu_page()</a> </strong><br/>
If you are attempting to add a submenu page to a menu page created via <code>add_menu_page()</code> the first submenu page will be a duplicate of the parent <code>add_menu_page()</code>.</p>
<p>If you want a submenu page in this scenario, you should first create a duplicate of your <code>add_menu_page()</code> and then add your <code>add_submenu_page()</code>:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_menu_page('My Custom Page', 'My Custom Page', 'manage_options', 'my-top-level-slug');
add_submenu_page( 'my-top-level-slug', 'My Custom Page', 'My Custom Page',
	'manage_options', 'my-top-level-slug');
add_submenu_page( 'my-top-level-slug', 'My Custom Submenu Page', 'My Custom Submenu Page',
	'manage_options', 'my-secondary-slug');</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-446">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-mostafas1990 odd alt thread-even depth-1" data-comment-id="1957" id="comment-1957">
<article class="comment-body" id="div-comment-1957">
<a class="screen-reader-text" href="#comment-content-1957">Skip to note 19 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1957">
<p><strong>Example submenu with php class</strong><strong></strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Sub menu class
 *
 * @author Mostafa &lt;mostafa.soufi@hotmail.com&gt;
 */
class Sub_menu {

	/**
	 * Autoload method
	 * @return void
	 */
	public function __construct() {
		add_action( 'admin_menu', array(&amp;$this, 'register_sub_menu') );
	}

	/**
	 * Register submenu
	 * @return void
	 */
	public function register_sub_menu() {
		add_submenu_page( 
			'options-general.php', 'Submenu title', 'Submenu title', 'manage_options', 'submenu-page', array(&amp;$this, 'submenu_page_callback')
		);
	}

	/**
	 * Render submenu
	 * @return void
	 */
	public function submenu_page_callback() {
		echo '&lt;div class="wrap"&gt;';
		echo '&lt;h2&gt;Submenu title&lt;/h2&gt;';
		echo '&lt;/div&gt;';
	}

}

new Sub_menu();</code></pre>
<p></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-1957">
<ul class="children">
<li class="comment byuser comment-author-tjnowell even depth-2" data-comment-id="6452" id="comment-6452">
<article class="comment-body" id="div-comment-6452">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6452">
<div>The &amp; in the add_action is unnecessary here, and a holdover from PHP v4 which hasn’t been supported in decades. It should be removed</div>
<div><a class="url" href="https://profiles.wordpress.org/tjnowell/" rel="external nofollow">Tom J Nowell</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_submenu_page/#comment-6452"><time datetime="2023-04-22T17:12:43+00:00">2 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="445" id="comment-445">
<article class="comment-body" id="div-comment-445">
<a class="screen-reader-text" href="#comment-content-445">Skip to note 20 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-445">
<p><strong>Example</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action('admin_menu', 'wpdocs_register_my_custom_submenu_page');

function wpdocs_register_my_custom_submenu_page() {
	add_submenu_page(
		'tools.php',
		'My Custom Submenu Page',
		'My Custom Submenu Page',
		'manage_options',
		'my-custom-submenu-page',
		'wpdocs_my_custom_submenu_page_callback' );
}

function wpdocs_my_custom_submenu_page_callback() {
	echo '&lt;div class="wrap"&gt;&lt;div id="icon-tools" class="icon32"&gt;&lt;/div&gt;';
		echo '&lt;h2&gt;My Custom Submenu Page&lt;/h2&gt;';
	echo '&lt;/div&gt;';
}</code></pre>
<p>To hide your submenu link from a top level menu item to which it belongs you would instead do</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action('admin_menu', 'wpdocs_register_my_custom_submenu_page');

function wpdocs_register_my_custom_submenu_page() {
	add_submenu_page( 
		null,   //or 'options.php'
		'My Custom Submenu Page',
		'My Custom Submenu Page',
		'manage_options',
		'my-custom-submenu-page',
		'my_custom_submenu_page_callback',
	);
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="2" id="feedback-445">
<ul class="children">
<li class="comment byuser comment-author-ancientro even depth-2" data-comment-id="5818" id="comment-5818">
<article class="comment-body" id="div-comment-5818">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5818">
<div>When using <code>null</code> as the <code>$parent_slug</code>, the <code>$page_title</code> won’t be properly applied on the page, it will be empty. This can be fixed through the <code><a href="https://developer.notmatt.press/reference/hooks/admin_title/">admin_title</a></code> filter – Use the <code><a href="https://developer.notmatt.press/reference/functions/get_current_screen/">get_current_screen</a></code> function to verify if the ID belongs to your page, then modify the title accordingly.</div>
<div><a class="url" href="https://profiles.wordpress.org/ancientro/" rel="external nofollow">ancientro</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_submenu_page/#comment-5818"><time datetime="2022-05-08T17:52:28+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
<li class="comment byuser comment-author-swissspidy odd alt depth-2" data-comment-id="6903" id="comment-6903">
<article class="comment-body" id="div-comment-6903">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6903">
<div>Passing `null` is not supported by core and may lead to undefined behavior and unexpected PHP warnings.</div>
<div><a class="url" href="https://profiles.wordpress.org/swissspidy/" rel="external nofollow">Pascal Birchler</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_submenu_page/#comment-6903"><time datetime="2024-02-12T13:53:03+00:00">12 months ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-isabel104 even thread-even depth-1" data-comment-id="4596" id="comment-4596">
<article class="comment-body" id="div-comment-4596">
<a class="screen-reader-text" href="#comment-content-4596">Skip to note 21 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4596">
<p>Regarding the 1st note in the <a href="https://developer.notmatt.press/reference/functions/add_submenu_page/#notes">More Information section above</a>, you may also run into the “Sorry, you are not allowed to access this page.” message even if you’ve hooked correctly into the <code>admin_menu</code> hook. This error message will happen if all of these are true:</p>
<ul>
<li>Your parent page is a custom page that you added using <code>add_menu_page</code>, <strong>and</strong></li>
<li>That parent page was created in another plugin, not the same plugin that is creating the submenu page, <strong>and</strong></li>
<li> You didn’t add a lower priority to the <code>admin_menu</code> hook for the <code>add_submenu_page</code> call, so the submenu page may be fired before the parent page–causing an error.</li>
</ul>
<p><strong>Solution:</strong> Add a lower priority, such as 99, to the action that creates the submenu page. For example:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">add_action( 'admin_menu', 'wpdocs_register_my_custom_submenu_page', 99 );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-4596">
<ul class="children">
<li class="comment byuser comment-author-davidhbrown odd alt depth-2" data-comment-id="7177" id="comment-7177">
<article class="comment-body" id="div-comment-7177">
<div class="wporg-has-embedded-code comment-content" id="comment-content-7177">
<div>Thank you so much, Isabel104! Another symptom I noticed is that the links to the submenu pages that weren’t working were just <code>.../wp-admin/<em>menu_slug</em></code> Once I fixed this as described here, they were the expected <code>.../wp-admin/admin.php?page=<em>menu_slug</em></code></div>
<div><a class="url" href="https://profiles.wordpress.org/davidhbrown/" rel="external nofollow">David Brown</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_submenu_page/#comment-7177"><time datetime="2024-10-07T15:40:39+00:00">4 months ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-logixtree even thread-odd thread-alt depth-1" data-comment-id="2081" id="comment-2081">
<article class="comment-body" id="div-comment-2081">
<a class="screen-reader-text" href="#comment-content-2081">Skip to note 22 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2081">
<p>When working with the Classes, You can add_submenu_page by following Make sure the callable is static function. </p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_submenu_page( 'admin_menu', 'Custom Menu', 'My Custom Menu', 'manage_options', 'my-custom-menu', __CLASS__ .'::menu_page_output' );

public menu_page_output() {
	//Menu Page output code
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2081">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-deepakrajpal odd alt thread-even depth-1" data-comment-id="6446" id="comment-6446">
<article class="comment-body" id="div-comment-6446">
<a class="screen-reader-text" href="#comment-content-6446">Skip to note 23 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6446">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_submenu_page( 
		null,
		'WP Docs Submenu Page',
		'WP Docs Submenu Page',
		'manage_options',
		'wpdocs-submenu-page',
		'wpdocs_submenu_page_callback',
	);</code></pre>
<p>In some special cases (like above) if you pass <code>null</code> in <code>parent_slug</code>, it will generates deprecation warnings when running under PHP 8.1, because the provided <code>$parent_slug</code> is passed to <code>strpos()</code> and to <code>str_replace()</code>. Instead use empty string if needed like:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_submenu_page( 
		'',   //or 'options.php'
		'WP Docs Submenu Page',
		'WP Docs Submenu Page',
		'manage_options',
		'wpdocs-submenu-page',
		'wpdocs_submenu_page_callback',
	);</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6446">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-ilovewpcom even thread-odd thread-alt depth-1" data-comment-id="1980" id="comment-1980">
<article class="comment-body" id="div-comment-1980">
<a class="screen-reader-text" href="#comment-content-1980">Skip to note 24 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1980">
<p>To anyone else troubleshooting an unexpected issue with this function, please PAY ATTENTION to the final argument, specifically the $function, it has to be a STRING, the name of the function, not a call to the function itself. Amateur mistake, I know, but sometimes you just make the simplest of errors.</p>
<p>Bad:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">add_menu_page('My Custom Page', 'My Custom Page', 'manage_options', 'my-top-level-slug', my-output-function());</code></pre>
<p>Good:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">add_menu_page('My Custom Page', 'My Custom Page', 'manage_options', 'my-top-level-slug', 'my-output-function');</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1980">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-tripflex odd alt thread-even depth-1" data-comment-id="2470" id="comment-2470">
<article class="comment-body" id="div-comment-2470">
<a class="screen-reader-text" href="#comment-content-2470">Skip to note 25 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2470">
<p>To further clarify adding a page without it showing in the menu/submenu, using this code:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action('admin_menu', 'wpdocs_register_my_custom_submenu_page');
 
function wpdocs_register_my_custom_submenu_page() {
    add_submenu_page( 
		'options.php',
        'My Custom Submenu Page',
        'My Custom Submenu Page',
        'manage_options',
        'my-custom-submenu-page',
        'my_custom_submenu_page_callback',
    );
}</code></pre>
<p>You would then access this page via this URL:<br/>
<code>/wp-admin/options.php?page=my-custom-submenu-page</code></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-2470">
<ul class="children">
<li class="comment byuser comment-author-capbussat even depth-2" data-comment-id="5485" id="comment-5485">
<article class="comment-body" id="div-comment-5485">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5485">
<div>If you want to create and admin menu for role editor or role author you can proceed in several ways: I chose to change capability access for some of the pages in a plugin from ‘manage_options’ to ‘edit_others_posts’ for editor role or to ‘edit_posts’ for author role. (You can keep other sub-menus with ‘manage_options’ . You can have different capabilities access in the same plugin.)  e.g. 
<pre class="wp-block-code"><code class="language-php" lang="php"> // for editor role add_menu_page('My Custom Page', 'My Custom Page', 'edit_others_posts', 'my-top-level-slug', 'my-output-function');  // for author role add_menu_page('My Custom Page', 'My Custom Page', 'edit_posts', 'my-top-level-slug', 'my_function_page') </code></pre>
<p>  Do not forget to test page function capabilities also in same way: </p>
<pre class="wp-block-code"><code class="language-php" lang="php"> function my_function_page(){ if ( !current_user_can( 'edit_others_posts' ) )  { 		wp_die( __( 'You can not access this page','my-plugin-name' ) ); 	}     echo ''.esc_html__('My Plugin Title','my-plugin-name').''; 	// other output } </code></pre>
</div>
<div><a class="url" href="https://profiles.wordpress.org/capbussat/" rel="external nofollow">capbussat</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/add_submenu_page/#comment-5485"><time datetime="2021-11-19T08:38:38+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-sleekdevigner odd alt thread-odd thread-alt depth-1" data-comment-id="3846" id="comment-3846">
<article class="comment-body" id="div-comment-3846">
<a class="screen-reader-text" href="#comment-content-3846">Skip to note 26 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3846">
<p>If you are working within a Class, the “function” parameter for the <strong>add_submenu_page</strong> should be an array, with the first value in the array being an instance of the class while the second value in the array will be a method in the object (given as a string).</p>
<p><em><strong>Example below</strong></em></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">Class WPDocs_AdminPage
{
    private $_plugin_name;

    private $_version;

    public function __construct( $plugin_name, $version )
    {
        $this-&gt;_plugin_name = $plugin_name;
        $this-&gt;_version = $version;
    }

    public function wpdocs_create_menu_and_submenu_page()
    {
        add_menu_page(
            'PAGE TITLE', 'MENU TITLE', 'CAPABILITY', 'menu_slug',
            array( $this, 'wpdocs_method_name_in_the_class' ), 'icon_url', 'POSITION'
        );
        add_submenu_page(
            'parent_slug', 'PAGE TITLE', 'MENU TITLE', 'CAPABILITY', 'menu_slug', 
            array( $this, 'wpdocs_method_name_in_the_class' )
        );
    }
}
$admin_page = new WPDocs_AdminPage;
add_action( 'admin_menu', array( $admin_page, 'wpdocs_create_menu_and_submenu_page' ) );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3846">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-rtpharry even thread-even depth-1" data-comment-id="4324" id="comment-4324">
<article class="comment-body" id="div-comment-4324">
<a class="screen-reader-text" href="#comment-content-4324">Skip to note 27 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4324">
<p>If you’re trying to put your custom sub page under a url like:</p>
<p><code>https://www.example.com/wp-admin/admin.php?page=custom-settings</code></p>
<p>Then you should just use the <code>custom-settings</code> for the parent slug.</p>
<p>In my use case I wanted to put a custom taxonomy under an ACF Options Page, and I used this:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">        add_submenu_page(
            'custom-settings',
            'Product Filter By Ambient Noise',
            'Product Filter By Ambient Noise',
            'manage_options',
            'edit-tags.php?taxonomy=product-filter-ambient-noise'
        );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4324">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-gerardreches odd alt thread-odd thread-alt depth-1" data-comment-id="6844" id="comment-6844">
<article class="comment-body" id="div-comment-6844">
<a class="screen-reader-text" href="#comment-content-6844">Skip to note 28 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6844">
<p>There is something missing which it is not obvious at all:</p>
<p>When a <strong>menu page</strong> has 0 or 1 <strong>submenu pages</strong>, no submenus will show up.</p>
<p>A <strong>menu page</strong> contains a page by itself.</p>
<p>A <strong>menu page</strong> that contains 1 <strong>submenu page</strong>, will appear as the same as if it didn’t have a submenu page. This is because the first-level menu element and the first second-level menu belonging to that first-level menu are meant to show the same page.</p>
<p>In other words, <strong>you can’t have a single submenu element</strong>, because that doesn’t seem to make sense for WordPress.</p>
<p><em>“Only one page? Just use the menu element itself then! No need for a dropdown.”</em></p>
<p>Notice that whenever you click on a menu item found in the admin interface that has subitems, it will load its first subitem. So the menu item and its first subitem are essentially the same. However, you are able to rename the subitem.</p>
<p>Some examples of this:</p>
<p> – Dashboard = Home<br/>
 – Posts = All Posts<br/>
 – Appearance = Themes<br/>
 – Tools = Available Tools</p>
<p>When a <strong>menu page contains 2 or more submenu pages</strong>, the <strong>submenu pages will become visible</strong>. That’s what most of us don’t know at first.</p>
<p>So the trick is to create a submenu page identical to the menu page (you can change the $page_title and $menu_title if you want) and then your additional submenu page:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">add_menu_page( '', 'Menu Item', $capability, 'parent_slug', $callback );
add_submenu_page( 'parent_slug', 'Page Title', 'First Subitem', $capability, 'parent_slug', $callback );
add_submenu_page( 'parent_slug', 'Second Page Title', 'Second Subitem', $capability, 'submenu_slug', $submenu_callback );</code></pre>
<p>As you can see, the `$page_title` for `add_menu_page` could even be left as an empty string (but not `null`), because the title used for the page will be the first submenu’s `$page_title`. But I recommend to introduce the same string for readability.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6844">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-charlestonsw even thread-even depth-1" data-comment-id="7224" id="comment-7224">
<article class="comment-body" id="div-comment-7224">
<a class="screen-reader-text" href="#comment-content-7224">Skip to note 29 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-7224">
<p><strong>Documentation Errror</strong></p>
<p>The position parameter CANNOT be a float as documented, the code will cast this to <a href="https://developer.notmatt.press/reference/functions/absint/" rel="function">absint()</a>  , dropping anything after the decimal.     Use int only.</p>
<p><strong>Functional Issue</strong></p>
<p>The position parameter is only useful within a stack of calls from a single module (class/method combo, plugin, etc.) as it only does a temporary in-memory sort based on the position int.  This is useless if you attach submenu entries from multiple classes or even different plugins that each add submenus to the same main menu.</p>
<p>The documentation and/or codebase needs to be updated.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-7224">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-huntermaster odd alt thread-odd thread-alt depth-1 bad-note" data-comment-id="813" id="comment-813">
<article class="comment-body" id="div-comment-813">
<a class="screen-reader-text" href="#comment-content-813">Skip to note 30 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-813">
<p>Parent slugs like ‘tools.php’ can be found in the old doc <a href="https://codex.wordpress.org/Function_Reference/add_submenu_page#Parameters" rel="nofollow ugc">https://codex.wordpress.org/Function_Reference/add_submenu_page#Parameters</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-813">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
