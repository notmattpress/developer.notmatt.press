
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/functions/">Functions</a></span><span class="is-current-page">wp_cache_set()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>wp_cache_set()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">wp_cache_set( <span class="arg-type">int|string</span> <span class="arg-name">$key</span>,  <span class="arg-type">mixed</span> <span class="arg-name">$data</span>,  <span class="arg-type">string</span> <span class="arg-name">$group</span> = <span class="arg-default">''</span>,  <span class="arg-type">int</span> <span class="arg-name">$expire</span> ): <span class="return-type">bool</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Saves the data to the cache.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>Differs from <a href="https://developer.notmatt.press/reference/functions/wp_cache_add/" rel="function">wp_cache_add()</a>  and <a href="https://developer.notmatt.press/reference/functions/wp_cache_replace/" rel="function">wp_cache_replace()</a>  in that it will always write data.</p>
<h3 class="is-toc-heading has-heading-5-font-size" id="see-also" tabindex="-1"><a href="#see-also">See also</a></h3><ul><li><a href="https://developer.notmatt.press/reference/classes/WP_Object_Cache/set">WP_Object_Cache::set()</a></li>
</ul></section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$key</code><span class="type"><span class="int">int</span>|<span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The cache key to use for retrieval later.</span></div></dd><dt><code>$data</code><span class="type"><span class="mixed">mixed</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">The contents to store in the cache.</span></div></dd><dt><code>$group</code><span class="type"><span class="string">string</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Where to group the cache contents. Enables the same key                           to be used across groups. </span></div><p class="default">Default:<code>''</code></p></dd><dt><code>$expire</code><span class="type"><span class="int">int</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">When to expire the cache contents, in seconds.<br/>
Default 0 (no expiration).</span></div></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">bool</span> True on success, false on failure.</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="108"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function wp_cache_set( $key, $data, $group = '', $expire = 0 ) {
	global $wp_object_cache;

	return $wp_object_cache-&gt;set( $key, $data, $group, (int) $expire );
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/cache.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-includes/cache.php#L108">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/cache.php#L108-L112">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_object_cache/set/">WP_Object_Cache::set()</a><code>wp-includes/class-wp-object-cache.php</code></td><td><p>Sets the data contents into the cache.</p>
</td></tr></tbody></table></figure></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_prime_network_option_caches/">wp_prime_network_option_caches()</a><code>wp-includes/option.php</code></td><td><p>Primes specific network options into the cache with a single database query.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_textdomain_registry/get_language_files_from_path/">WP_Textdomain_Registry::get_language_files_from_path()</a><code>wp-includes/class-wp-textdomain-registry.php</code></td><td><p>Retrieves translation files from the specified path.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_prime_option_caches/">wp_prime_option_caches()</a><code>wp-includes/option.php</code></td><td><p>Primes specific options into the cache with a single database query.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_set_option_autoload_values/">wp_set_option_autoload_values()</a><code>wp-includes/option.php</code></td><td><p>Sets the autoload values for multiple options in the database.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_get_theme_data_template_parts/">wp_get_theme_data_template_parts()</a><code>wp-includes/global-styles-and-settings.php</code></td><td><p>Returns the metadata for the template parts defined by the theme.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_cache_set_last_changed/">wp_cache_set_last_changed()</a><code>wp-includes/functions.php</code></td><td><p>Sets last changed date for the specified cache group to now.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_get_global_styles_custom_css/">wp_get_global_styles_custom_css()</a><code>wp-includes/deprecated.php</code></td><td><p>Gets the global styles custom CSS from theme.json.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_get_global_styles_svg_filters/">wp_get_global_styles_svg_filters()</a><code>wp-includes/deprecated.php</code></td><td><p>Returns a string containing the SVGs to be referenced as filters (duotone).</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_get_global_settings/">wp_get_global_settings()</a><code>wp-includes/global-styles-and-settings.php</code></td><td><p>Gets the settings resulting of merging core, theme, and user data.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_get_global_stylesheet/">wp_get_global_stylesheet()</a><code>wp-includes/global-styles-and-settings.php</code></td><td><p>Returns the stylesheet resulting of merging core, theme, and user data.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_find_post_by_old_slug/">_find_post_by_old_slug()</a><code>wp-includes/query.php</code></td><td><p>Find the post ID for redirecting an old slug.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_find_post_by_old_date/">_find_post_by_old_date()</a><code>wp-includes/query.php</code></td><td><p>Find the post ID for redirecting an old date.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_privacy_requests_table/get_request_counts/">WP_Privacy_Requests_Table::get_request_counts()</a><code>wp-admin/includes/class-wp-privacy-requests-table.php</code></td><td><p>Counts the number of requests for each status.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_embed/find_oembed_post_id/">WP_Embed::find_oembed_post_id()</a><code>wp-includes/class-wp-embed.php</code></td><td><p>Finds the oEmbed cache post ID for a given cache key.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_customize_manager/find_changeset_post_id/">WP_Customize_Manager::find_changeset_post_id()</a><code>wp-includes/class-wp-customize-manager.php</code></td><td><p>Finds the changeset post ID for a given changeset UUID.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_term_query/get_terms/">WP_Term_Query::get_terms()</a><code>wp-includes/class-wp-term-query.php</code></td><td><p>Retrieves the query results.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_site/get_details/">WP_Site::get_details()</a><code>wp-includes/class-wp-site.php</code></td><td><p>Retrieves the details for this site.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/update_network_option/">update_network_option()</a><code>wp-includes/option.php</code></td><td><p>Updates the value of a network option that was already added.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_network_option/">add_network_option()</a><code>wp-includes/option.php</code></td><td><p>Adds a new network option.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/delete_network_option/">delete_network_option()</a><code>wp-includes/option.php</code></td><td><p>Removes a network option by name.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_network_option/">get_network_option()</a><code>wp-includes/option.php</code></td><td><p>Retrieves a network’s option value based on the option name.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_ms_sites_list_table/column_users/">WP_MS_Sites_List_Table::column_users()</a><code>wp-admin/includes/class-wp-ms-sites-list-table.php</code></td><td><p>Handles the users column output.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_plugins/">get_plugins()</a><code>wp-admin/includes/plugin.php</code></td><td><p>Checks the plugins directory and retrieve all plugin files with plugin data.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_get_archives/">wp_get_archives()</a><code>wp-includes/general-template.php</code></td><td><p>Displays archive links based on type and format.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_calendar/">get_calendar()</a><code>wp-includes/general-template.php</code></td><td><p>Displays calendar with days that have posts as links.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_query/get_posts/">WP_Query::get_posts()</a><code>wp-includes/class-wp-query.php</code></td><td><p>Retrieves an array of posts based on query variables.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/is_blog_installed/">is_blog_installed()</a><code>wp-includes/functions.php</code></td><td><p>Determines whether WordPress is already installed.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/is_object_in_term/">is_object_in_term()</a><code>wp-includes/taxonomy.php</code></td><td><p>Determines if the given object is associated with any of the given terms.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_objects_in_term/">get_objects_in_term()</a><code>wp-includes/taxonomy.php</code></td><td><p>Retrieves object IDs of valid taxonomy and term.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_adjacent_post/">get_adjacent_post()</a><code>wp-includes/link-template.php</code></td><td><p>Retrieves the adjacent post.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/set_site_transient/">set_site_transient()</a><code>wp-includes/option.php</code></td><td><p>Sets/updates the value of a site transient.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/set_transient/">set_transient()</a><code>wp-includes/option.php</code></td><td><p>Sets/updates the value of a transient.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/update_option/">update_option()</a><code>wp-includes/option.php</code></td><td><p>Updates the value of an option that was already added.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_option/">add_option()</a><code>wp-includes/option.php</code></td><td><p>Adds a new option.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/delete_option/">delete_option()</a><code>wp-includes/option.php</code></td><td><p>Removes an option by name. Prevents removal of protected WordPress options.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_option/">get_option()</a><code>wp-includes/option.php</code></td><td><p>Retrieves an option value based on an option name.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_get_last_post_time/">_get_last_post_time()</a><code>wp-includes/post.php</code></td><td><p>Gets the timestamp of the last time any post was modified or published.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_page_by_path/">get_page_by_path()</a><code>wp-includes/post.php</code></td><td><p>Retrieves a page given its path.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_count_posts/">wp_count_posts()</a><code>wp-includes/post.php</code></td><td><p>Counts number of posts of a post type and if user has permissions to view.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_count_attachments/">wp_count_attachments()</a><code>wp-includes/post.php</code></td><td><p>Counts number of attachments for the mime type(s).</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_blog_id_from_url/">get_blog_id_from_url()</a><code>wp-includes/ms-functions.php</code></td><td><p>Gets a blog’s numeric ID from its URL.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_bookmarks/">get_bookmarks()</a><code>wp-includes/bookmark.php</code></td><td><p>Retrieves the list of bookmarks.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_blog_details/">get_blog_details()</a><code>wp-includes/ms-blogs.php</code></td><td><p>Retrieves the details for a blog from the blogs table and blog options.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_count_comments/">wp_count_comments()</a><code>wp-includes/comment.php</code></td><td><p>Retrieves the total comment counts for the whole site or a single post.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_lastcommentmodified/">get_lastcommentmodified()</a><code>wp-includes/comment.php</code></td><td><p>Retrieves the date the last comment was modified.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 40 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.0.0/">2.0.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-wzislam odd alt thread-even depth-1" data-comment-id="2636" id="comment-2636">
<article class="comment-body" id="div-comment-2636">
<a class="screen-reader-text" href="#comment-content-2636">Skip to note 3 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2636">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function prefix_get_post_count( $post_status = 'publish' ) {
    $cache_key = 'prefix_post_count_'. $post_status;
    $_posts = wp_cache_get( $cache_key );
    if ( false === $_posts ) {
        $_posts = $wpdb-&gt;get_var(
                    $wpdb-&gt;prepare(
                        "SELECT COUNT(*) FROM $wpdb-&gt;posts WHERE post_type = 'post' AND post_status = %s",
                        $post_status
                    ));
 
        wp_cache_set( $cache_key, $_posts );
    }
 
    return $_posts;
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2636">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-mahdiyazdani even thread-odd thread-alt depth-1" data-comment-id="6131" id="comment-6131">
<article class="comment-body" id="div-comment-6131">
<a class="screen-reader-text" href="#comment-content-6131">Skip to note 4 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6131">
<p>Requests made to third-party endpoints should be cached, regardless of being synchronous or asynchronous. Not doing so will result in your site’s load time depending on an unreliable API response!</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Retrieve posts from another blog and cache the response body.
 *
 * @return   string   Body of the response. Empty string if no body or incorrect parameter given.
 */
function wpdocs_get_posts_from_other_blog() {
    $posts = wp_cache_get( 'wpdocs_other_blog_posts' );
    
    if ( false === $posts ) {
        $request = wp_remote_get( 'https://jsonplaceholder.typicode.com/posts' );
        $posts = wp_remote_retrieve_body( $request );

        wp_cache_set( 'wpdocs_other_blog_posts', $posts, '', HOUR_IN_SECONDS );
    }

    return $posts;
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-6131">
<ul class="children">
<li class="comment byuser comment-author-crstauf odd alt depth-2" data-comment-id="6135" id="comment-6135">
<article class="comment-body" id="div-comment-6135">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6135">
<div>Keep in mind this uses the object cache, so if your server doesn’t have an object cache, better to use the transient functions. Transients are stored in object cache anyway, so transients provide wider compatibility.</div>
<div><a class="url" href="https://profiles.notmatt.press/crstauf/" rel="external nofollow">crstauf</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_cache_set/#comment-6135"><time datetime="2022-10-14T21:16:54+00:00">2 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
