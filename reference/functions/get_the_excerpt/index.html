
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">get_the_excerpt()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>get_the_excerpt()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">get_the_excerpt( <span class="arg-type">int|WP_Post</span> <span class="arg-name">$post</span> = <span class="arg-default">null</span> ): <span class="return-type">string</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Retrieves the post excerpt.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$post</code><span class="type"><span class="int">int</span>|<span class="WP_Post"><a href="https://developer.notmatt.press/reference/classes/wp_post/" rel="class">WP_Post</a></span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Post ID or <a href="https://developer.notmatt.press/reference/classes/wp_post/" rel="class">WP_Post</a> object. Default is global $post.</span></div><p class="default">Default:<code>null</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">string</span> Post excerpt.</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="413"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function get_the_excerpt( $post = null ) {
	if ( is_bool( $post ) ) {
		_deprecated_argument( __FUNCTION__, '2.3.0' );
	}

	$post = get_post( $post );
	if ( empty( $post ) ) {
		return '';
	}

	if ( post_password_required( $post ) ) {
		return __( 'There is no excerpt because this is a protected post.' );
	}

	/**
	 * Filters the retrieved post excerpt.
	 *
	 * @since 1.2.0
	 * @since 4.5.0 Introduced the `$post` parameter.
	 *
	 * @param string  $post_excerpt The post excerpt.
	 * @param WP_Post $post         Post object.
	 */
	return apply_filters( 'get_the_excerpt', $post-&gt;post_excerpt, $post );
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/post-template.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/post-template.php#L413">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/post-template.php#L413-L437">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-hooks"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="hooks" tabindex="-1"><a href="#hooks">Hooks</a></h2> <dl><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/get_the_excerpt/"><span class="hook-func">apply_filters</span>( ‘get_the_excerpt’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$post_excerpt</span></nobr>,  <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr> )</a></dt><dd><p>Filters the retrieved post excerpt.</p>
</dd></dl></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/post_password_required/">post_password_required()</a><code>wp-includes/post-template.php</code></td><td><p>Determines whether the post requires password and whether a correct password has been provided.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/_deprecated_argument/">_deprecated_argument()</a><code>wp-includes/functions.php</code></td><td><p>Marks a function argument as deprecated and inform when it has been used.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/apply_filters/">apply_filters()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to a filter hook.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_post/">get_post()</a><code>wp-includes/post.php</code></td><td><p>Retrieves post data given a post ID or post object.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 2 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/the_excerpt_embed/">the_excerpt_embed()</a><code>wp-includes/embed.php</code></td><td><p>Displays the post excerpt for the embed template.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_posts_list_table/column_title/">WP_Posts_List_Table::column_title()</a><code>wp-admin/includes/class-wp-posts-list-table.php</code></td><td><p>Handles the title column output.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/the_excerpt_rss/">the_excerpt_rss()</a><code>wp-includes/feed.php</code></td><td><p>Displays the post excerpt for the feed.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/the_excerpt/">the_excerpt()</a><code>wp-includes/post-template.php</code></td><td><p>Displays the post excerpt.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/4.5.0/">4.5.0</a></td><td><span class="since-description">Introduced the <code>$post</code> parameter.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/0.71/">0.71</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-msaari even thread-odd thread-alt depth-1" data-comment-id="2457" id="comment-2457">
<article class="comment-body" id="div-comment-2457">
<a class="screen-reader-text" href="#comment-content-2457">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2457">
<p>If this function is used outside The Loop and the post doesn’t have a custom excerpt, this function will use <a href="https://developer.notmatt.press/reference/functions/wp_trim_excerpt/">wp_trim_excerpt()</a> to generate an excerpt. That function uses <a href="https://developer.notmatt.press/reference/functions/get_the_content/">get_the_content()</a>, which must be used with The Loop and will cause problems if <a href="https://developer.notmatt.press/reference/functions/get_the_excerpt/" rel="function">get_the_excerpt()</a>  is being used outside The Loop. In order to avoid the issues, use <a href="https://developer.notmatt.press/reference/functions/setup_postdata/">setup_postdata()</a> prior to calling <a href="https://developer.notmatt.press/reference/functions/get_the_excerpt/" rel="function">get_the_excerpt()</a>  to set up the global $post object.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2457">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-hearvox odd alt thread-even depth-1" data-comment-id="1969" id="comment-1969">
<article class="comment-body" id="div-comment-1969">
<a class="screen-reader-text" href="#comment-content-1969">Skip to note 9 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1969">
<p><strong>Use excerpt for HTML meta description</strong><br/>
[html]<br/>
&lt;!– Use Post excerpt for meta description.  –&gt;<br/>
&lt;?php if ( <a href="https://developer.notmatt.press/reference/functions/is_single/" rel="function">is_single()</a>  ) { ?&gt;<br/>
&lt;meta name="description" content="&lt;?php echo wp_strip_all_tags( <a href="https://developer.notmatt.press/reference/functions/get_the_excerpt/" rel="function">get_the_excerpt()</a> , true ); ?&gt;" /&gt;<br/>
&lt;?php } ?&gt;<br/>
[/html]</p>
<p>(Setting the second parameter of <a href="https://developer.notmatt.press/reference/functions/wp_strip_all_tags/">wp_strip_all_tags</a> to true removes left over line breaks and whitespace chars.)</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1969">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-jonm511 even thread-odd thread-alt depth-1" data-comment-id="3320" id="comment-3320">
<article class="comment-body" id="div-comment-3320">
<a class="screen-reader-text" href="#comment-content-3320">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3320">
<p><strong>Limit Manual Excerpt displayed on Homepage to 260 characters but truncate after the last word</strong></p>
<p>This code snippet must be placed in the theme where <code>the_excerpt()</code> is located.  This is for modifing manually entered excerpts NOT automatic ones WordPress will grab from the content.</p>
<p>It will display the first 260 characters of a manually entered excerpt but instead of ending on the 260th character it will truncate after the closest word. To change the number of characters simply change the value ‘260’ to another number.  Remember to remove <code>the_excerpt()</code> in your theme and replace it with this:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$excerpt = get_the_excerpt();

$excerpt = substr($excerpt, 0, 260);
$result = substr($excerpt, 0, strrpos($excerpt, ' '));
echo $result;
?&gt; </code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3320">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-prodeveloper odd alt thread-even depth-1" data-comment-id="2095" id="comment-2095">
<article class="comment-body" id="div-comment-2095">
<a class="screen-reader-text" href="#comment-content-2095">Skip to note 11 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2095">
<p>Use </p>
<pre class="wp-block-code"><code class="language-php" lang="php">has_excerpt()</code></pre>
<p> to prevent a Notice: Undefined offset: -1 in post-template.php</p>
<pre class="wp-block-code"><code class="language-php" lang="php">$excerpt = '';
if (has_excerpt()) {
    $excerpt = wp_strip_all_tags(get_the_excerpt());
}</code></pre>
<p>Otherwise, you could get an Undefined offset -1 warning, do not try to get_excerpt directly to check whether with isset or NULL, you’ll get an undefined offset -1 back</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-2095">
<ul class="children">
<li class="comment byuser comment-author-gwynethllewelyn even depth-2" data-comment-id="6832" id="comment-6832">
<article class="comment-body" id="div-comment-6832">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6832">
<div>Is this still true by the end of 2023? It’s just that <code>has_excerpt()</code> relates to the <em>user’s</em> manually inserted excerpt (the so-called <em>teaser</em>), while <code>get_the_excerpt()</code> allegedly either returns the user’s teaser excerpt if it exists, <em>or</em> automatically generates an automated excerpt (with tags stripped). At least, that’s how it looks like when viewing the source code as of writing this.</div>
<div><a class="url" href="https://profiles.wordpress.org/gwynethllewelyn/" rel="external nofollow">Gwyneth Llewelyn</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/get_the_excerpt/#comment-6832"><time datetime="2023-12-28T11:12:36+00:00">1 year ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-atta98 odd alt thread-odd thread-alt depth-1" data-comment-id="5705" id="comment-5705">
<article class="comment-body" id="div-comment-5705">
<a class="screen-reader-text" href="#comment-content-5705">Skip to note 12 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5705">
<p><strong>Expandable excerpt function</strong></p>
<p><strong>first the PHP</strong><br/>
Add this function in function.php </p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function expandable_excerpt($excerpt)
{
	$split = explode(" ", $excerpt); //convert string to array
	$len = count($split); //get number of words
	$words_to_show_first = 19; //Word to be dsiplayed first
	if ($len &gt; $words_to_show_first) { //check if it's longer the than first part

		$firsthalf = array_slice($split, 0, $words_to_show_first);
		$secondhalf = array_slice($split, $words_to_show_first, $len - 1);
		$output = '&lt;p class="event-excerpt" &gt;';
		$output .= implode(' ', $firsthalf) . '&lt;span class="see-more-text"&gt;...see more&lt;/span&gt;';

		$output .= '&lt;span class="excerpt-full hide"&gt;';
		$output .= ' ' . implode(' ', $secondhalf);
		$output .= '&lt;/span&gt;';
		$output .= '&lt;/p&gt;';
	} else {
		$output = '&lt;p class="event-excerpt"&gt;'  .   $excerpt . '&lt;/p&gt;';
	}
	return $output;
}</code></pre>
<p><strong>Required CSS</strong><br/>
CSS to simply hide elements when needed<br/>
<code>.excerpt-full.hide {<br/>
  display: none;<br/>
}<br/>
.see-more-text.hide {<br/>
  display: none;<br/>
}</code></p>
<p><strong>required JS</strong><br/>
script to add/remove css classes when needed</p>
<pre class="wp-block-code"><code class="language-js line-numbers" lang="js">const itemSeeMore = document.querySelectorAll(
  "p.event-excerpt&gt; span.see-more-text"
);
if (itemSeeMore) {
  itemSeeMore.forEach((item) =&gt; {
    item.addEventListener("click", () =&gt; {
      item.classList.toggle("hide");
      item.nextElementSibling.classList.toggle("hide");
    });
  });
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5705">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-shanemac10 even thread-even depth-1" data-comment-id="6965" id="comment-6965">
<article class="comment-body" id="div-comment-6965">
<a class="screen-reader-text" href="#comment-content-6965">Skip to note 13 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6965">
<p><strong>Fixing when <code>get_the_excerpt()</code> and <code>the_excerpt()</code> are showing Editor content, when the Editor has been turned off on the <code>post_type</code></strong></p>
<p>I ran into an issue with some legacy content in a custom post type, that originally had the content <code>'editor'</code> in the <code>register_post_type()</code> arguments <code>'supports' =&gt; (..., 'editor')</code>, but had since been removed in favor of using some custom fields to better standardize the content structure in the templates. This had the result of displaying vestigial content from the editor in the templates where <code>get_the_excerpt()</code> or <code>the_excerpt()</code> were called. The following is a filter to catch the <code>$post_excerpt</code> string before it gets returned, and to both check if <code>'editor'</code> is turned off on the <code>post_type</code>, and then try to find a suitable alternative field in <code>post_meta</code>. It borrows code from <code>wp_trim_excerpt()</code> to both trim length and then add the <code>[...]</code> as would be expected for the <code>get_the_excerpt()</code> and <code>the_excerpt()</code> results.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * WordPress get_the_excerpt() and the_excerpt() do not check if the 'editor' is turned off on the post_type or not,
 * so vestigial content can be displayed. This checks if the 'editor' is turned on for the $post-&gt;post_type, and tries 
 * to find a suitable alternative field if applicable.
 */
function wpdocs_custom_excerpt( $post_excerpt, $post ) {
	$supports_editor_content = post_type_supports( $post-&gt;post_type, 'editor' );

	if ( ! $supports_editor_content ) {
		$post_meta = get_post_meta( $post-&gt;ID );

		// Try to find alternative field to pull an excerpt replacement from...
		$post_excerpt = $post_meta['overview'][0] ?? $post_meta['description'][0] ?? ''; // &lt;-- Example: Customize this code here for your theme

		if ( '' !== $post_excerpt ) {
			// Trimming to excerpt_length via code lifted from wp_trim_excerpt...
			// Ref: <a href="https://developer.notmatt.press/reference/functions/wp_trim_excerpt/" rel="ugc">https://developer.notmatt.press/reference/functions/wp_trim_excerpt/</a>
			$excerpt_length = (int) _x( '55', 'excerpt_length' );
			$excerpt_length = (int) apply_filters( 'excerpt_length', $excerpt_length );
			$excerpt_more = apply_filters( 'excerpt_more', ' […]' );

			$post_excerpt = wp_trim_words( $post_excerpt, $excerpt_length, $excerpt_more );
		}

	}

	return is_string( $post_excerpt ) ? $post_excerpt : '';
}
add_filter( 'get_the_excerpt', 'wpdocs_custom_excerpt', 10, 2 );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6965">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="423" id="comment-423">
<article class="comment-body" id="div-comment-423">
<a class="screen-reader-text" href="#comment-content-423">Skip to note 14 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-423">
<p><strong>Example</strong><br/>
<code>get_the_excerpt()</code> can be used to retrieve and store the value in a variable, without outputting it to the page.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$my_excerpt = get_the_excerpt();
if ( '' != $my_excerpt ) {
	// Some string manipulation performed
}
echo $my_excerpt; // Outputs the processed value to the page
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-423">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
