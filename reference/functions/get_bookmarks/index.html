
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/functions/">Functions</a></span><span class="is-current-page">get_bookmarks()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>get_bookmarks()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">get_bookmarks( <span class="arg-type">string|array</span> <span class="arg-name">$args</span> = <span class="arg-default">''</span> ): <span class="return-type">object[]</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Retrieves the list of bookmarks.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>Attempts to retrieve from the cache first based on MD5 hash of arguments. If that fails, then the query will be built from the arguments and executed. The results will be stored to the cache.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$args</code><span class="type"><span class="string">string</span>|<span class="array">array</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">String or array of arguments to retrieve bookmarks.<br/>
<ul class="param-hash"><li><code>orderby</code> <span class="type">string</span><div class="desc">How to order the links by. Accepts <code>'id'</code>, <code>'link_id'</code>, <code>'name'</code>, <code>'link_name'</code>, <code>'url'</code>, <code>'link_url'</code>, <code>'visible'</code>, <code>'link_visible'</code>, <code>'rating'</code>, <code>'link_rating'</code>, <code>'owner'</code>, <code>'link_owner'</code>, <code>'updated'</code>, <code>'link_updated'</code>, <code>'notes'</code>, <code>'link_notes'</code>, <code>'description'</code>, <code>'link_description'</code>, <code>'length'</code> and <code>'rand'</code>.<br/>
When <code>$orderby</code> is <code>'length'</code>, orders by the character length of <code>'link_name'</code>. Default <code>'name'</code>.</div></li>
<li><code>order</code> <span class="type">string</span><div class="desc">Whether to order bookmarks in ascending or descending order.<br/>
Accepts <code>'ASC'</code> (ascending) or <code>'DESC'</code> (descending). Default <code>'ASC'</code>.</div></li>
<li><code>limit</code> <span class="type">int</span><div class="desc">Amount of bookmarks to display. Accepts any positive number or -1 for all. Default -1.</div></li>
<li><code>category</code> <span class="type">string</span><div class="desc">Comma-separated list of category IDs to include links from.<br/>
</div></li>
<li><code>category_name</code> <span class="type">string</span><div class="desc">Category to retrieve links for by name. </div></li>
<li><code>hide_invisible</code> <span class="type">int|bool</span><div class="desc">Whether to show or hide links marked as <code>'invisible'</code>. Accepts <code>1|true</code> or <code>0|false</code>. Default <code>1|true</code>.</div></li>
<li><code>show_updated</code> <span class="type">int|bool</span><div class="desc">Whether to display the time the bookmark was last updated.<br/>
Accepts <code>1|true</code> or <code>0|false</code>. Default <code>0|false</code>.</div></li>
<li><code>include</code> <span class="type">string</span><div class="desc">Comma-separated list of bookmark IDs to include. </div></li>
<li><code>exclude</code> <span class="type">string</span><div class="desc">Comma-separated list of bookmark IDs to exclude. </div></li>
<li><code>search</code> <span class="type">string</span><div class="desc">Search terms. Will be SQL-formatted with wildcards before and after and searched in <code>'link_url'</code>, <code>'link_name'</code> and <code>'link_description'</code>.<br/>
</div></li>
</ul>
</span></div><p class="default">Default:<code>''</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">object[]</span> List of bookmark row objects.</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="136"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function get_bookmarks( $args = '' ) {
	global $wpdb;

	$defaults = array(
		'orderby'        =&gt; 'name',
		'order'          =&gt; 'ASC',
		'limit'          =&gt; -1,
		'category'       =&gt; '',
		'category_name'  =&gt; '',
		'hide_invisible' =&gt; 1,
		'show_updated'   =&gt; 0,
		'include'        =&gt; '',
		'exclude'        =&gt; '',
		'search'         =&gt; '',
	);

	$parsed_args = wp_parse_args( $args, $defaults );

	$key   = md5( serialize( $parsed_args ) );
	$cache = wp_cache_get( 'get_bookmarks', 'bookmark' );

	if ( 'rand' !== $parsed_args['orderby'] &amp;&amp; $cache ) {
		if ( is_array( $cache ) &amp;&amp; isset( $cache[ $key ] ) ) {
			$bookmarks = $cache[ $key ];
			/**
			 * Filters the returned list of bookmarks.
			 *
			 * The first time the hook is evaluated in this file, it returns the cached
			 * bookmarks list. The second evaluation returns a cached bookmarks list if the
			 * link category is passed but does not exist. The third evaluation returns
			 * the full cached results.
			 *
			 * @since 2.1.0
			 *
			 * @see get_bookmarks()
			 *
			 * @param array $bookmarks   List of the cached bookmarks.
			 * @param array $parsed_args An array of bookmark query arguments.
			 */
			return apply_filters( 'get_bookmarks', $bookmarks, $parsed_args );
		}
	}

	if ( ! is_array( $cache ) ) {
		$cache = array();
	}

	$inclusions = '';
	if ( ! empty( $parsed_args['include'] ) ) {
		$parsed_args['exclude']       = '';  // Ignore exclude, category, and category_name params if using include.
		$parsed_args['category']      = '';
		$parsed_args['category_name'] = '';

		$inclinks = wp_parse_id_list( $parsed_args['include'] );
		if ( count( $inclinks ) ) {
			foreach ( $inclinks as $inclink ) {
				if ( empty( $inclusions ) ) {
					$inclusions = ' AND ( link_id = ' . $inclink . ' ';
				} else {
					$inclusions .= ' OR link_id = ' . $inclink . ' ';
				}
			}
		}
	}
	if ( ! empty( $inclusions ) ) {
		$inclusions .= ')';
	}

	$exclusions = '';
	if ( ! empty( $parsed_args['exclude'] ) ) {
		$exlinks = wp_parse_id_list( $parsed_args['exclude'] );
		if ( count( $exlinks ) ) {
			foreach ( $exlinks as $exlink ) {
				if ( empty( $exclusions ) ) {
					$exclusions = ' AND ( link_id &lt;&gt; ' . $exlink . ' ';
				} else {
					$exclusions .= ' AND link_id &lt;&gt; ' . $exlink . ' ';
				}
			}
		}
	}
	if ( ! empty( $exclusions ) ) {
		$exclusions .= ')';
	}

	if ( ! empty( $parsed_args['category_name'] ) ) {
		$parsed_args['category'] = get_term_by( 'name', $parsed_args['category_name'], 'link_category' );
		if ( $parsed_args['category'] ) {
			$parsed_args['category'] = $parsed_args['category']-&gt;term_id;
		} else {
			$cache[ $key ] = array();
			wp_cache_set( 'get_bookmarks', $cache, 'bookmark' );
			/** This filter is documented in wp-includes/bookmark.php */
			return apply_filters( 'get_bookmarks', array(), $parsed_args );
		}
	}

	$search = '';
	if ( ! empty( $parsed_args['search'] ) ) {
		$like   = '%' . $wpdb-&gt;esc_like( $parsed_args['search'] ) . '%';
		$search = $wpdb-&gt;prepare( ' AND ( (link_url LIKE %s) OR (link_name LIKE %s) OR (link_description LIKE %s) ) ', $like, $like, $like );
	}

	$category_query = '';
	$join           = '';
	if ( ! empty( $parsed_args['category'] ) ) {
		$incategories = wp_parse_id_list( $parsed_args['category'] );
		if ( count( $incategories ) ) {
			foreach ( $incategories as $incat ) {
				if ( empty( $category_query ) ) {
					$category_query = ' AND ( tt.term_id = ' . $incat . ' ';
				} else {
					$category_query .= ' OR tt.term_id = ' . $incat . ' ';
				}
			}
		}
	}
	if ( ! empty( $category_query ) ) {
		$category_query .= ") AND taxonomy = 'link_category'";
		$join            = " INNER JOIN $wpdb-&gt;term_relationships AS tr ON ($wpdb-&gt;links.link_id = tr.object_id) INNER JOIN $wpdb-&gt;term_taxonomy as tt ON tt.term_taxonomy_id = tr.term_taxonomy_id";
	}

	if ( $parsed_args['show_updated'] ) {
		$recently_updated_test = ', IF (DATE_ADD(link_updated, INTERVAL 120 MINUTE) &gt;= NOW(), 1,0) as recently_updated ';
	} else {
		$recently_updated_test = '';
	}

	$get_updated = ( $parsed_args['show_updated'] ) ? ', UNIX_TIMESTAMP(link_updated) AS link_updated_f ' : '';

	$orderby = strtolower( $parsed_args['orderby'] );
	$length  = '';
	switch ( $orderby ) {
		case 'length':
			$length = ', CHAR_LENGTH(link_name) AS length';
			break;
		case 'rand':
			$orderby = 'rand()';
			break;
		case 'link_id':
			$orderby = "$wpdb-&gt;links.link_id";
			break;
		default:
			$orderparams = array();
			$keys        = array( 'link_id', 'link_name', 'link_url', 'link_visible', 'link_rating', 'link_owner', 'link_updated', 'link_notes', 'link_description' );
			foreach ( explode( ',', $orderby ) as $ordparam ) {
				$ordparam = trim( $ordparam );

				if ( in_array( 'link_' . $ordparam, $keys, true ) ) {
					$orderparams[] = 'link_' . $ordparam;
				} elseif ( in_array( $ordparam, $keys, true ) ) {
					$orderparams[] = $ordparam;
				}
			}
			$orderby = implode( ',', $orderparams );
	}

	if ( empty( $orderby ) ) {
		$orderby = 'link_name';
	}

	$order = strtoupper( $parsed_args['order'] );
	if ( '' !== $order &amp;&amp; ! in_array( $order, array( 'ASC', 'DESC' ), true ) ) {
		$order = 'ASC';
	}

	$visible = '';
	if ( $parsed_args['hide_invisible'] ) {
		$visible = "AND link_visible = 'Y'";
	}

	$query  = "SELECT * $length $recently_updated_test $get_updated FROM $wpdb-&gt;links $join WHERE 1=1 $visible $category_query";
	$query .= " $exclusions $inclusions $search";
	$query .= " ORDER BY $orderby $order";
	if ( -1 !== $parsed_args['limit'] ) {
		$query .= ' LIMIT ' . absint( $parsed_args['limit'] );
	}

	$results = $wpdb-&gt;get_results( $query );

	if ( 'rand()' !== $orderby ) {
		$cache[ $key ] = $results;
		wp_cache_set( 'get_bookmarks', $cache, 'bookmark' );
	}

	/** This filter is documented in wp-includes/bookmark.php */
	return apply_filters( 'get_bookmarks', $results, $parsed_args );
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/bookmark.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-includes/bookmark.php#L136">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/bookmark.php#L136-L323">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-hooks"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="hooks" tabindex="-1"><a href="#hooks">Hooks</a></h2> <dl><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/get_bookmarks/"><span class="hook-func">apply_filters</span>( ‘get_bookmarks’,  <nobr><span class="arg-type">array</span> <span class="arg-name">$bookmarks</span></nobr>,  <nobr><span class="arg-type">array</span> <span class="arg-name">$parsed_args</span></nobr> )</a></dt><dd><p>Filters the returned list of bookmarks.</p>
</dd></dl></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wpdb/esc_like/">wpdb::esc_like()</a><code>wp-includes/class-wpdb.php</code></td><td><p>First half of escaping for <code>LIKE</code> special characters <code>%</code> and <code>_</code> before preparing for SQL.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_cache_set/">wp_cache_set()</a><code>wp-includes/cache.php</code></td><td><p>Saves the data to the cache.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_parse_id_list/">wp_parse_id_list()</a><code>wp-includes/functions.php</code></td><td><p>Cleans up an array, comma- or space-separated list of IDs.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_term_by/">get_term_by()</a><code>wp-includes/taxonomy.php</code></td><td><p>Gets all term data from database by term field and data.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_cache_get/">wp_cache_get()</a><code>wp-includes/cache.php</code></td><td><p>Retrieves the cache contents from the cache by key and group.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_parse_args/">wp_parse_args()</a><code>wp-includes/functions.php</code></td><td><p>Merges user defined arguments into defaults array.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/absint/">absint()</a><code>wp-includes/load.php</code></td><td><p>Converts a value to non-negative integer.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/apply_filters/">apply_filters()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to a filter hook.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wpdb/get_results/">wpdb::get_results()</a><code>wp-includes/class-wpdb.php</code></td><td><p>Retrieves an entire SQL result set from the database (i.e., many rows).</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wpdb/prepare/">wpdb::prepare()</a><code>wp-includes/class-wpdb.php</code></td><td><p>Prepares a SQL query for safe execution.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 6 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_links_list_table/prepare_items/">WP_Links_List_Table::prepare_items()</a><code>wp-admin/includes/class-wp-links-list-table.php</code></td><td></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_links/">get_links()</a><code>wp-includes/deprecated.php</code></td><td><p>Gets the links associated with category by ID.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_linkobjects/">get_linkobjects()</a><code>wp-includes/deprecated.php</code></td><td><p>Gets an array of link objects associated with category n.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_list_bookmarks/">wp_list_bookmarks()</a><code>wp-includes/bookmark-template.php</code></td><td><p>Retrieves or echoes all of the bookmarks.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.1.0/">2.1.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="1362" id="comment-1362">
<article class="comment-body" id="div-comment-1362">
<a class="screen-reader-text" href="#comment-content-1362">Skip to note 2 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1362">
<p><strong>Example</strong></p>
<p>– Create a link category named “Related Sites”<br>
– Create a few links, adding them to the “Related Sites” category</br></p>
<p>You may use the following code in your templates to retrieve the links:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$bookmarks = get_bookmarks( array(
	'orderby'        =&gt; 'name',
	'order'          =&gt; 'ASC',
	'category_name'  =&gt; 'Related Sites'
) );

// Loop through each bookmark and print formatted output
foreach ( $bookmarks as $bookmark ) { 
    printf( '&lt;a class="relatedlink" href="%1$s"&gt;%2$s&lt;/a&gt;&lt;br /&gt;', esc_attr( $bookmark-&gt;link_url ), $bookmark-&gt;link_name );
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1362">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
