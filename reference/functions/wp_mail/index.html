
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">wp_mail()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>wp_mail()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">wp_mail( <span class="arg-type">string|string[]</span> <span class="arg-name">$to</span>,  <span class="arg-type">string</span> <span class="arg-name">$subject</span>,  <span class="arg-type">string</span> <span class="arg-name">$message</span>,  <span class="arg-type">string|string[]</span> <span class="arg-name">$headers</span> = <span class="arg-default">''</span>,  <span class="arg-type">string|string[]</span> <span class="arg-name">$attachments</span> = <span class="arg-default">array()</span> ): <span class="return-type">bool</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Sends an email, similar to PHP’s mail function.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>A true return value does not automatically mean that the user received the email successfully. It just only means that the method used was able to process the request without any errors.</p>
<p>The default content type is <code>text/plain</code> which does not allow using HTML.<br/>However, you can set the content type of the email by using the <a href="https://developer.notmatt.press/reference/hooks/wp_mail_content_type/">‘wp_mail_content_type’</a> filter.</p>
<p>The default charset is based on the charset used on the blog. The charset can be set using the <a href="https://developer.notmatt.press/reference/hooks/wp_mail_charset/">‘wp_mail_charset’</a> filter.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$to</code><span class="type"><span class="string">string</span>|<span class="string[]">string[]</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Array or comma-separated list of email addresses to send message.</span></div></dd><dt><code>$subject</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Email subject.</span></div></dd><dt><code>$message</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Message contents.</span></div></dd><dt><code>$headers</code><span class="type"><span class="string">string</span>|<span class="string[]">string[]</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Additional headers.</span></div><p class="default">Default:<code>''</code></p></dd><dt><code>$attachments</code><span class="type"><span class="string">string</span>|<span class="string[]">string[]</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Paths to files to attach.</span></div><p class="default">Default:<code>array()</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">bool</span> Whether the email was sent successfully.</section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<h3 class="is-toc-heading wp-block-heading" id="usage" tabindex="-1"><a href="#usage">Usage</a></h3>
<pre class="wp-block-code"><code class="language-php" lang="php">wp_mail( $to, $subject, $message, $headers, $attachments );</code></pre>
<p>Optional filters ‘<a href="https://developer.notmatt.press/reference/hooks/wp_mail_from/">wp_mail_from</a>‘ and ‘<a href="https://developer.notmatt.press/reference/hooks/wp_mail_from_name/">wp_mail_from_name</a>‘ are run on the sender email address and name. The return values are reassembled into a ‘from’ address like ‘”Example User” ‘ If only ‘<a href="https://developer.notmatt.press/reference/hooks/wp_mail_from/">wp_mail_from</a>‘ returns a value, then just the email address will be used with no name.</p>
<p>The default content type is ‘text/plain’ which does not allow using HTML. You can set the content type of the email either by using the <a href="https://developer.notmatt.press/reference/hooks/wp_mail_content_type/">‘wp_mail_content_type</a>‘ filter ( see example below), or by including a header like “Content-type: text/html”. Be careful to reset ‘wp_mail_content_type’ back to ‘text/plain’ after you send your message, though, because failing to do so could lead to unexpected problems with e-mails from WP or plugins/themes.</p>
<p>The default charset is based on the charset used on the blog. The charset can be set using the ‘<a href="https://developer.notmatt.press/reference/hooks/wp_mail_charset/">wp_mail_charset</a>‘ filter.</p>
<h3 class="is-toc-heading wp-block-heading" id="notes" tabindex="-1"><a href="#notes">Notes</a></h3>
<ul class="wp-block-list">
<li>A <tt>true</tt> return value does not automatically mean that the user received the email successfully.</li>
<li>For this function to work, the settings <code>SMTP</code> and <code>smtp_port</code> (default: 25) need to be set in your php.ini file.</li>
<li>The function is available after the hook <a href="https://developer.notmatt.press/reference/hooks/plugins_loaded/" title="Plugin API/Action Reference/plugins loaded"><code>'plugins_loaded'</code></a>.</li>
<li>The filenames in the <code>$attachments</code> attribute have to be filesystem paths.</li>
</ul>
<h3 class="is-toc-heading wp-block-heading" id="valid-address-formats" tabindex="-1"><a href="#valid-address-formats">Valid Address Formats</a></h3>
<p>All email addresses supplied to <tt><a href="https://developer.notmatt.press/reference/functions/wp_mail/" rel="function">wp_mail()</a> </tt> as the <tt>$to</tt> parameter must comply with <a class="external text" href="http://www.faqs.org/rfcs/rfc2822.html">RFC 2822</a>. Some valid examples:</p>
<ul class="wp-block-list">
<li>user@example.com</li>
<li>user@example.com, anotheruser@example.com</li>
<li>User &lt;user@example.com&gt;</li>
<li>User &lt;user@example.com&gt;, Another User &lt;anotheruser@example.com&gt;</li>
</ul>
<p>The same applies to Cc: and Bcc: fields in <tt>$headers</tt>, but as noted in the next section, it’s better to push multiple addresses into an array instead of listing them on a single line. Either address format, with or without the user name, may be used.</p>
<h3 class="is-toc-heading wp-block-heading" id="using-headers-to-set-from-cc-and-bcc-parameters" tabindex="-1"><a href="#using-headers-to-set-from-cc-and-bcc-parameters">Using $headers To Set “From:”, “Cc:” and “Bcc:” Parameters</a></h3>
<p>To set the “From:” email address to something other than the WordPress default sender, or to add “Cc:” and/or “Bcc:” recipients, you must use the <tt>$headers</tt> argument.</p>
<p><tt>$headers</tt> can be a string or an array, but it may be easiest to use in the array form. To use it, push a string onto the array, starting with “From:”, “Bcc:” or “Cc:” (note the use of the “:”), followed by a valid email address.</p>
<p>When you are using the array form, you do not need to supply line breaks (<tt>"\n"</tt> or <tt>"\r\n"</tt>). Although the function can handle multiple emails per line, it may simply be easier to push each email address separately onto the <tt>$headers</tt> array. The function will figure it out and will build the proper Mime header automagically. Just don’t forget that each string you push must have the header type as the first part of the string (“From:”, “Cc:” or “Bcc:”)</p>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="174"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function wp_mail( $to, $subject, $message, $headers = '', $attachments = array() ) {
	// Compact the input, apply the filters, and extract them back out.

	/**
	 * Filters the wp_mail() arguments.
	 *
	 * @since 2.2.0
	 *
	 * @param array $args {
	 *     Array of the `wp_mail()` arguments.
	 *
	 *     @type string|string[] $to          Array or comma-separated list of email addresses to send message.
	 *     @type string          $subject     Email subject.
	 *     @type string          $message     Message contents.
	 *     @type string|string[] $headers     Additional headers.
	 *     @type string|string[] $attachments Paths to files to attach.
	 * }
	 */
	$atts = apply_filters( 'wp_mail', compact( 'to', 'subject', 'message', 'headers', 'attachments' ) );

	/**
	 * Filters whether to preempt sending an email.
	 *
	 * Returning a non-null value will short-circuit <a href="https://developer.notmatt.press/reference/functions/wp_mail">wp_mail()</a>, returning
	 * that value instead. A boolean return value should be used to indicate whether
	 * the email was successfully sent.
	 *
	 * @since 5.7.0
	 *
	 * @param null|bool $return Short-circuit return value.
	 * @param array     $atts {
	 *     Array of the `wp_mail()` arguments.
	 *
	 *     @type string|string[] $to          Array or comma-separated list of email addresses to send message.
	 *     @type string          $subject     Email subject.
	 *     @type string          $message     Message contents.
	 *     @type string|string[] $headers     Additional headers.
	 *     @type string|string[] $attachments Paths to files to attach.
	 * }
	 */
	$pre_wp_mail = apply_filters( 'pre_wp_mail', null, $atts );

	if ( null !== $pre_wp_mail ) {
		return $pre_wp_mail;
	}

	if ( isset( $atts['to'] ) ) {
		$to = $atts['to'];
	}

	if ( ! is_array( $to ) ) {
		$to = explode( ',', $to );
	}

	if ( isset( $atts['subject'] ) ) {
		$subject = $atts['subject'];
	}

	if ( isset( $atts['message'] ) ) {
		$message = $atts['message'];
	}

	if ( isset( $atts['headers'] ) ) {
		$headers = $atts['headers'];
	}

	if ( isset( $atts['attachments'] ) ) {
		$attachments = $atts['attachments'];
	}

	if ( ! is_array( $attachments ) ) {
		$attachments = explode( "\n", str_replace( "\r\n", "\n", $attachments ) );
	}
	global $phpmailer;

	// (Re)create it, if it's gone missing.
	if ( ! ( $phpmailer instanceof PHPMailer\PHPMailer\PHPMailer ) ) {
		require_once ABSPATH . WPINC . '/PHPMailer/PHPMailer.php';
		require_once ABSPATH . WPINC . '/PHPMailer/SMTP.php';
		require_once ABSPATH . WPINC . '/PHPMailer/Exception.php';
		$phpmailer = new PHPMailer\PHPMailer\PHPMailer( true );

		$phpmailer::$validator = static function ( $email ) {
			return (bool) is_email( $email );
		};
	}

	// Headers.
	$cc       = array();
	$bcc      = array();
	$reply_to = array();

	if ( empty( $headers ) ) {
		$headers = array();
	} else {
		if ( ! is_array( $headers ) ) {
			/*
			 * Explode the headers out, so this function can take
			 * both string headers and an array of headers.
			 */
			$tempheaders = explode( "\n", str_replace( "\r\n", "\n", $headers ) );
		} else {
			$tempheaders = $headers;
		}
		$headers = array();

		// If it's actually got contents.
		if ( ! empty( $tempheaders ) ) {
			// Iterate through the raw headers.
			foreach ( (array) $tempheaders as $header ) {
				if ( ! str_contains( $header, ':' ) ) {
					if ( false !== stripos( $header, 'boundary=' ) ) {
						$parts    = preg_split( '/boundary=/i', trim( $header ) );
						$boundary = trim( str_replace( array( "'", '"' ), '', $parts[1] ) );
					}
					continue;
				}
				// Explode them out.
				list( $name, $content ) = explode( ':', trim( $header ), 2 );

				// Cleanup crew.
				$name    = trim( $name );
				$content = trim( $content );

				switch ( strtolower( $name ) ) {
					// Mainly for legacy -- process a "From:" header if it's there.
					case 'from':
						$bracket_pos = strpos( $content, '&lt;' );
						if ( false !== $bracket_pos ) {
							// Text before the bracketed email is the "From" name.
							if ( $bracket_pos &gt; 0 ) {
								$from_name = substr( $content, 0, $bracket_pos );
								$from_name = str_replace( '"', '', $from_name );
								$from_name = trim( $from_name );
							}

							$from_email = substr( $content, $bracket_pos + 1 );
							$from_email = str_replace( '&gt;', '', $from_email );
							$from_email = trim( $from_email );

							// Avoid setting an empty $from_email.
						} elseif ( '' !== trim( $content ) ) {
							$from_email = trim( $content );
						}
						break;
					case 'content-type':
						if ( str_contains( $content, ';' ) ) {
							list( $type, $charset_content ) = explode( ';', $content );
							$content_type                   = trim( $type );
							if ( false !== stripos( $charset_content, 'charset=' ) ) {
								$charset = trim( str_replace( array( 'charset=', '"' ), '', $charset_content ) );
							} elseif ( false !== stripos( $charset_content, 'boundary=' ) ) {
								$boundary = trim( str_replace( array( 'BOUNDARY=', 'boundary=', '"' ), '', $charset_content ) );
								$charset  = '';
							}

							// Avoid setting an empty $content_type.
						} elseif ( '' !== trim( $content ) ) {
							$content_type = trim( $content );
						}
						break;
					case 'cc':
						$cc = array_merge( (array) $cc, explode( ',', $content ) );
						break;
					case 'bcc':
						$bcc = array_merge( (array) $bcc, explode( ',', $content ) );
						break;
					case 'reply-to':
						$reply_to = array_merge( (array) $reply_to, explode( ',', $content ) );
						break;
					default:
						// Add it to our grand headers array.
						$headers[ trim( $name ) ] = trim( $content );
						break;
				}
			}
		}
	}

	// Empty out the values that may be set.
	$phpmailer-&gt;clearAllRecipients();
	$phpmailer-&gt;clearAttachments();
	$phpmailer-&gt;clearCustomHeaders();
	$phpmailer-&gt;clearReplyTos();
	$phpmailer-&gt;Body    = '';
	$phpmailer-&gt;AltBody = '';

	// Set "From" name and email.

	// If we don't have a name from the input headers.
	if ( ! isset( $from_name ) ) {
		$from_name = 'WordPress';
	}

	/*
	 * If we don't have an email from the input headers, default to wordpress@$sitename
	 * Some hosts will block outgoing mail from this address if it doesn't exist,
	 * but there's no easy alternative. Defaulting to admin_email might appear to be
	 * another option, but some hosts may refuse to relay mail from an unknown domain.
	 * See https://core.trac.wordpress.org/ticket/5007.
	 */
	if ( ! isset( $from_email ) ) {
		// Get the site domain and get rid of www.
		$sitename   = wp_parse_url( network_home_url(), PHP_URL_HOST );
		$from_email = 'wordpress@';

		if ( null !== $sitename ) {
			if ( str_starts_with( $sitename, 'www.' ) ) {
				$sitename = substr( $sitename, 4 );
			}

			$from_email .= $sitename;
		}
	}

	/**
	 * Filters the email address to send from.
	 *
	 * @since 2.2.0
	 *
	 * @param string $from_email Email address to send from.
	 */
	$from_email = apply_filters( 'wp_mail_from', $from_email );

	/**
	 * Filters the name to associate with the "from" email address.
	 *
	 * @since 2.3.0
	 *
	 * @param string $from_name Name associated with the "from" email address.
	 */
	$from_name = apply_filters( 'wp_mail_from_name', $from_name );

	try {
		$phpmailer-&gt;setFrom( $from_email, $from_name, false );
	} catch ( PHPMailer\PHPMailer\Exception $e ) {
		$mail_error_data                             = compact( 'to', 'subject', 'message', 'headers', 'attachments' );
		$mail_error_data['phpmailer_exception_code'] = $e-&gt;getCode();

		/** This filter is documented in wp-includes/pluggable.php */
		do_action( 'wp_mail_failed', new WP_Error( 'wp_mail_failed', $e-&gt;getMessage(), $mail_error_data ) );

		return false;
	}

	// Set mail's subject and body.
	$phpmailer-&gt;Subject = $subject;
	$phpmailer-&gt;Body    = $message;

	// Set destination addresses, using appropriate methods for handling addresses.
	$address_headers = compact( 'to', 'cc', 'bcc', 'reply_to' );

	foreach ( $address_headers as $address_header =&gt; $addresses ) {
		if ( empty( $addresses ) ) {
			continue;
		}

		foreach ( (array) $addresses as $address ) {
			try {
				// Break $recipient into name and address parts if in the format "Foo &lt;bar@baz.com&gt;".
				$recipient_name = '';

				if ( preg_match( '/(.*)&lt;(.+)&gt;/', $address, $matches ) ) {
					if ( count( $matches ) === 3 ) {
						$recipient_name = $matches[1];
						$address        = $matches[2];
					}
				}

				switch ( $address_header ) {
					case 'to':
						$phpmailer-&gt;addAddress( $address, $recipient_name );
						break;
					case 'cc':
						$phpmailer-&gt;addCc( $address, $recipient_name );
						break;
					case 'bcc':
						$phpmailer-&gt;addBcc( $address, $recipient_name );
						break;
					case 'reply_to':
						$phpmailer-&gt;addReplyTo( $address, $recipient_name );
						break;
				}
			} catch ( PHPMailer\PHPMailer\Exception $e ) {
				continue;
			}
		}
	}

	// Set to use PHP's mail().
	$phpmailer-&gt;isMail();

	// Set Content-Type and charset.

	// If we don't have a Content-Type from the input headers.
	if ( ! isset( $content_type ) ) {
		$content_type = 'text/plain';
	}

	/**
	 * Filters the wp_mail() content type.
	 *
	 * @since 2.3.0
	 *
	 * @param string $content_type Default wp_mail() content type.
	 */
	$content_type = apply_filters( 'wp_mail_content_type', $content_type );

	$phpmailer-&gt;ContentType = $content_type;

	// Set whether it's plaintext, depending on $content_type.
	if ( 'text/html' === $content_type ) {
		$phpmailer-&gt;isHTML( true );
	}

	// If we don't have a charset from the input headers.
	if ( ! isset( $charset ) ) {
		$charset = get_bloginfo( 'charset' );
	}

	/**
	 * Filters the default wp_mail() charset.
	 *
	 * @since 2.3.0
	 *
	 * @param string $charset Default email charset.
	 */
	$phpmailer-&gt;CharSet = apply_filters( 'wp_mail_charset', $charset );

	// Set custom headers.
	if ( ! empty( $headers ) ) {
		foreach ( (array) $headers as $name =&gt; $content ) {
			// Only add custom headers not added automatically by PHPMailer.
			if ( ! in_array( $name, array( 'MIME-Version', 'X-Mailer' ), true ) ) {
				try {
					$phpmailer-&gt;addCustomHeader( sprintf( '%1$s: %2$s', $name, $content ) );
				} catch ( PHPMailer\PHPMailer\Exception $e ) {
					continue;
				}
			}
		}

		if ( false !== stripos( $content_type, 'multipart' ) &amp;&amp; ! empty( $boundary ) ) {
			$phpmailer-&gt;addCustomHeader( sprintf( 'Content-Type: %s; boundary="%s"', $content_type, $boundary ) );
		}
	}

	if ( ! empty( $attachments ) ) {
		foreach ( $attachments as $filename =&gt; $attachment ) {
			$filename = is_string( $filename ) ? $filename : '';

			try {
				$phpmailer-&gt;addAttachment( $attachment, $filename );
			} catch ( PHPMailer\PHPMailer\Exception $e ) {
				continue;
			}
		}
	}

	/**
	 * Fires after PHPMailer is initialized.
	 *
	 * @since 2.2.0
	 *
	 * @param PHPMailer $phpmailer The PHPMailer instance (passed by reference).
	 */
	do_action_ref_array( 'phpmailer_init', array( &amp;$phpmailer ) );

	$mail_data = compact( 'to', 'subject', 'message', 'headers', 'attachments' );

	// Send!
	try {
		$send = $phpmailer-&gt;send();

		/**
		 * Fires after PHPMailer has successfully sent an email.
		 *
		 * The firing of this action does not necessarily mean that the recipient(s) received the
		 * email successfully. It only means that the `send` method above was able to
		 * process the request without any errors.
		 *
		 * @since 5.9.0
		 *
		 * @param array $mail_data {
		 *     An array containing the email recipient(s), subject, message, headers, and attachments.
		 *
		 *     @type string[] $to          Email addresses to send message.
		 *     @type string   $subject     Email subject.
		 *     @type string   $message     Message contents.
		 *     @type string[] $headers     Additional headers.
		 *     @type string[] $attachments Paths to files to attach.
		 * }
		 */
		do_action( 'wp_mail_succeeded', $mail_data );

		return $send;
	} catch ( PHPMailer\PHPMailer\Exception $e ) {
		$mail_data['phpmailer_exception_code'] = $e-&gt;getCode();

		/**
		 * Fires after a PHPMailer\PHPMailer\Exception is caught.
		 *
		 * @since 4.4.0
		 *
		 * @param WP_Error $error A WP_Error object with the PHPMailer\PHPMailer\Exception message, and an array
		 *                        containing the mail recipient, subject, message, headers, and attachments.
		 */
		do_action( 'wp_mail_failed', new WP_Error( 'wp_mail_failed', $e-&gt;getMessage(), $mail_data ) );

		return false;
	}
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/pluggable.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/pluggable.php#L174">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/pluggable.php#L174-L585">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-hooks"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="hooks" tabindex="-1"><a href="#hooks">Hooks</a></h2> <dl><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/phpmailer_init/"><span class="hook-func">do_action_ref_array</span>( ‘phpmailer_init’,  <nobr><span class="arg-type">PHPMailer</span> <span class="arg-name">$phpmailer</span></nobr> )</a></dt><dd><p>Fires after PHPMailer is initialized.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/pre_wp_mail/"><span class="hook-func">apply_filters</span>( ‘pre_wp_mail’,  <nobr><span class="arg-type">null|bool</span> <span class="arg-name">$return</span></nobr>,  <nobr><span class="arg-type">array</span> <span class="arg-name">$atts</span></nobr> )</a></dt><dd><p>Filters whether to preempt sending an email.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/wp_mail/"><span class="hook-func">apply_filters</span>( ‘wp_mail’,  <nobr><span class="arg-type">array</span> <span class="arg-name">$args</span></nobr> )</a></dt><dd><p>Filters the <a href="https://developer.notmatt.press/reference/functions/wp_mail/" rel="function">wp_mail()</a>  arguments.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/wp_mail_charset/"><span class="hook-func">apply_filters</span>( ‘wp_mail_charset’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$charset</span></nobr> )</a></dt><dd><p>Filters the default <a href="https://developer.notmatt.press/reference/functions/wp_mail/" rel="function">wp_mail()</a>  charset.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/wp_mail_content_type/"><span class="hook-func">apply_filters</span>( ‘wp_mail_content_type’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$content_type</span></nobr> )</a></dt><dd><p>Filters the <a href="https://developer.notmatt.press/reference/functions/wp_mail/" rel="function">wp_mail()</a>  content type.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/wp_mail_failed/"><span class="hook-func">do_action</span>( ‘wp_mail_failed’,  <nobr><span class="arg-type">WP_Error</span> <span class="arg-name">$error</span></nobr> )</a></dt><dd><p>Fires after a PHPMailer\PHPMailer\Exception is caught.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/wp_mail_from/"><span class="hook-func">apply_filters</span>( ‘wp_mail_from’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$from_email</span></nobr> )</a></dt><dd><p>Filters the email address to send from.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/wp_mail_from_name/"><span class="hook-func">apply_filters</span>( ‘wp_mail_from_name’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$from_name</span></nobr> )</a></dt><dd><p>Filters the name to associate with the “from” email address.</p>
</dd><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/wp_mail_succeeded/"><span class="hook-func">do_action</span>( ‘wp_mail_succeeded’,  <nobr><span class="arg-type">array</span> <span class="arg-name">$mail_data</span></nobr> )</a></dt><dd><p>Fires after PHPMailer has successfully sent an email.</p>
</dd></dl></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/stripos/">stripos()</a><code>wp-includes/class-pop3.php</code></td><td></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_parse_url/">wp_parse_url()</a><code>wp-includes/http.php</code></td><td><p>A wrapper for PHP’s parse_url() function that handles consistency in the return values across PHP versions.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/is_email/">is_email()</a><code>wp-includes/formatting.php</code></td><td><p>Verifies that an email is valid.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/network_home_url/">network_home_url()</a><code>wp-includes/link-template.php</code></td><td><p>Retrieves the home URL for the current network.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/do_action_ref_array/">do_action_ref_array()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to an action hook, specifying arguments in an array.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/get_bloginfo/">get_bloginfo()</a><code>wp-includes/general-template.php</code></td><td><p>Retrieves information about the current site.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/apply_filters/">apply_filters()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to a filter hook.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/do_action/">do_action()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to an action hook.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_error/__construct/">WP_Error::__construct()</a><code>wp-includes/class-wp-error.php</code></td><td><p>Initializes the error.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 4 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wpmu_new_site_admin_notification/">wpmu_new_site_admin_notification()</a><code>wp-includes/ms-functions.php</code></td><td><p>Notifies the Multisite network administrator that a new site was created.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_automatic_updater/send_plugin_theme_email/">WP_Automatic_Updater::send_plugin_theme_email()</a><code>wp-admin/includes/class-wp-automatic-updater.php</code></td><td><p>Sends an email upon the completion or failure of a plugin or theme background update.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_recovery_mode_email_service/send_recovery_mode_email/">WP_Recovery_Mode_Email_Service::send_recovery_mode_email()</a><code>wp-includes/class-wp-recovery-mode-email-service.php</code></td><td><p>Sends the Recovery Mode email to the site admin email address.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/_wp_privacy_send_request_confirmation_notification/">_wp_privacy_send_request_confirmation_notification()</a><code>wp-includes/user.php</code></td><td><p>Notifies the site administrator via email when a request is confirmed.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/_wp_privacy_send_erasure_fulfillment_notification/">_wp_privacy_send_erasure_fulfillment_notification()</a><code>wp-includes/user.php</code></td><td><p>Notifies the user when their erasure request is fulfilled.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_send_user_request/">wp_send_user_request()</a><code>wp-includes/user.php</code></td><td><p>Send a confirmation request email to confirm an action.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_privacy_send_personal_data_export_email/">wp_privacy_send_personal_data_export_email()</a><code>wp-admin/includes/privacy-tools.php</code></td><td><p>Send an email to the user with a link to the personal data export file</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_site_admin_email_change_notification/">wp_site_admin_email_change_notification()</a><code>wp-includes/functions.php</code></td><td><p>Sends an email to the old site admin email address when the site admin email address changes.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/update_network_option_new_admin_email/">update_network_option_new_admin_email()</a><code>wp-includes/ms-functions.php</code></td><td><p>Sends a confirmation request email when a change of network admin email address is attempted.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_network_admin_email_change_notification/">wp_network_admin_email_change_notification()</a><code>wp-includes/ms-functions.php</code></td><td><p>Sends an email to the old network admin email address when the network admin email address changes.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/retrieve_password/">retrieve_password()</a><code>wp-includes/user.php</code></td><td><p>Handles sending a password retrieval email to a user.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_automatic_updater/send_email/">WP_Automatic_Updater::send_email()</a><code>wp-admin/includes/class-wp-automatic-updater.php</code></td><td><p>Sends an email upon the completion or failure of a background core update.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_automatic_updater/send_debug_email/">WP_Automatic_Updater::send_debug_email()</a><code>wp-admin/includes/class-wp-automatic-updater.php</code></td><td><p>Prepares and sends an email of a full log of background update results, useful for debugging and geekery.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/update_option_new_admin_email/">update_option_new_admin_email()</a><code>wp-admin/includes/misc.php</code></td><td><p>Sends a confirmation request email when a change of site admin email address is attempted.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/send_confirmation_on_profile_email/">send_confirmation_on_profile_email()</a><code>wp-includes/user.php</code></td><td><p>Sends a confirmation request email when a change of user email address is attempted.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_new_blog_notification/">wp_new_blog_notification()</a><code>wp-admin/includes/upgrade.php</code></td><td><p>Notifies the site admin that the installation of WordPress is complete.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_password_change_notification/">wp_password_change_notification()</a><code>wp-includes/pluggable.php</code></td><td><p>Notifies the blog admin of a user changing password, normally via email.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_new_user_notification/">wp_new_user_notification()</a><code>wp-includes/pluggable.php</code></td><td><p>Emails login credentials to a newly-registered user.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_notify_postauthor/">wp_notify_postauthor()</a><code>wp-includes/pluggable.php</code></td><td><p>Notifies an author (and/or others) of a comment/trackback/pingback on a post.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_notify_moderator/">wp_notify_moderator()</a><code>wp-includes/pluggable.php</code></td><td><p>Notifies the moderator of the site about a new comment that is awaiting approval.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_update_user/">wp_update_user()</a><code>wp-includes/user.php</code></td><td><p>Updates a user in the database.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wpmu_welcome_user_notification/">wpmu_welcome_user_notification()</a><code>wp-includes/ms-functions.php</code></td><td><p>Notifies a user that their account activation has been successful.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/newblog_notify_siteadmin/">newblog_notify_siteadmin()</a><code>wp-includes/ms-functions.php</code></td><td><p>Notifies the network admin that a new site has been activated.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/newuser_notify_siteadmin/">newuser_notify_siteadmin()</a><code>wp-includes/ms-functions.php</code></td><td><p>Notifies the network admin that a new user has been activated.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wpmu_welcome_notification/">wpmu_welcome_notification()</a><code>wp-includes/ms-functions.php</code></td><td><p>Notifies the site administrator that their site activation was successful.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wpmu_signup_blog_notification/">wpmu_signup_blog_notification()</a><code>wp-includes/ms-functions.php</code></td><td><p>Sends a confirmation request email to a user when they sign up for a new site. The new site will not become active until the confirmation link is clicked.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wpmu_signup_user_notification/">wpmu_signup_user_notification()</a><code>wp-includes/ms-functions.php</code></td><td><p>Sends a confirmation request email to a user when they sign up for a new user account (without signing up for a site at the same time). The user account will not become active until the confirmation link is clicked.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 22 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.5.0/">5.5.0</a></td><td><span class="since-description"><a href="https://developer.notmatt.press/reference/functions/is_email/" rel="function">is_email()</a>  is used for email validation,              instead of PHPMailer’s default validator.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/1.2.1/">1.2.1</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="348" id="comment-348">
<article class="comment-body" id="div-comment-348">
<a class="screen-reader-text" href="#comment-content-348">Skip to note 18 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-348">
<p>To send HTML formatted mail, you also can specify the Content-Type HTTP header in the <code>$headers</code> parameter:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$to = 'sendto@example.com';
$subject = 'The subject';
$body = 'The email body content';
$headers = array('Content-Type: text/html; charset=UTF-8');

wp_mail( $to, $subject, $body, $headers );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-348">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="349" id="comment-349">
<article class="comment-body" id="div-comment-349">
<a class="screen-reader-text" href="#comment-content-349">Skip to note 19 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-349">
<p>Example using the array form of <code>$headers</code>:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
// assumes $to, $subject, $message have already been defined earlier...

$headers[] = 'From: Me Myself &lt;me@example.net&gt;';
$headers[] = 'Cc: John Q Codex &lt;jqc@wordpress.org&gt;';
$headers[] = 'Cc: <a href="mailto:iluvwp@wordpress.org">iluvwp@wordpress.org</a>'; // note you can just use a simple email address

wp_mail( $to, $subject, $message, $headers );
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-349">
<ul class="children">
<li class="comment byuser comment-author-benjithaimmortal odd alt depth-2" data-comment-id="4783" id="comment-4783">
<article class="comment-body" id="div-comment-4783">
<div class="wporg-has-embedded-code comment-content" id="comment-content-4783">
<div>Since WP started using hooks, you’re not going to have success setting the <code>From</code> header in <code>wp_mail()</code>. You should add filters to the hooks to add this header instead:   <code> add_filter( 'wp_mail_from', 'wporg_wp_mail_from' ); function wporg_wp_mail_from( $content_type) {    return 'the.email@example.com'; } add_filter( 'wp_mail_from_name', 'wporg_wp_mail_from_name' ); function wporg_wp_mail_from_name( $name ) {    return 'Your Name'; } </code></div>
<div><a class="url" href="https://profiles.wordpress.org/benjithaimmortal/" rel="external nofollow">Benjamin Kostenbader</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_mail/#comment-4783"><time datetime="2021-01-22T16:34:06+00:00">4 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-stratboy even thread-odd thread-alt depth-1" data-comment-id="1856" id="comment-1856">
<article class="comment-body" id="div-comment-1856">
<a class="screen-reader-text" href="#comment-content-1856">Skip to note 20 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1856">
<p>Here’s an example of a basic configuration for SMTP (so phpmailer will be used instead of php’s mail()):</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action( 'phpmailer_init', 'mailer_config', 10, 1);
function mailer_config(PHPMailer $mailer){
  $mailer-&gt;IsSMTP();
  $mailer-&gt;Host = "mail.telemar.it"; // your SMTP server
  $mailer-&gt;Port = 25;
  $mailer-&gt;SMTPDebug = 2; // write 0 if you don't want to see client/server communication in page
  $mailer-&gt;CharSet  = "utf-8";
}</code></pre>
<p>Here’s an example of a basic error logging:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action('wp_mail_failed', 'log_mailer_errors', 10, 1);
function log_mailer_errors( $wp_error ){
  $fn = ABSPATH . '/mail.log'; // say you've got a mail.log file in your server root
  $fp = fopen($fn, 'a');
  fputs($fp, "Mailer Error: " . $wp_error-&gt;get_error_message() ."\n");
  fclose($fp);
}</code></pre>
<p>Then use <a href="https://developer.notmatt.press/reference/functions/wp_mail/" rel="function">wp_mail()</a>  to send your mail.</p>
<p>If you’re using it for sending a form and your form’s action is the page’s permalink, you can do some basic checking for $_POST lenght/count to see if the page comes from a form submission.</p>
<pre class="wp-block-code"><code class="language-php" lang="php">if(count($_POST) != 0){ // on top of page
  // Then collect form data and try to send the form and write messages and so on...
  // Note: set $mailer-&gt;SMTPDebug to 0 to prevent it to write server messages on the page
}</code></pre>
<p>NOTE: if you are using MAMP PRO to test from your local server, you should:</p>
<p>– go to the Postfix panel<br/>
– write your current virtual server as the ‘domain of outgoing email’<br/>
– activate ‘use a smart host for routing’<br/>
– write your provider’s smtp server (the same you are using in your mail client config)<br/>
– Eventually add authentication (then you should also setup the credentials in the phpmailer_init action)</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-1856">
<ul class="children">
<li class="comment byuser comment-author-schneyra odd alt depth-2" data-comment-id="5318" id="comment-5318">
<article class="comment-body" id="div-comment-5318">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5318">
<div>This is a great example, just one note: PHPMailer has moved. The function call needs to be modified.   
<pre class="wp-block-code"><code class="language-php" lang="php"></code></pre>
<p>function mailer_config(\PHPMailer\PHPMailer\PHPMailer $mail){</p></div>
<div><a class="url" href="https://profiles.wordpress.org/schneyra/" rel="external nofollow">Martin Schneider</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_mail/#comment-5318"><time datetime="2021-09-13T12:34:43+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-drbobjr even thread-even depth-1" data-comment-id="1783" id="comment-1783">
<article class="comment-body" id="div-comment-1783">
<a class="screen-reader-text" href="#comment-content-1783">Skip to note 21 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1783">
<p>Having spent nearly a day banging my head against this one, I would strongly recommend that the doc for <a href="https://developer.notmatt.press/reference/functions/wp_mail/" rel="function">wp_mail()</a>  include the tip that many servers will require that a mail user account be created with the email address of <a href="mailto:wordpress@domain.com">wordpress@domain.com</a> before this function will work. I would have NEVER figured that one out without many hours of google searches.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-1783">
<ul class="children">
<li class="comment byuser comment-author-gwynethllewelyn odd alt depth-2" data-comment-id="5470" id="comment-5470">
<article class="comment-body" id="div-comment-5470">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5470">
<div>Fellow head-banger here. This is actually an insane requirement in those cases when the email server is (physically) different from the web server hosting WordPress; site admins might not have any possibility to add such an address. I would classify this as a bug, but, taking into account that your message is 5 years old at the time of writing this feedback, one may safely assume that this is intended behaviour (why?). Also, note that while it’s possible to use alternative email facilities to avoid going through PHP’s <code>mail()</code> function, WordPress will <em>still</em> require that <code>wordpress@domain.com</code> to be around (and additionally, in some circumstances, <code>webmaster@domain.com</code>. So, if you’re able to generate those two mailboxes (or aliases), do that — it will save you from trouble in the future — unless, that is, someone at the core WordPress development team decides to change this behaviour (as they ought to have done years ago…)</div>
<div><a class="url" href="https://profiles.wordpress.org/gwynethllewelyn/" rel="external nofollow">Gwyneth Llewelyn</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_mail/#comment-5470"><time datetime="2021-11-11T18:20:56+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-daniyalahmedk even thread-odd thread-alt depth-1" data-comment-id="1884" id="comment-1884">
<article class="comment-body" id="div-comment-1884">
<a class="screen-reader-text" href="#comment-content-1884">Skip to note 22 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1884">
<p>Combining Content-Type(HTML) and From (Site name and “from” email)</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$to = 'emailsendto@example.com';
$subject = 'The subject';
$body = 'The email body content';
$headers = array('Content-Type: text/html; charset=UTF-8','From: My Site Name &lt;support@example.com&gt;');

wp_mail( $to, $subject, $body, $headers );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1884">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-even depth-1" data-comment-id="347" id="comment-347">
<article class="comment-body" id="div-comment-347">
<a class="screen-reader-text" href="#comment-content-347">Skip to note 23 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-347">
<p>Switch to HTML formatted email (using the <code><a href="https://developer.notmatt.press/reference/hooks/wp_mail_content_type/" rel="nofollow">wp_mail_content_type</a></code> filter):</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
add_filter( 'wp_mail_content_type', 'wpdocs_set_html_mail_content_type' );

$to = 'sendto@example.com';
$subject = 'The subject';
$body = 'The email body content';

wp_mail( $to, $subject, $body );

// Reset content-type to avoid conflicts -- <a href="https://core.trac.wordpress.org/ticket/23578" rel="nofollow ugc">https://core.trac.wordpress.org/ticket/23578</a>
remove_filter( 'wp_mail_content_type', 'wpdocs_set_html_mail_content_type' );

function wpdocs_set_html_mail_content_type() {
	return 'text/html';
}
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-347">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-markhowellsmead even thread-odd thread-alt depth-1" data-comment-id="1816" id="comment-1816">
<article class="comment-body" id="div-comment-1816">
<a class="screen-reader-text" href="#comment-content-1816">Skip to note 24 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1816">
<p>If you need to set the Reply-To address, note that the syntax which PHPMailer needs is pretty specific. The email address must be enclosed within <code>&lt;&gt;</code> characters. It’s also advisable to set the “reply to” name.</p>
<pre class="wp-block-code"><code class="language-php" lang="php">$headers = array(
  'Reply-To: Person Name &lt;person.name@example.com&gt;',
);</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1816">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-even depth-1" data-comment-id="346" id="comment-346">
<article class="comment-body" id="div-comment-346">
<a class="screen-reader-text" href="#comment-content-346">Skip to note 25 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-346">
<p>Sending to multiple recipients:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$multiple_recipients = array(
	'recipient1@example.com',
	'recipient2@foo.example.com'
);
$subj = 'The email subject';
$body = 'This is the body of the email';
wp_mail( $multiple_recipients, $subj, $body );
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-346">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-odd thread-alt depth-1" data-comment-id="344" id="comment-344">
<article class="comment-body" id="div-comment-344">
<a class="screen-reader-text" href="#comment-content-344">Skip to note 26 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-344">
<p>Basic usage example:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php wp_mail( 'me@example.net', 'The subject', 'The message' ); ?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-344">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-even depth-1" data-comment-id="345" id="comment-345">
<article class="comment-body" id="div-comment-345">
<a class="screen-reader-text" href="#comment-content-345">Skip to note 27 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-345">
<p>Add attachment and <code>From</code> header:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$attachments = array( WP_CONTENT_DIR . '/uploads/file_to_attach.zip' );
$headers = 'From: My Name &lt;myname@example.com&gt;' . "\r\n";
wp_mail( 'test@example.org', 'subject', 'message', $headers, $attachments );
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-345">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-lucasbustamante even thread-odd thread-alt depth-1" data-comment-id="2805" id="comment-2805">
<article class="comment-body" id="div-comment-2805">
<a class="screen-reader-text" href="#comment-content-2805">Skip to note 28 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2805">
<p>To send e-mail to admin:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$to = get_option( 'admin_email' );
$subject = 'The subject';
$body = 'The email body content';
$headers = array( 'Content-Type: text/html; charset=UTF-8' );
wp_mail( $to, $subject, $message, $headers, array( '' ) );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-2805">
<ul class="children">
<li class="comment byuser comment-author-simongcc odd alt depth-2" data-comment-id="3411" id="comment-3411">
<article class="comment-body" id="div-comment-3411">
<div class="wporg-has-embedded-code comment-content" id="comment-content-3411">
<div>I think it should be wp_mail( $to, $subject, $message, $headers, array( ” ) ); instead</div>
<div><a class="url" href="https://profiles.wordpress.org/simongcc/" rel="external nofollow">西門 正 Code Guy</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/wp_mail/#comment-3411"><time datetime="2019-10-05T09:15:56+00:00">5 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-jmikewp even thread-even depth-1" data-comment-id="2062" id="comment-2062">
<article class="comment-body" id="div-comment-2062">
<a class="screen-reader-text" href="#comment-content-2062">Skip to note 29 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2062">
<p>As of 4.6 header from can’t be a post variable, need to be set before otherwise your site will show php error “Fatal error: Uncaught exception ‘phpmailerException’ with message ‘Invalid address: (setFrom)”</p>
<p>This is due to ‘from email’ being set as variable and is not yet being passed by form submit. </p>
<pre class="wp-block-code"><code class="language-php" lang="php">$headers = "From: $name &lt;$email&gt;" . "\r\n";</code></pre>
<p>Fix by predefining a variable for both $name and $email that will be overwritten after submit(ex.1), or set hardcoded(ex.2).<br/>
ex.1</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$name = "Site name";
$email = "info@sitename.com";
if(isset $_POST["name"]){
$name = sanitize_text_field($_POST["name"]);
$email = sanitize_email($_POST["email"]);
}</code></pre>
<p>ex.2</p>
<pre class="wp-block-code"><code class="language-php" lang="php">$headers = "From: Site name &lt;info@sitename.com&gt;" . "\r\n";</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2062">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-matthewslouismarie odd alt thread-odd thread-alt depth-1" data-comment-id="2287" id="comment-2287">
<article class="comment-body" id="div-comment-2287">
<a class="screen-reader-text" href="#comment-content-2287">Skip to note 30 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2287">
<p>It’s important to know that this function might fail if you specify an empty body, even if using a SMTP.</p>
<pre class="wp-block-code"><code class="language-php" lang="php">wp_mail( 'email@provider.com', 'Subject', '' ); // returns false, the email was not sent</code></pre>
<pre class="wp-block-code"><code class="language-php" lang="php">wp_mail( 'email@provider.com', 'Subject', 'Body' ); // returns true (if everything else is working)</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2287">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-davecarpenter even thread-even depth-1" data-comment-id="5857" id="comment-5857">
<article class="comment-body" id="div-comment-5857">
<a class="screen-reader-text" href="#comment-content-5857">Skip to note 31 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5857">
<p>Emails will not send correctly if the <code>$to</code> parameter is over 500 characters. You will still get a true response from <code>wp_mail()</code> however.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5857">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-thedanish odd alt thread-odd thread-alt depth-1" data-comment-id="6551" id="comment-6551">
<article class="comment-body" id="div-comment-6551">
<a class="screen-reader-text" href="#comment-content-6551">Skip to note 32 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6551">
<p>Note: If you are using a WordPress in a vm in Google Cloud GCP SMTP port 25 is blocked. You will need to use a plugin or mail api over another port than 25.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6551">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-d79 even thread-even depth-1" data-comment-id="6696" id="comment-6696">
<article class="comment-body" id="div-comment-6696">
<a class="screen-reader-text" href="#comment-content-6696">Skip to note 33 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6696">
<p>Since WP 6.2, you can set the names of attachments as keys of the array:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$attachments = array(
    'filename1.txt'  =&gt; '/path/to/the/file1',
    'file_name2.pdf' =&gt; '/path/to/file2',
);

wp_mail( $to, $subject, $message, $headers, $attachments );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6696">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-alordiel odd alt thread-odd thread-alt depth-1 bad-note" data-comment-id="1115" id="comment-1115">
<article class="comment-body" id="div-comment-1115">
<a class="screen-reader-text" href="#comment-content-1115">Skip to note 34 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1115">
<p><code><br/>
&lt;?php<br/>
    //combining in one header the From and content-type<br/>
    $headers[] = 'Content-Type: text/html; charset=UTF-8';<br/>
    $headers[] = 'From: Wishio Team ' . "\r\n";</code></p>
<p>    wp_mail( $to, $subject, $message, $headers);<br/>
?&gt;<br/>
</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1115">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
