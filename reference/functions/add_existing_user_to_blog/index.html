
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">add_existing_user_to_blog()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>add_existing_user_to_blog()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">add_existing_user_to_blog( <span class="arg-type">array|false</span> <span class="arg-name">$details</span> = <span class="arg-default">false</span> ): <span class="return-type">true|<a href="https://developer.wordpress.org/reference/classes/wp_error/" rel="class">WP_Error</a>|void</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Adds a user to a blog based on details from <a href="https://developer.notmatt.press/reference/functions/maybe_add_existing_user_to_blog/" rel="function">maybe_add_existing_user_to_blog()</a> .</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$details</code><span class="type"><span class="array">array</span>|<span class="false">false</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">User details. Must at least contain values for the keys listed below.<br/>
<ul class="param-hash"><li><code>user_id</code> <span class="type">int</span><div class="desc">The ID of the user being added to the current blog.</div></li>
<li><code>role</code> <span class="type">string</span><div class="desc">The role to be assigned to the user.</div></li>
</ul>
</span></div><p class="default">Default:<code>false</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">true|<a href="https://developer.notmatt.press/reference/classes/wp_error/" rel="class">WP_Error</a>|void</span> True on success or a <a href="https://developer.notmatt.press/reference/classes/wp_error/" rel="class">WP_Error</a> object if the user doesn’t exist                            or could not be added. Void if $details array was not provided.</section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<p>This function is called by <code>maybe_add_existing_user_to_blog()</code> and should not be called directly. This page is for informational purposes only. Use <code>add_user_to_blog()</code>.</p>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="2223"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function add_existing_user_to_blog( $details = false ) {
	if ( is_array( $details ) ) {
		$blog_id = get_current_blog_id();
		$result  = add_user_to_blog( $blog_id, $details['user_id'], $details['role'] );

		/**
		 * Fires immediately after an existing user is added to a site.
		 *
		 * @since MU (3.0.0)
		 *
		 * @param int           $user_id User ID.
		 * @param true|WP_Error $result  True on success or a WP_Error object if the user doesn't exist
		 *                               or could not be added.
		 */
		do_action( 'added_existing_user', $details['user_id'], $result );

		return $result;
	}
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/ms-functions.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/ms-functions.php#L2223">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/ms-functions.php#L2223-L2241">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-hooks"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="hooks" tabindex="-1"><a href="#hooks">Hooks</a></h2> <dl><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/added_existing_user/"><span class="hook-func">do_action</span>( ‘added_existing_user’,  <nobr><span class="arg-type">int</span> <span class="arg-name">$user_id</span></nobr>,  <nobr><span class="arg-type">true|WP_Error</span> <span class="arg-name">$result</span></nobr> )</a></dt><dd><p>Fires immediately after an existing user is added to a site.</p>
</dd></dl></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/add_user_to_blog/">add_user_to_blog()</a><code>wp-includes/ms-functions.php</code></td><td><p>Adds a user to a blog, along with specifying the user’s role.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_current_blog_id/">get_current_blog_id()</a><code>wp-includes/load.php</code></td><td><p>Retrieves the current site ID.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/do_action/">do_action()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to an action hook.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 1 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/maybe_add_existing_user_to_blog/">maybe_add_existing_user_to_blog()</a><code>wp-includes/ms-functions.php</code></td><td><p>Adds a new user to a blog by visiting /newbloguser/{key}/.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/mu.3.0.0/">MU (3.0.0)</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-sakibsnaz odd alt thread-odd thread-alt depth-1" data-comment-id="6815" id="comment-6815">
<article class="comment-body" id="div-comment-6815">
<a class="screen-reader-text" href="#comment-content-6815">Skip to note 2 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6815">
<p><strong>function add_existing_user_to_blog($details = false)</strong> defines a function where <strong>add_existing_user_to_blog</strong> is the function name. Here in <strong>($details = false)</strong> this part, <strong>$details</strong> is the parameter. Parameters are like placeholders for values that you can pass to the function when you call it. And <strong>‘= false’</strong>, like the default value, means that if no values are provided for <strong>$details</strong>, then by default false will be worked.</p>
<p><strong>if (is_array($details))</strong> this function first checks if the provided information is in the form of an array and the right format.</p>
<p><strong>$blog_id = <a href="https://developer.notmatt.press/reference/functions/get_current_blog_id/" rel="function">get_current_blog_id()</a> </strong> in which blog page or post you’re currently working on. Here <strong>$blog_id</strong> is the variable, and <strong><a href="https://developer.notmatt.press/reference/functions/get_current_blog_id/" rel="function">get_current_blog_id()</a> </strong> is the function name.</p>
<p>In the <strong>$result</strong> variable, the function named <strong>add_user_to_blog</strong> is called. Here, <strong>$blog_id</strong> represents the specific blog post to which a user is being added, with the user identified by <strong>$details[‘user_id’]</strong>. Additionally, in <strong>$details[‘role’]</strong>, the permission level assigned to the user for the specific blog post is specified.</p>
<p><strong>do_action(‘added_existing_user’, $details[‘user_id’], $result)</strong> here action name <strong>‘added_existing_user’</strong>. The parameter <strong>$details[‘user_id’]</strong> designates the user who was added. And the <strong>$result</strong> variable stores whether the user was successfully assigned or not.</p>
<p>In short, this function makes sure that when you want to add an existing user to a particular blog, it verifies the information, adds the user, notifies the system to the addition, and then reports back to you on whether or not everything went according to plan. It functions similarly to a useful tool for WordPress site user management.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6815">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
