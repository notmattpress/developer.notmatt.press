
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/functions/">Functions</a></span><span class="is-current-page">has_blocks()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>has_blocks()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">has_blocks( <span class="arg-type">int|string|WP_Post|null</span> <span class="arg-name">$post</span> = <span class="arg-default">null</span> ): <span class="return-type">bool</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Determines whether a post or content string has blocks.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>This test optimizes for performance rather than strict accuracy, detecting the pattern of a block but not validating its structure. For strict accuracy, you should use the block parser on post content.</p>
<h3 class="is-toc-heading has-heading-5-font-size" id="see-also" tabindex="-1"><a href="#see-also">See also</a></h3><ul><li><a href="https://developer.notmatt.press/reference/functions/parse_blocks">parse_blocks()</a></li>
</ul></section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$post</code><span class="type"><span class="int">int</span>|<span class="string">string</span>|<span class="WP_Post"><a href="https://developer.notmatt.press/reference/classes/wp_post/" rel="class">WP_Post</a></span>|<span class="null">null</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Post content, post ID, or post object.<br/>
Defaults to global $post.</span></div><p class="default">Default:<code>null</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">bool</span> Whether the post has blocks.</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="770"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function has_blocks( $post = null ) {
	if ( ! is_string( $post ) ) {
		$wp_post = get_post( $post );

		if ( ! $wp_post instanceof WP_Post ) {
			return false;
		}

		$post = $wp_post-&gt;post_content;
	}

	return str_contains( (string) $post, '&lt;!-- wp:' );
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/blocks.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-includes/blocks.php#L770">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/blocks.php#L770-L782">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_post/">get_post()</a><code>wp-includes/post.php</code></td><td><p>Retrieves post data given a post ID or post object.</p>
</td></tr></tbody></table></figure></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/block_version/">block_version()</a><code>wp-includes/blocks.php</code></td><td><p>Returns the current version of the block format that the content string is using.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/do_blocks/">do_blocks()</a><code>wp-includes/blocks.php</code></td><td><p>Parses dynamic blocks out of <code>post_content</code> and re-renders them.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/has_block/">has_block()</a><code>wp-includes/blocks.php</code></td><td><p>Determines whether a $post or a string contains a specific block type.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/excerpt_remove_blocks/">excerpt_remove_blocks()</a><code>wp-includes/blocks.php</code></td><td><p>Parses blocks out of a content string, and renders those appropriate for the excerpt.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/_wp_editors/parse_settings/">_WP_Editors::parse_settings()</a><code>wp-includes/class-wp-editor.php</code></td><td><p>Parse default arguments for the editor instance.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.0.0/">5.0.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-rabmalin even thread-even depth-1" data-comment-id="3173" id="comment-3173">
<article class="comment-body" id="div-comment-3173">
<a class="screen-reader-text" href="#comment-content-3173">Skip to note 3 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3173">
<pre class="wp-block-code"><code class="language-php" lang="php">if ( has_blocks() ) {
    // Do something.
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3173">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-wpgurudev odd alt thread-odd thread-alt depth-1" data-comment-id="4050" id="comment-4050">
<article class="comment-body" id="div-comment-4050">
<a class="screen-reader-text" href="#comment-content-4050">Skip to note 4 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4050">
<p>1. We can use this function to pass a flag to indicate if content has blocks when we have decoupled environment, where WP is backend and frontend is implemented in some other language.</p>
<p>2. We can convert (parse) block output as per our requirement and pass it in the API. While, converting it can be useful to check if the content has any block. This will let us pass content efficiently by implementing parsing when it is necessary.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">class WPDocs_Custom_Block_Parse {

	function parse() {
		// Do something
  	}
}

function wpdocs_custom_block_parser() {
	return 'WPDocs_Custom_Block_Parse';
}

/**
 * In the implementation check if content has block
 */
if ( has_blocks( $post_content ) ) {
	add_filter( 'block_parser_class', 'wpdocs_custom_block_parser' );
	$response_content = parse_blocks( $content );
	remove_filter( 'block_parser_class', 'wpdocs_custom_block_parser' );
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4050">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
