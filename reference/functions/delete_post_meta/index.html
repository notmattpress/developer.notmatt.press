
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">delete_post_meta()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>delete_post_meta()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">delete_post_meta( <span class="arg-type">int</span> <span class="arg-name">$post_id</span>,  <span class="arg-type">string</span> <span class="arg-name">$meta_key</span>,  <span class="arg-type">mixed</span> <span class="arg-name">$meta_value</span> = <span class="arg-default">''</span> ): <span class="return-type">bool</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Deletes a post meta field for the given post ID.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>You can match based on the key, or key and value. Removing based on key and value, will keep from removing duplicate metadata with the same key. It also allows removing all metadata matching the key, if needed.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$post_id</code><span class="type"><span class="int">int</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Post ID.</span></div></dd><dt><code>$meta_key</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Metadata name.</span></div></dd><dt><code>$meta_value</code><span class="type"><span class="mixed">mixed</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Metadata value. If provided,                           rows will only be removed that match the value.<br/>
Must be serializable if non-scalar. </span></div><p class="default">Default:<code>''</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">bool</span> True on success, false on failure.</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="2588"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function delete_post_meta( $post_id, $meta_key, $meta_value = '' ) {
	// Make sure meta is deleted from the post, not from a revision.
	$the_post = wp_is_post_revision( $post_id );
	if ( $the_post ) {
		$post_id = $the_post;
	}

	return delete_metadata( 'post', $post_id, $meta_key, $meta_value );
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/post.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/post.php#L2588">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/post.php#L2588-L2596">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_is_post_revision/">wp_is_post_revision()</a><code>wp-includes/revision.php</code></td><td><p>Determines if the specified post is a revision.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/delete_metadata/">delete_metadata()</a><code>wp-includes/meta.php</code></td><td><p>Deletes metadata for the specified object.</p>
</td></tr></tbody></table></figure></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_restore_post_revision_meta/">wp_restore_post_revision_meta()</a><code>wp-includes/revision.php</code></td><td><p>Restore the revisioned meta values for a post.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/do_all_trackbacks/">do_all_trackbacks()</a><code>wp-includes/comment.php</code></td><td><p>Performs all trackbacks.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/do_all_enclosures/">do_all_enclosures()</a><code>wp-includes/comment.php</code></td><td><p>Performs all enclosures.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/do_all_pingbacks/">do_all_pingbacks()</a><code>wp-includes/comment.php</code></td><td><p>Performs all pingbacks.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_check_for_changed_dates/">wp_check_for_changed_dates()</a><code>wp-includes/post.php</code></td><td><p>Checks for changed dates for published post objects and save the old date.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_privacy_policy_content/get_suggested_policy_text/">WP_Privacy_Policy_Content::get_suggested_policy_text()</a><code>wp-admin/includes/class-wp-privacy-policy-content.php</code></td><td><p>Checks for updated, added or removed privacy policy information from plugins.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_privacy_policy_content/_policy_page_updated/">WP_Privacy_Policy_Content::_policy_page_updated()</a><code>wp-admin/includes/class-wp-privacy-policy-content.php</code></td><td><p>Updates the cached policy info when the policy page is updated.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_privacy_process_personal_data_export_page/">wp_privacy_process_personal_data_export_page()</a><code>wp-admin/includes/privacy-tools.php</code></td><td><p>Intercept personal data exporter page Ajax responses in order to assemble the personal data export file.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_privacy_generate_personal_data_export_file/">wp_privacy_generate_personal_data_export_file()</a><code>wp-admin/includes/privacy-tools.php</code></td><td><p>Generate the personal data export file.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_customize_manager/handle_dismiss_autosave_or_lock_request/">WP_Customize_Manager::handle_dismiss_autosave_or_lock_request()</a><code>wp-includes/class-wp-customize-manager.php</code></td><td><p>Deletes a given auto-draft changeset or the autosave revision for a given changeset or delete changeset lock.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_wp_delete_customize_changeset_dependent_auto_drafts/">_wp_delete_customize_changeset_dependent_auto_drafts()</a><code>wp-includes/nav-menu.php</code></td><td><p>Deletes auto-draft posts associated with the supplied changeset.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_customize_nav_menus/save_nav_menus_created_posts/">WP_Customize_Nav_Menus::save_nav_menus_created_posts()</a><code>wp-includes/class-wp-customize-nav-menus.php</code></td><td><p>Publishes the auto-draft posts that were created for nav menu items.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_restore_image/">wp_restore_image()</a><code>wp-admin/includes/image-edit.php</code></td><td><p>Restores the metadata for a given attachment.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/custom_image_header/ajax_header_remove/">Custom_Image_Header::ajax_header_remove()</a><code>wp-admin/includes/class-custom-image-header.php</code></td><td><p>Given an attachment ID for a header image, unsets it as a user-uploaded header image for the active theme.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_scheduled_delete/">wp_scheduled_delete()</a><code>wp-includes/functions.php</code></td><td><p>Permanently deletes comments or posts of any type that have held a status of ‘trash’ for the number of days defined in EMPTY_TRASH_DAYS.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_embed/delete_oembed_caches/">WP_Embed::delete_oembed_caches()</a><code>wp-includes/class-wp-embed.php</code></td><td><p>Deletes all oEmbed caches. Unused by core as of 4.0.0.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/set_post_thumbnail/">set_post_thumbnail()</a><code>wp-includes/post.php</code></td><td><p>Sets the post thumbnail (featured image) for the given post.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/delete_post_thumbnail/">delete_post_thumbnail()</a><code>wp-includes/post.php</code></td><td><p>Removes the thumbnail (featured image) from the given post.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_check_for_changed_slugs/">wp_check_for_changed_slugs()</a><code>wp-includes/post.php</code></td><td><p>Checks for changed slugs for published post objects and save the old slug.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_delete_attachment/">wp_delete_attachment()</a><code>wp-includes/post.php</code></td><td><p>Trashes or deletes an attachment.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_update_attachment_metadata/">wp_update_attachment_metadata()</a><code>wp-includes/post.php</code></td><td><p>Updates metadata for an attachment.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_untrash_post_comments/">wp_untrash_post_comments()</a><code>wp-includes/post.php</code></td><td><p>Restores comments for a post from the Trash.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_insert_post/">wp_insert_post()</a><code>wp-includes/post.php</code></td><td><p>Inserts or update a post.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_delete_post/">wp_delete_post()</a><code>wp-includes/post.php</code></td><td><p>Trashes or deletes a post or page.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_untrash_post/">wp_untrash_post()</a><code>wp-includes/post.php</code></td><td><p>Restores a post from the Trash.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/update_attached_file/">update_attached_file()</a><code>wp-includes/post.php</code></td><td><p>Updates attachment file path based on attachment ID.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_update_nav_menu_item/">wp_update_nav_menu_item()</a><code>wp-includes/nav-menu.php</code></td><td><p>Saves the properties of a menu item or create a new one.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 22 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/1.5.0/">1.5.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="621" id="comment-621">
<article class="comment-body" id="div-comment-621">
<a class="screen-reader-text" href="#comment-content-621">Skip to note 5 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-621">
<p><strong>Other Examples</strong><br>
Let’s assume we had a plugin that added some meta values to posts, but now when we are uninstalling the plugin, we want to delete all the post meta keys that the plugin added. Assuming the plugin added the keys <code>related_posts</code> and <code>post_inspiration</code>.</br></p>
<p>To delete all the keys use <code>delete_post_meta_by_key( $post_meta_key )</code>. This would be added to the “uninstall” function:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php delete_post_meta_by_key( 'related_posts' ); ?&gt;</code></pre>
<p>Or, if you wanted to delete all the keys except where <code>post_inspiration</code> was “Sherlock Holmes”:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$allposts = get_posts( 'numberposts=-1&amp;post_type=post&amp;post_status=any' );

foreach( $allposts as $postinfo ) {
	delete_post_meta( $postinfo-&gt;ID, 'related_posts' );
	$inspiration = get_post_meta( $postinfo-&gt;ID, 'post_inspiration' );
	foreach( $inspiration as $value ) {
		if( 'Sherlock Holmes' !== $value )
			delete_post_meta( $postinfo-&gt;ID, 'post_inspiration', $value );
	}
}
?&gt;</code></pre>
<p>Or maybe post number 185 was just deleted, and you want to remove all <code>related_posts</code> keys that reference it:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
  $allposts = get_posts( 'numberposts=-1&amp;post_type=post&amp;post_status=any' );

  foreach( $allposts as $postinfo ) {
    delete_post_meta( $postinfo-&gt;ID, 'related_posts', '185' );
  }
?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-621">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="620" id="comment-620">
<article class="comment-body" id="div-comment-620">
<a class="screen-reader-text" href="#comment-content-620">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-620">
<p><strong>Default Usage</strong></p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php delete_post_meta(76, 'my_key', 'Steve'); ?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-620">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-michelleblanchette even thread-even depth-1" data-comment-id="3649" id="comment-3649">
<article class="comment-body" id="div-comment-3649">
<a class="screen-reader-text" href="#comment-content-3649">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3649">
<p>Be VERY careful when using this function to delete a specific key-value pair. As stated in <a href="https://developer.notmatt.press/reference/functions/delete_metadata/"><code>delete_metadata()</code>‘s documentation</a>, providing an empty string for <code>$meta_value</code> will cause the check to be skipped entirely, resulting in all keys being deleted!</p>
<blockquote><p><b>$meta_value</b> …If specified, only delete metadata entries with this value. <i>Otherwise, delete all entries with the specified meta_key</i>…</p></blockquote>
<p>To avoid accidentally deleting ALL key instances, use a short-circuit check:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">$value_to_delete = My_Class::get_value(); // may return empty string
if ( $value_to_delete != '' &amp;&amp; delete_metadata( 'post', 27, 'key', $value_to_delete ) ) {
 // the key-value pair was safely deleted
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3649">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-pacicio odd alt thread-odd thread-alt depth-1" data-comment-id="6235" id="comment-6235">
<article class="comment-body" id="div-comment-6235">
<a class="screen-reader-text" href="#comment-content-6235">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6235">
<p>If you want to delete all entries with a specified <code>meta_key</code>, regardless of the field value, you need to set <code>meta_value</code> as <code>null</code>, otherwise the function will return <code>false</code> and the field does not get deleted</p>
<pre class="wp-block-code"><code class="language-php" lang="php">delete_post_meta( $post_id, $meta_key, null ) </code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6235">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
