
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/functions/">Functions</a></span><span class="is-current-page">register_meta()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>register_meta()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">register_meta( <span class="arg-type">string</span> <span class="arg-name">$object_type</span>,  <span class="arg-type">string</span> <span class="arg-name">$meta_key</span>,  <span class="arg-type">array</span> <span class="arg-name">$args</span>,  <span class="arg-type">string|array</span> <span class="arg-name">$deprecated</span> = <span class="arg-default">null</span> ): <span class="return-type">bool</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Registers a meta key.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>It is recommended to register meta keys for a specific combination of object type and object subtype. If passing an object subtype is omitted, the meta key will be registered for the entire object type, however it can be partly overridden in case a more specific meta key of the same name exists for the same object type and a subtype.</p>
<p>If an object type does not support any subtypes, such as users or comments, you should commonly call this function without passing a subtype.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$object_type</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Type of object metadata is for. Accepts <code>'post'</code>, <code>'comment'</code>, <code>'term'</code>, <code>'user'</code>,                                  or any other object type with an associated meta table.</span></div></dd><dt><code>$meta_key</code><span class="type"><span class="string">string</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Meta key to register.</span></div></dd><dt><code>$args</code><span class="type"><span class="array">array</span></span><span class="required">required</span></dt><dd><div class="desc"><span class="description">Data used to describe the meta key when registered.<br/>
<ul class="param-hash"><li><code>object_subtype</code> <span class="type">string</span><div class="desc">A subtype; e.g. if the object type is "post", the post type. If left empty, the meta key will be registered on the entire object type. Default empty.</div></li>
<li><code>type</code> <span class="type">string</span><div class="desc">The type of data associated with this meta key.<br/>
Valid values are <code>'string'</code>, <code>'boolean'</code>, <code>'integer'</code>, <code>'number'</code>, <code>'array'</code>, and <code>'object'</code>.</div></li>
<li><code>label</code> <span class="type">string</span><div class="desc">A human-readable label of the data attached to this meta key.</div></li>
<li><code>description</code> <span class="type">string</span><div class="desc">A description of the data attached to this meta key.</div></li>
<li><code>single</code> <span class="type">bool</span><div class="desc">Whether the meta key has one value per object, or an array of values per object.</div></li>
<li><code>default</code> <span class="type">mixed</span><div class="desc">The default value returned from <a href="https://developer.notmatt.press/reference/functions/get_metadata/" rel="function">get_metadata()</a>  if no value has been set yet.<br/>
When using a non-single meta key, the default value is for the first entry.<br/>
In other words, when calling <a href="https://developer.notmatt.press/reference/functions/get_metadata/" rel="function">get_metadata()</a>  with <code>$single</code> set to <code>false</code>, the default value given here will be wrapped in an array.</div></li>
<li><code>sanitize_callback</code> <span class="type">callable</span><div class="desc">A function or method to call when sanitizing <code>$meta_key</code> data.</div></li>
<li><code>auth_callback</code> <span class="type">callable</span><div class="desc">Optional. A function or method to call when performing edit_post_meta, add_post_meta, and delete_post_meta capability checks.</div></li>
<li><code>show_in_rest</code> <span class="type">bool|array</span><div class="desc">Whether data associated with this meta key can be considered public and should be accessible via the REST API. A custom post type must also declare support for custom fields for registered meta to be accessible via REST.<br/>
When registering complex meta values this argument may optionally be an array with <code>'schema'</code> or <code>'prepare_callback'</code> keys instead of a boolean.</div></li>
<li><code>revisions_enabled</code> <span class="type">bool</span><div class="desc">Whether to enable revisions support for this meta_key. Can only be used when the object type is <code>'post'</code>.</div></li>
</ul>
</span></div></dd><dt><code>$deprecated</code><span class="type"><span class="string">string</span>|<span class="array">array</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Deprecated. Use <code>$args</code> instead.</span></div><p class="default">Default:<code>null</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">bool</span> True if the meta key was successfully registered in the global array, false if not.<br/>
Registering a meta key with distinct sanitize and auth callbacks will fire those callbacks,              but will not add to the global registry.</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1407"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function register_meta( $object_type, $meta_key, $args, $deprecated = null ) {
	global $wp_meta_keys;

	if ( ! is_array( $wp_meta_keys ) ) {
		$wp_meta_keys = array();
	}

	$defaults = array(
		'object_subtype'    =&gt; '',
		'type'              =&gt; 'string',
		'label'             =&gt; '',
		'description'       =&gt; '',
		'default'           =&gt; '',
		'single'            =&gt; false,
		'sanitize_callback' =&gt; null,
		'auth_callback'     =&gt; null,
		'show_in_rest'      =&gt; false,
		'revisions_enabled' =&gt; false,
	);

	// There used to be individual args for sanitize and auth callbacks.
	$has_old_sanitize_cb = false;
	$has_old_auth_cb     = false;

	if ( is_callable( $args ) ) {
		$args = array(
			'sanitize_callback' =&gt; $args,
		);

		$has_old_sanitize_cb = true;
	} else {
		$args = (array) $args;
	}

	if ( is_callable( $deprecated ) ) {
		$args['auth_callback'] = $deprecated;
		$has_old_auth_cb       = true;
	}

	/**
	 * Filters the registration arguments when registering meta.
	 *
	 * @since 4.6.0
	 *
	 * @param array  $args        Array of meta registration arguments.
	 * @param array  $defaults    Array of default arguments.
	 * @param string $object_type Type of object metadata is for. Accepts 'post', 'comment', 'term', 'user',
	 *                            or any other object type with an associated meta table.
	 * @param string $meta_key    Meta key.
	 */
	$args = apply_filters( 'register_meta_args', $args, $defaults, $object_type, $meta_key );
	unset( $defaults['default'] );
	$args = wp_parse_args( $args, $defaults );

	// Require an item schema when registering array meta.
	if ( false !== $args['show_in_rest'] &amp;&amp; 'array' === $args['type'] ) {
		if ( ! is_array( $args['show_in_rest'] ) || ! isset( $args['show_in_rest']['schema']['items'] ) ) {
			_doing_it_wrong( __FUNCTION__, __( 'When registering an "array" meta type to show in the REST API, you must specify the schema for each array item in "show_in_rest.schema.items".' ), '5.3.0' );

			return false;
		}
	}

	$object_subtype = ! empty( $args['object_subtype'] ) ? $args['object_subtype'] : '';
	if ( $args['revisions_enabled'] ) {
		if ( 'post' !== $object_type ) {
			_doing_it_wrong( __FUNCTION__, __( 'Meta keys cannot enable revisions support unless the object type supports revisions.' ), '6.4.0' );

			return false;
		} elseif ( ! empty( $object_subtype ) &amp;&amp; ! post_type_supports( $object_subtype, 'revisions' ) ) {
			_doing_it_wrong( __FUNCTION__, __( 'Meta keys cannot enable revisions support unless the object subtype supports revisions.' ), '6.4.0' );

			return false;
		}
	}

	// If `auth_callback` is not provided, fall back to `is_protected_meta()`.
	if ( empty( $args['auth_callback'] ) ) {
		if ( is_protected_meta( $meta_key, $object_type ) ) {
			$args['auth_callback'] = '__return_false';
		} else {
			$args['auth_callback'] = '__return_true';
		}
	}

	// Back-compat: old sanitize and auth callbacks are applied to all of an object type.
	if ( is_callable( $args['sanitize_callback'] ) ) {
		if ( ! empty( $object_subtype ) ) {
			add_filter( "sanitize_{$object_type}_meta_{$meta_key}_for_{$object_subtype}", $args['sanitize_callback'], 10, 4 );
		} else {
			add_filter( "sanitize_{$object_type}_meta_{$meta_key}", $args['sanitize_callback'], 10, 3 );
		}
	}

	if ( is_callable( $args['auth_callback'] ) ) {
		if ( ! empty( $object_subtype ) ) {
			add_filter( "auth_{$object_type}_meta_{$meta_key}_for_{$object_subtype}", $args['auth_callback'], 10, 6 );
		} else {
			add_filter( "auth_{$object_type}_meta_{$meta_key}", $args['auth_callback'], 10, 6 );
		}
	}

	if ( array_key_exists( 'default', $args ) ) {
		$schema = $args;
		if ( is_array( $args['show_in_rest'] ) &amp;&amp; isset( $args['show_in_rest']['schema'] ) ) {
			$schema = array_merge( $schema, $args['show_in_rest']['schema'] );
		}

		$check = rest_validate_value_from_schema( $args['default'], $schema );
		if ( is_wp_error( $check ) ) {
			_doing_it_wrong( __FUNCTION__, __( 'When registering a default meta value the data must match the type provided.' ), '5.5.0' );

			return false;
		}

		if ( ! has_filter( "default_{$object_type}_metadata", 'filter_default_metadata' ) ) {
			add_filter( "default_{$object_type}_metadata", 'filter_default_metadata', 10, 5 );
		}
	}

	// Global registry only contains meta keys registered with the array of arguments added in 4.6.0.
	if ( ! $has_old_auth_cb &amp;&amp; ! $has_old_sanitize_cb ) {
		unset( $args['object_subtype'] );

		$wp_meta_keys[ $object_type ][ $object_subtype ][ $meta_key ] = $args;

		return true;
	}

	return false;
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/meta.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/meta.php#L1407">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/meta.php#L1407-L1537">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-hooks"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="hooks" tabindex="-1"><a href="#hooks">Hooks</a></h2> <dl><dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="https://developer.notmatt.press/reference/hooks/register_meta_args/"><span class="hook-func">apply_filters</span>( ‘register_meta_args’,  <nobr><span class="arg-type">array</span> <span class="arg-name">$args</span></nobr>,  <nobr><span class="arg-type">array</span> <span class="arg-name">$defaults</span></nobr>,  <nobr><span class="arg-type">string</span> <span class="arg-name">$object_type</span></nobr>,  <nobr><span class="arg-type">string</span> <span class="arg-name">$meta_key</span></nobr> )</a></dt><dd><p>Filters the registration arguments when registering meta.</p>
</dd></dl></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/rest_validate_value_from_schema/">rest_validate_value_from_schema()</a><code>wp-includes/rest-api.php</code></td><td><p>Validate a value based on a schema.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/has_filter/">has_filter()</a><code>wp-includes/plugin.php</code></td><td><p>Checks if any filter has been registered for a hook.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/post_type_supports/">post_type_supports()</a><code>wp-includes/post.php</code></td><td><p>Checks a post type’s support for a given feature.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/is_protected_meta/">is_protected_meta()</a><code>wp-includes/meta.php</code></td><td><p>Determines whether a meta key is considered protected.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/_doing_it_wrong/">_doing_it_wrong()</a><code>wp-includes/functions.php</code></td><td><p>Marks something as being incorrectly called.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_parse_args/">wp_parse_args()</a><code>wp-includes/functions.php</code></td><td><p>Merges user defined arguments into defaults array.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/apply_filters/">apply_filters()</a><code>wp-includes/plugin.php</code></td><td><p>Calls the callback functions that have been added to a filter hook.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/add_filter/">add_filter()</a><code>wp-includes/plugin.php</code></td><td><p>Adds a callback function to a filter hook.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/is_wp_error/">is_wp_error()</a><code>wp-includes/load.php</code></td><td><p>Checks whether the given variable is a WordPress Error.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 5 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_register_persisted_preferences_meta/">wp_register_persisted_preferences_meta()</a><code>wp-includes/user.php</code></td><td><p>Registers the user meta property for persisted preferences.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/register_term_meta/">register_term_meta()</a><code>wp-includes/taxonomy.php</code></td><td><p>Registers a meta key for terms.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/register_post_meta/">register_post_meta()</a><code>wp-includes/post.php</code></td><td><p>Registers a meta key for posts.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/6.7.0/">6.7.0</a></td><td><span class="since-description">The <code>label</code> argument was added to the arguments array.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/6.4.0/">6.4.0</a></td><td><span class="since-description">The <code>$revisions_enabled</code> argument was added to the arguments array.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.5.0/">5.5.0</a></td><td><span class="since-description">The <code>$default</code> argument was added to the arguments array.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.3.0/">5.3.0</a></td><td><span class="since-description">Valid meta types expanded to include "array" and "object".</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/4.9.8/">4.9.8</a></td><td><span class="since-description">The <code>$object_subtype</code> argument was added to the arguments array.</span></td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/since/4.6.0/">4.6.0</a></td><td><span class="since-description"><a href="https://core.trac.wordpress.org/ticket/35658"> Modified              to support an array of data to attach to registered meta keys</a>. Previous arguments for              <code>$sanitize_callback</code> and <code>$auth_callback</code> have been folded into this array.</span></td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/since/3.3.0/">3.3.0</a></td><td>Introduced.</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 2 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-janwoostendorp even thread-odd thread-alt depth-1" data-comment-id="2483" id="comment-2483">
<article class="comment-body" id="div-comment-2483">
<a class="screen-reader-text" href="#comment-content-2483">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2483">
<p>The values of <code>$object_type</code> are not documented but I found.<br>
<code>post</code> for all post types, <code>term</code> for all taxonomies.<br>
There might be other ‘objects’.</br></br></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2483">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-michielve odd alt thread-even depth-1" data-comment-id="2933" id="comment-2933">
<article class="comment-body" id="div-comment-2933">
<a class="screen-reader-text" href="#comment-content-2933">Skip to note 11 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2933">
<p>As of WordPress 4.9.8 you can use the <code>object_subtype</code> parameter to specify a custom post type. Previously you could only register for all post types. For example to register a meta key <code>my_meta</code> for only the <code>my_article</code> custom post type:</p>
<pre class="wp-block-code"><code class="language-php" lang="php">register_meta('post', 'my_meta', [
  'object_subtype' =&gt; 'my_article',
  'show_in_rest' =&gt; true
]);</code></pre>
<p>Or you can use the new <code>register_post_meta</code> function.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2933">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-thomasplevy even thread-odd thread-alt depth-1" data-comment-id="3416" id="comment-3416">
<article class="comment-body" id="div-comment-3416">
<a class="screen-reader-text" href="#comment-content-3416">Skip to note 12 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3416">
<p>For custom meta fields to be returned in the REST API for a custom post type the REST API Handbook notes that the post type <strong>must support custom-fields</strong> in order for the registered meta field to display.</p>
<p>From the handbook:</p>
<p>“Note that for meta fields registered on custom post types, the post type must have custom-fields support. Otherwise the meta fields will not appear in the REST API.”</p>
<p>Source: <a href="https://developer.notmatt.press/rest-api/extending-the-rest-api/modifying-responses/#read-and-write-a-post-meta-field-in-post-responses" rel="ugc">https://developer.notmatt.press/rest-api/extending-the-rest-api/modifying-responses/#read-and-write-a-post-meta-field-in-post-responses</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-3416">
<ul class="children">
<li class="comment byuser comment-author-markhowellsmead odd alt depth-2" data-comment-id="6002" id="comment-6002">
<article class="comment-body" id="div-comment-6002">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6002">
<div>This is also essential for saving values. If the post type doesn’t support <code>custom-fields</code>, the values will NOT be saved to the database.</div>
<div><a class="url" href="https://profiles.wordpress.org/markhowellsmead/" rel="external nofollow">Mark Howells-Mead</a> <a class="comment-date" href="https://developer.notmatt.press/reference/functions/register_meta/#comment-6002"><time datetime="2022-08-30T09:20:07+00:00">2 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-tharsheblows even thread-even depth-1" data-comment-id="2061" id="comment-2061">
<article class="comment-body" id="div-comment-2061">
<a class="screen-reader-text" href="#comment-content-2061">Skip to note 13 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2061">
<p>As of WordPress 4.7, you can use the function as follows. This will be expanded in future versions.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$object_type = 'post'; // The object type. 
	// For custom post types, this is 'post', for custom comment types, this is 'comment'.

$args1 = array(
    'type'		=&gt; 'string', // Validate and sanitize the meta value as a string.
		// Default: 'string'.  
    	// In 4.7 one of 'string', 'boolean', 'integer', 'number' must be used as 'type'. 
    'description'    =&gt; 'A meta key associated with a string meta value.', // Shown in the schema for the meta key.
    'single'        =&gt; true, // Return a single value of the type. Default: false.
    'show_in_rest'    =&gt; true, // Show in the WP REST API response. Default: false.
);

register_meta( $object_type, 'my_postmeta_key', $args1 );


$args2 = array(
    'type'             =&gt; 'string', // Validate and sanitize the meta value as a string.
    'description'    =&gt; 'A meta key associated with a string meta value.', // Shown in the schema for the meta key.
    'single'        =&gt; false, // Return an array with the type used as the items type. Default: false.
    'show_in_rest'    =&gt; true, // Show in the WP REST API response. Default: false.
);

register_meta( 'user', 'my_usermeta_key', $args2 );</code></pre>
<p>This will return the meta key and meta value in the meta object in the response. For example, an individual post response where id=8 and a meta key `my_postmeta_key` as registered above:</p>
<pre class="wp-block-code"><code class="language-js line-numbers" lang="js">{
  "id": 8, // the post id
 	...
  "meta": {
    "my_postmeta_key": "the meta value"
  },
	...
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2061">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-aniash_29 odd alt thread-odd thread-alt depth-1" data-comment-id="4155" id="comment-4155">
<article class="comment-body" id="div-comment-4155">
<a class="screen-reader-text" href="#comment-content-4155">Skip to note 14 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4155">
<p>Prior to WordPress 5.5, the defaults for a custom meta field to be made available to the REST API could only be achieved like this:</p>
<p>(Consider registering a custom checkbox field for certain user input – for example, a post type title toggle)</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">register_meta(
     'post',
     '_custom_meta_key',
     array(
         'single'       =&gt; true,
         'type'         =&gt; 'boolean', // or any valid data type
         'show_in_rest' =&gt; array(
             'schema' =&gt; array(
                 'type'  =&gt; 'boolean', // Should match the expected data type
                 'default' =&gt; true,
             ),
         ),
     )
 );</code></pre>
<p>With WordPress 5.5, this could be done with the additional argument <code>default</code>, like this:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">register_meta(
     'post',
     '_custom_meta_key',
     array(
         'single'       =&gt; true,
         'type'         =&gt; 'boolean',
         'default'      =&gt; true, // this is what really does the trick instead of supplying REST schema
         'show_in_rest' =&gt; true,
     )
 );</code></pre>
<p><em>Worth noting,</em> this could really be helpful while extending block editor sidebar to make custom fields available via <a href="https://developer.notmatt.press/block-editor/tutorials/metabox/">custom meta boxes</a>. Setting default values for custom fields in the block editor is not straightforward, otherwise.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4155">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-martinkolle even thread-even depth-1" data-comment-id="5241" id="comment-5241">
<article class="comment-body" id="div-comment-5241">
<a class="screen-reader-text" href="#comment-content-5241">Skip to note 15 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5241">
<p><code>auth_callback</code> and <code>sanitize_callback</code> is callable with arguments.</p>
<p>Auth callback is applied in <code>map_meta_cap()</code> (<a href="https://developer.notmatt.press/reference/functions/map_meta_cap/">wp-includes/capabilities.php</a>).<br>
Sanitize callback is applied in <code>sanitize_meta()</code> (<a href="https://developer.notmatt.press/reference/functions/sanitize_meta/">wp-includes/meta.php</a>).</br></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">$status = register_meta( 'post', '_candidate_title', array(
    'type' =&gt; 'string',
    'description' =&gt; 'event location',
    'object_subtype' =&gt; 'resume',
    'single' =&gt; true,
    'show_in_rest' =&gt; array(
        'schema' =&gt; array(
            'type' =&gt; 'string',
            'default' =&gt; true
        )
    ),
    'auth_callback' =&gt; function(  $allowed, $meta_key, $object_id, $user_id, $cap, $caps ) {
        return current_user_can( 'edit_resume', $object_id );
    },
    'sanitize_callback' =&gt; function( $meta_value, $meta_key, $object_type, $object_subtype ) {
        return $meta_value;
    }
) );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5241">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-barryceelen odd alt thread-odd thread-alt depth-1" data-comment-id="3449" id="comment-3449">
<article class="comment-body" id="div-comment-3449">
<a class="screen-reader-text" href="#comment-content-3449">Skip to note 16 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3449">
<p>Note that for the ‘show_in_rest’ argument to take effect, the post type should be registered with ‘custom-fields’ support.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3449">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-kitchin even thread-even depth-1" data-comment-id="5403" id="comment-5403">
<article class="comment-body" id="div-comment-5403">
<a class="screen-reader-text" href="#comment-content-5403">Skip to note 17 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5403">
<p>In WP Core, `<a href="https://developer.notmatt.press/reference/functions/register_meta/" rel="function">register_meta()</a> ` is only used by `register_post_meta` and `<a href="https://developer.notmatt.press/reference/functions/register_term_meta/" rel="function">register_term_meta()</a> `, and otherwise none of these functions are used in Core.</p>
<p>Jetpack uses `<a href="https://developer.notmatt.press/reference/functions/register_post_meta/" rel="function">register_post_meta()</a> `, and `<a href="https://developer.notmatt.press/reference/functions/register_meta/" rel="function">register_meta()</a> ` for ‘post’ and ‘user’. So Jetpack has code samples to examine for their use.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5403">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1 bad-note" data-comment-id="1385" id="comment-1385">
<article class="comment-body" id="div-comment-1385">
<a class="screen-reader-text" href="#comment-content-1385">Skip to note 18 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1385">
<p><strong>Basic Example</strong></p>
<pre class="wp-block-code"><code class="language-php" lang="php">&lt;?php register_meta( 'post', 'my_registered_meta', 'my_sanitize_callback', '__return_false' ); ?&gt;</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1385">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
