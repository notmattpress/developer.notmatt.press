
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/functions/">Functions</a></span><span class="is-current-page">get_users()</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>get_users()</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;">get_users( <span class="arg-type">array</span> <span class="arg-name">$args</span> = <span class="arg-default">array()</span> ): <span class="return-type">array</span></h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Retrieves list of users matching criteria.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <h3 class="is-toc-heading has-heading-5-font-size" id="see-also" tabindex="-1"><a href="#see-also">See also</a></h3><ul><li><a href="https://developer.notmatt.press/reference/classes/wp_user_query">WP_User_Query</a></li>
</ul></section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$args</code><span class="type"><span class="array">array</span></span><span class="required">optional</span></dt><dd><div class="desc"><span class="description">Arguments to retrieve users. See <a href="https://developer.notmatt.press/reference/classes/wp_user_query/prepare_query/" rel="method">WP_User_Query::prepare_query()</a>                    for more information on accepted arguments.</span></div><p class="default">Default:<code>array()</code></p></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-return-value"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="return" tabindex="-1"><a href="#return">Return</a></h2> <span class="return-type">array</span> List of users.</section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<p>Return value is an array of IDs, stdClass objects, or <a href="https://developer.notmatt.press/reference/classes/wp_user/" title="Class Reference/WP User">WP_User</a> objects, depending on the value of the ‘<tt>fields</tt>‘ parameter.</p>
<ul class="wp-block-list">
<li>If ‘<tt>fields</tt>‘ is set to ‘all’ (default), or ‘all_with_meta’, it will return an array of <a href="https://developer.notmatt.press/reference/classes/wp_user/" title="Class Reference/WP User">WP_User</a> objects.</li>
<li>If ‘<tt>fields</tt>‘ is set to an array of <tt><a href="https://codex.notmatt.press/Database_Description#Table:_wp_users" title="Database Description"> wp_users</a></tt> table fields, it will return an array of stdClass objects with only those fields.</li>
<li>If ‘<tt>fields</tt>‘ is set to any individual <tt><a href="https://codex.notmatt.press/Database_Description#Table:_wp_users" title="Database Description"> wp_users</a></tt> table field, an array of IDs will be returned.</li>
</ul>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="802"><code class="language-php line-numbers" id="wporg-source-code" lang="php">function get_users( $args = array() ) {

	$args                = wp_parse_args( $args );
	$args['count_total'] = false;

	$user_search = new WP_User_Query( $args );

	return (array) $user_search-&gt;get_results();
}
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/user.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-includes/user.php#L802">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/user.php#L802-L810">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="uses" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Uses</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_user_query/__construct/">WP_User_Query::__construct()</a><code>wp-includes/class-wp-user-query.php</code></td><td><p>Constructor.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_parse_args/">wp_parse_args()</a><code>wp-includes/functions.php</code></td><td><p>Merges user defined arguments into defaults array.</p>
</td></tr></tbody></table></figure></section> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_list_users/">wp_list_users()</a><code>wp-includes/user.php</code></td><td><p>Lists all the users of the site, with several options available.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/_build_block_template_result_from_post/">_build_block_template_result_from_post()</a><code>wp-includes/block-template-utils.php</code></td><td><p>Builds a unified template object based a post Object.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_uninitialize_site/">wp_uninitialize_site()</a><code>wp-includes/ms-site.php</code></td><td><p>Runs the uninitialization routine for a given site.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/populate_network_meta/">populate_network_meta()</a><code>wp-admin/includes/schema.php</code></td><td><p>Creates WordPress network meta and sets the default values.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wpmu_delete_blog/">wpmu_delete_blog()</a><code>wp-admin/includes/ms.php</code></td><td><p>Deletes a site.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_ajax_autocomplete_user/">wp_ajax_autocomplete_user()</a><code>wp-admin/includes/ajax-actions.php</code></td><td><p>Handles user autocomplete via AJAX.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/confirm_delete_users/">confirm_delete_users()</a><code>wp-admin/includes/ms.php</code></td><td></td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_dropdown_users/">wp_dropdown_users()</a><code>wp-includes/user.php</code></td><td><p>Creates dropdown HTML content of users.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/functions/wp_list_authors/">wp_list_authors()</a><code>wp-includes/author-template.php</code></td><td><p>Lists all the authors of the site, with several options available.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_xmlrpc_server/wp_getauthors/">wp_xmlrpc_server::wp_getAuthors()</a><code>wp-includes/class-wp-xmlrpc-server.php</code></td><td><p>Retrieves authors list.</p>
</td></tr><tr class="wporg-hidden"><td><a href="https://developer.notmatt.press/reference/classes/wp_xmlrpc_server/wp_getusers/">wp_xmlrpc_server::wp_getUsers()</a><code>wp-includes/class-wp-xmlrpc-server.php</code></td><td><p>Retrieves users.</p>
</td></tr></tbody></table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 6 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/3.1.0/">3.1.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-growthwp odd alt thread-odd thread-alt depth-1" data-comment-id="3697" id="comment-3697">
<article class="comment-body" id="div-comment-3697">
<a class="screen-reader-text" href="#comment-content-3697">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3697">
<p>Please note that if you search by `meta_value` and it ends up being `”` (an empty string), the query, which is really a wrap over the `<a href="https://developer.notmatt.press/reference/classes/wp_user_query/" rel="class">WP_User_Query</a>` class and hence this applies to other functions as well, <strong>ends up forfeiting the check for the `meta_value` and simply downgrades to searching by `meta_key` only.</strong></p>
<p>Please be very careful when you have `meta_values` that are dynamic or that you can’t/don’t check for this exact case, if the list that you retrieve using this query is used for something important, you might end up with security holes.</p>
<p><em>“User input should be parsed”.</em> Yes, but, user input should not be immediately `esc_html`’d or the like, escape at output, sanitize before queries and now that we know this, check for validity — but here lies the problem, we, as well as some people who’ve been with WP for 10+ years didn’t know about this behavior. A `preg_match` fixes it all, yes, but only if your assumptions are updated with this knowledge.</p>
<p>Additionally, this is not a case of “you just forgot to parse”, we parse everything that comes inside and had security audits on our core codebase pieces but just simply weren’t aware of this behavior and assumed we didn’t even need to parse.</p>
<p>I’ve opened a ticket about it if you’re interested in a PoC and how it affected us specifically: <a href="https://core.trac.notmatt.press/ticket/49641" rel="nofollow ugc">https://core.trac.notmatt.press/ticket/49641</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3697">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-crmunro even thread-even depth-1" data-comment-id="2112" id="comment-2112">
<article class="comment-body" id="div-comment-2112">
<a class="screen-reader-text" href="#comment-content-2112">Skip to note 9 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2112">
<p>An example of fetching users that match any one of an array of roles using <code>role__in</code>.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$blogusers = get_users( array( 'role__in' =&gt; array( 'author', 'subscriber' ) ) );
// Array of WP_User objects.
foreach ( $blogusers as $user ) {
    echo '&lt;span&gt;' . esc_html( $user-&gt;display_name ) . '&lt;/span&gt;';
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2112">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="505" id="comment-505">
<article class="comment-body" id="div-comment-505">
<a class="screen-reader-text" href="#comment-content-505">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-505">
<p>An example using the ‘search’ field.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$blogusers = get_users( array( 'search' =&gt; 'john' ) );
// Array of WP_User objects.
foreach ( $blogusers as $user ) {
	echo '&lt;span&gt;' . esc_html( $user-&gt;user_email ) . '&lt;/span&gt;';
}</code></pre>
<p>This example will find and display all users that have a user name, ID, email of “john”. You can also do wild card search by adding an * before or after your search query. For example, to search for all users that start with “jo”, you would pass something like “jo*”.</p>
<p>The results will be all users whose user names, IDs, or emails that start with “jo”. The * can be placed before or after your search query. When placed before, the results will be all users that end in your query.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-505">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex even thread-even depth-1" data-comment-id="504" id="comment-504">
<article class="comment-body" id="div-comment-504">
<a class="screen-reader-text" href="#comment-content-504">Skip to note 11 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-504">
<p>A basic example to display all subscribers in an unordered list.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$blogusers = get_users( 'blog_id=1&amp;orderby=nicename&amp;role=subscriber' );
// Array of WP_User objects.
foreach ( $blogusers as $user ) {
	echo '&lt;span&gt;' . esc_html( $user-&gt;user_email ) . '&lt;/span&gt;';
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-504">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codex odd alt thread-odd thread-alt depth-1" data-comment-id="506" id="comment-506">
<article class="comment-body" id="div-comment-506">
<a class="screen-reader-text" href="#comment-content-506">Skip to note 12 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-506">
<p>An example of querying by a specific field.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
$blogusers = get_users( array( 'fields' =&gt; array( 'display_name' ) ) );
// Array of stdClass objects.
foreach ( $blogusers as $user ) {
	echo '&lt;span&gt;' . esc_html( $user-&gt;display_name ) . '&lt;/span&gt;';
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-506">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-peprodev even thread-even depth-1" data-comment-id="5844" id="comment-5844">
<article class="comment-body" id="div-comment-5844">
<a class="screen-reader-text" href="#comment-content-5844">Skip to note 13 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5844">
<p><a href="https://developer.notmatt.press/reference/classes/wp_user_query/" rel="class">WP_User_Query</a> now accepts fields options in <strong>WordPress 6.0 </strong><br/>
<a href="https://make.notmatt.press/core/2022/04/29/wp_user_query-now-accepts-fields-options-in-wordpress-6-0/" rel="nofollow ugc">https://make.notmatt.press/core/2022/04/29/wp_user_query-now-accepts-fields-options-in-wordpress-6-0/</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5844">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-kowsar89 odd alt thread-odd thread-alt depth-1" data-comment-id="6196" id="comment-6196">
<article class="comment-body" id="div-comment-6196">
<a class="screen-reader-text" href="#comment-content-6196">Skip to note 14 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6196">
<p>The default value of the <code>number</code> parameter is -1, which means it lists all the users. It can cause performance issues on larger sites, so it should be used with caution.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6196">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
