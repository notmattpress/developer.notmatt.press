
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span><a href="https://developer.wordpress.org/reference/classes/_wp_editors/editor_settings/">_WP_Editors::editor_settings</a></span><span class="is-current-page">mce_external_plugins</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>mce_external_plugins</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">apply_filters</span>( ‘mce_external_plugins’,  <nobr><span class="arg-type">array</span> <span class="arg-name">$external_plugins</span></nobr>,  <nobr><span class="arg-type">string</span> <span class="arg-name">$editor_id</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Filters the list of TinyMCE external plugins.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>The filter takes an associative array of external plugins for TinyMCE in the form ‘plugin_name’ =&gt; ‘url’.</p>
<p>The url should be absolute, and should include the js filename to be loaded. For example: ‘myplugin’ =&gt; ‘<a href="http://mysite.com/wp-content/plugins/myfolder/mce_plugin.js">http://mysite.com/wp-content/plugins/myfolder/mce_plugin.js</a>‘.</p>
<p>If the external plugin adds a button, it should be added with one of the ‘mce_buttons’ filters.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$external_plugins</code><span class="type"><span class="array">array</span></span></dt><dd><div class="desc"><span class="description">An array of external TinyMCE plugins.</span></div></dd><dt><code>$editor_id</code><span class="type"><span class="string">string</span></span></dt><dd><div class="desc"><span class="description">Unique editor identifier, e.g. <code>'content'</code>. Accepts <code>'classic-block'</code>                                 when called from block editor’s Classic block.</span></div></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<p>This filter may be useful for loading any of the TinyMCE core plugins, many of which are not included by default in WordPress, as well as any custom TinyMCE plugins you may want to create.</p>
<p><strong>Plugin Version Compatibility:</strong></p>
<p>TinyMCE plugins must be compatible with the version of TinyMCE included in WordPress.</p>
<p>It may also be helpful to check when the particular plugin was introduced. For example, the visualblocks plugin was introduced in TinyMCE version 3.5b1.</p>
<p>WordPress 3.9 had a major update with TinyMCE 4.0.</p>
<p>If you find that your plugin script is not getting added, make sure you are adding your plugin ‘id’ =&gt; scripturl with the ‘mce_external_plugins’ filter, but not the ‘tiny_mce_plugins’ filter, or else the script file will not be registered.</p>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="421"><code class="language-php line-numbers" id="wporg-source-code" lang="php">$mce_external_plugins = apply_filters( 'mce_external_plugins', array(), $editor_id );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/class-wp-editor.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/class-wp-editor.php#L421">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/class-wp-editor.php#L421-L421">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_tinymce_inline_scripts/">wp_tinymce_inline_scripts()</a><code>wp-includes/script-loader.php</code></td><td><p>Adds inline scripts required for the TinyMCE in the block editor.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/_wp_editors/editor_settings/">_WP_Editors::editor_settings()</a><code>wp-includes/class-wp-editor.php</code></td><td></td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.3.0/">5.3.0</a></td><td><span class="since-description">The <code>$editor_id</code> parameter was added.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.5.0/">2.5.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-stevenlinx even thread-even depth-1" data-comment-id="4526" id="comment-4526">
<article class="comment-body" id="div-comment-4526">
<a class="screen-reader-text" href="#comment-content-4526">Skip to note 3 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4526">
<p>Example migrated from Codex:</p>
<p><strong>Visualblock plugin</strong></p>
<p>For example, you might create a WordPress plugin that loads the TinyMCE plugin visualblocks.</p>
<p>TinyMCE plugins typically consist of a javascript file named ‘editor_plugin.js’ and a series of CSS files and other helper files. This example assumes the WordPress plugin stores TinyMCE plugins as follows: <em>example_plugin/tinymce/visualblocks/edior_plugin.js</em></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Add the TinyMCE VisualBlocks Plugin.
 *
 * @param array $plugins An array of all plugins.
 * @return array
 */
function my_custom_plugins( $plugins ) {
     $plugins['visualblocks'] = plugins_url( 'tinymce/', __FILE__ ) . 'visualblocks/editor_plugin.js';
     return $plugins;
}
add_filter( 'mce_external_plugins', 'my_custom_plugins' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4526">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-stevenlinx odd alt thread-odd thread-alt depth-1" data-comment-id="4527" id="comment-4527">
<article class="comment-body" id="div-comment-4527">
<a class="screen-reader-text" href="#comment-content-4527">Skip to note 4 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4527">
<p>Example migrated from Codex:</p>
<p><strong>Creating a shortcode and a tag button</strong></p>
<p>First, create a plugin that registers the buttons and their JavaScript.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/* Plugin Name: My TinyMCE Buttons */
add_action( 'admin_init', 'my_tinymce_button' );

function my_tinymce_button() {
     if ( current_user_can( 'edit_posts' ) &amp;&amp; current_user_can( 'edit_pages' ) ) {
          add_filter( 'mce_buttons', 'my_register_tinymce_button' );
          add_filter( 'mce_external_plugins', 'my_add_tinymce_button' );
     }
}

function my_register_tinymce_button( $buttons ) {
     array_push( $buttons, "button_eek", "button_green" );
     return $buttons;
}

function my_add_tinymce_button( $plugin_array ) {
     $plugin_array['my_button_script'] = plugins_url( '/mybuttons.js', __FILE__ ) ;
     return $plugin_array;
}</code></pre>
<p>Then, in the same folder as the plugin, the JavaScript file <strong>mybuttons.js</strong>. We add our two buttons (eek and green), one is a direct <code>onclick</code> that inserts a Shortcode and the other is a command that adds an <code>h3</code> tag to the selected text in the editor.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">(function() {
     /* Register the buttons */
     tinymce.create('tinymce.plugins.MyButtons', {
          init : function(ed, url) {
               /**
               * Inserts shortcode content
               */
               ed.addButton( 'button_eek', {
                    title : 'Insert shortcode',
                    image : '../wp-includes/images/smilies/icon_eek.gif',
                    onclick : function() {
                         ed.selection.setContent('[myshortcode]');
                    }
               });
               /**
               * Adds HTML tag to selected content
               */
               ed.addButton( 'button_green', {
                    title : 'Add span',
                    image : '../wp-includes/images/smilies/icon_mrgreen.gif',
                    cmd: 'button_green_cmd'
               });
               ed.addCommand( 'button_green_cmd', function() {
                    var selected_text = ed.selection.getContent();
                    var return_text = '';
                    return_text = '&lt;h1&gt;' + selected_text + '&lt;/h1&gt;';
                    ed.execCommand('mceInsertContent', 0, return_text);
               });
          },
          createControl : function(n, cm) {
               return null;
          },
     });
     /* Start the buttons */
     tinymce.PluginManager.add( 'my_button_script', tinymce.plugins.MyButtons );
})();</code></pre>
<p>You can pass PHP values to the JavaScript file printing directly in <code>admin_head</code>:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">foreach ( array('post.php','post-new.php') as $hook ) {
     add_action( "admin_head-$hook", 'my_admin_head' );
}

/**
 * Localize Script
 */
function my_admin_head() {
    $plugin_url = plugins_url( '/', __FILE__ );
    ?&gt;
&lt;!-- TinyMCE Shortcode Plugin --&gt;
&lt;script type='text/javascript'&gt;
var my_plugin = {
    'url': '&lt;?php echo $plugin_url; ?&gt;',
};
&lt;/script&gt;
&lt;!-- TinyMCE Shortcode Plugin --&gt;
    &lt;?php
}</code></pre>
<p>And then, access it in <strong>mybuttons.js</strong> with <code>console.log(my_plugin.url);</code>.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4527">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
