
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span class="is-current-page">admin_bar_menu</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>admin_bar_menu</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">do_action_ref_array</span>( ‘admin_bar_menu’,  <nobr><span class="arg-type">WP_Admin_Bar</span> <span class="arg-name">$wp_admin_bar</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Loads all necessary admin bar items.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>This hook can add, remove, or manipulate admin bar items. The priority determines the placement for new items, and changes to existing items would require a high priority. To remove or manipulate existing nodes without a specific priority, use <code>wp_before_admin_bar_render</code>.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$wp_admin_bar</code><span class="type"><span class="WP_Admin_Bar"><a href="https://developer.notmatt.press/reference/classes/wp_admin_bar/" rel="class">WP_Admin_Bar</a></span></span></dt><dd><div class="desc"><span class="description">The <a href="https://developer.notmatt.press/reference/classes/wp_admin_bar/" rel="class">WP_Admin_Bar</a> instance, passed by reference.</span></div></dd></dl></section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="97"><code class="language-php line-numbers" id="wporg-source-code" lang="php">do_action_ref_array( 'admin_bar_menu', array( &amp;$wp_admin_bar ) );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/admin-bar.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/admin-bar.php#L97">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/admin-bar.php#L97-L97">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_admin_bar_render/">wp_admin_bar_render()</a><code>wp-includes/admin-bar.php</code></td><td><p>Renders the admin bar to the page based on the $wp_admin_bar-&gt;menu member var.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/3.1.0/">3.1.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-iqbalrony odd alt thread-odd thread-alt depth-1" data-comment-id="3471" id="comment-3471">
<article class="comment-body" id="div-comment-3471">
<a class="screen-reader-text" href="#comment-content-3471">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3471">
<p>This hook is used to add the admin bar menu.</p>
<p><strong>Example:-</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action( 'admin_bar_menu', 'admin_bar_item', 500 );
function admin_bar_item ( WP_Admin_Bar $admin_bar ) {
	if ( ! current_user_can( 'manage_options' ) ) {
		return;
	}
	$admin_bar-&gt;add_menu( array(
		'id'    =&gt; 'menu-id',
		'parent' =&gt; null,
		'group'  =&gt; null,
		'title' =&gt; 'Menu Title', //you can use img tag with image link. it will show the image icon Instead of the title.
		'href'  =&gt; admin_url('admin.php?page=custom-page'),
		'meta' =&gt; [
			'title' =&gt; __( 'Menu Title', 'textdomain' ), //This title will show on hover
		]
	) );
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-3471">
<ul class="children">
<li class="comment byuser comment-author-tarecord even depth-2" data-comment-id="6944" id="comment-6944">
<article class="comment-body" id="div-comment-6944">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6944">
<div>The priority of core menu items can be found in <a href="https://developer.notmatt.press/reference/classes/wp_admin_bar/add_menus/" rel="ugc">WP_Admin_Bar::add_menus()</a>.  You can decide where you’d like to hook in your specific menu item by setting a specific priority.</div>
<div><a class="url" href="https://profiles.wordpress.org/tarecord/" rel="external nofollow">Tanner Record</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/admin_bar_menu/#comment-6944"><time datetime="2024-03-15T20:08:56+00:00">11 months ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-im_niloy odd alt thread-even depth-1" data-comment-id="5753" id="comment-5753">
<article class="comment-body" id="div-comment-5753">
<a class="screen-reader-text" href="#comment-content-5753">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5753">
<p>Display custom menu only for the admin area and add dropdown menu</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function ci_admin_bar_item( WP_Admin_Bar $wp_admin_bar ) {

	if ( !is_admin() ) {
		return;
	} // Display Menu only for wp-admin area

	$menu_id = 'new-order-notify';

	$wp_admin_bar-&gt;add_menu(
		array(
			'id'     =&gt; $menu_id,
			'parent' =&gt; null , // use 'top-secondary' for toggle menu position.
			'href'   =&gt; admin_url( 'admin.php?page=custom-page-slug' ),
			'title'  =&gt; __( 'New Order Notification', 'text-domain' ),
		)
	);
	$wp_admin_bar-&gt;add_menu(
		array(
			'parent' =&gt; $menu_id,
			'title'  =&gt; __( 'Disable', 'text-domain'  ),
			'id'     =&gt; 'new-order-notification-disable',
			'href'   =&gt; admin_url( 'admin.php?page=custom-submenu-slug' ),

		)
	);

}
add_action( 'admin_bar_menu', 'ci_admin_bar_item', 100 );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5753">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-codeslayer2010 even thread-odd thread-alt depth-1" data-comment-id="6664" id="comment-6664">
<article class="comment-body" id="div-comment-6664">
<a class="screen-reader-text" href="#comment-content-6664">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6664">
<p><b>Add date and time to right side of the admin bar near the “Howdy” and avatar section</b></p>
<p>I researched all day to figure out how to do this and wanted to share a working example to help save others some time and frustration.</p>
<p><b>CAVEAT:</b> <i>This code is tested and verified it works as of Sept 2023. However, WordPress is always changing, so it is possible if you are reading this in ten years it may not be valid anymore.</i></p>
<ul>
<li><code>$parent_slug</code> : this is an id you make up. It should be self explanatory, in this case <code>adminbar-date-time</code></li>
<li><code>top-secondary</code> : tells WP to put this node / link / text on the right side</li>
<li>the <code>500</code> in <code>add_action()</code> : means keep it on the leftmost of that rightmost section</li>
<li><code>$local_time</code> : uses the WP API <code>current_time()</code> function to grab the time and date for the timezone registered in Settings &gt; General</li>
<li><code>$title</code> : This the text that actually displays in the admin bar. Can be text, variables, and HTML. Here we calculate the date and time first as <code>$local_time</code> and the result of that variable is what will display in the admin bar. If we wanted we could do <code>'title' =&gt; __( 4 * 8 )</code>, and <code>32</code> is what would be shown in the admin bar.</li>
<li><code>href</code> : If you are making this a hyperlink then put the destination URL here. In this example, <code>options-general.php</code> is the Settings &gt; General page so you can change time and date if you want</li>
</ul>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action( 'admin_bar_menu', 'wpdocs_add_date_time_adminbar_right', 500 );
function wpdocs_add_date_time_adminbar_right( WP_Admin_Bar $wp_admin_bar ) {
    $parent_slug = 'adminbar-date-time';
    $local_time  = date( 'Y-m-d, g:i a', current_time( 'timestamp', 0 ) );

    $wp_admin_bar-&gt;add_menu( array(
        'id'     =&gt; $parent_slug,
        'parent' =&gt; 'top-secondary',
        'group'  =&gt; null,
        'title'  =&gt; $local_time,
        'href'   =&gt; admin_url( '/options-general.php' ),
    ) );
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6664">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-charlestonsw odd alt thread-even depth-1 bad-note" data-comment-id="960" id="comment-960">
<article class="comment-body" id="div-comment-960">
<a class="screen-reader-text" href="#comment-content-960">Skip to note 9 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-960">
<p>Find the order that hooks and filters are called here: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference" rel="nofollow ugc">https://codex.wordpress.org/Plugin_API/Action_Reference</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-960">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-mdshuvo even thread-odd thread-alt depth-1 bad-note" data-comment-id="5234" id="comment-5234">
<article class="comment-body" id="div-comment-5234">
<a class="screen-reader-text" href="#comment-content-5234">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5234">
<p>This is how you can add admin bar menus to the right side.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action( 'admin_bar_menu', 'admin_bar_item', 500 );
function admin_bar_menus( WP_Admin_Bar $wp_admin_bar ) {

    $parent_slug = 'license-manager-wppt';

    $wp_admin_bar-&gt;add_menu( array(
        'id'    =&gt; $parent_slug,
        'parent' =&gt; 'top-secondary',
        'group'  =&gt; null,
        'title' =&gt; __( 'License Manager', 'lmfwppt' ),
        'href'  =&gt; admin_url('admin.php?page=license-manager-wppt'),
    ) );

}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-5234">
<ul class="children">
<li class="comment byuser comment-author-codeslayer2010 odd alt depth-2" data-comment-id="6649" id="comment-6649">
<article class="comment-body" id="div-comment-6649">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6649">
<div>When this code is added to a Code Snippet this error appears and breaks the editor area of the dashboard:  Fatal error: Uncaught TypeError: call_user_func_array(): Argument #1 ($callback) must be a valid callback, function “admin_bar_item” not found or invalid function name in T:\csite_30_elijahStreams\_dev\wp-includes\class-wp-hook.php on line 310 ( ! ) TypeError: call_user_func_array(): Argument #1 ($callback) must be a valid callback, function “admin_bar_item” not found or invalid function name in T:\csite_30_elijahStreams\_dev\wp-includes\class-wp-hook.php on line 310</div>
<div><a class="url" href="https://profiles.wordpress.org/codeslayer2010/" rel="external nofollow">Eric Hepperle</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/admin_bar_menu/#comment-6649"><time datetime="2023-08-24T18:58:31+00:00">1 year ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
