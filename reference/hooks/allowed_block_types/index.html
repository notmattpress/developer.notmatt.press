
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span class="is-current-page">allowed_block_types</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>allowed_block_types</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">apply_filters_deprecated</span>( ‘allowed_block_types’,  <nobr><span class="arg-type">bool|string[]</span> <span class="arg-name">$allowed_block_types</span></nobr>,  <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Filters the allowed block types for the editor.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$allowed_block_types</code><span class="type"><span class="bool">bool</span>|<span class="string[]">string[]</span></span></dt><dd><div class="desc"><span class="description">Array of block type slugs, or boolean to enable/disable all.<br/>
Default true (all registered block types supported)</span></div></dd><dt><code>$post</code><span class="type"><span class="WP_Post"><a href="https://developer.notmatt.press/reference/classes/wp_post/" rel="class">WP_Post</a></span></span></dt><dd><div class="desc"><span class="description">The post resource data.</span></div></dd></dl></section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="142"><code class="language-php line-numbers" id="wporg-source-code" lang="php">$allowed_block_types = apply_filters_deprecated( 'allowed_block_types', array( $allowed_block_types, $post ), '5.8.0', 'allowed_block_types_all' );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/block-editor.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/block-editor.php#L142">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/block-editor.php#L142-L142">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_allowed_block_types/">get_allowed_block_types()</a><code>wp-includes/block-editor.php</code></td><td><p>Gets the list of allowed block types to use in the block editor.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.8.0/">5.8.0</a></td><td><span class="since-description">Use the <a href="https://developer.notmatt.press/reference/hooks/allowed_block_types_all/">'allowed_block_types_all'</a> filter instead.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.0.0/">5.0.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-tnolte even thread-odd thread-alt depth-1" data-comment-id="4700" id="comment-4700">
<article class="comment-body" id="div-comment-4700">
<a class="screen-reader-text" href="#comment-content-4700">Skip to note 4 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4700">
<p>It would appear that as of WordPress 5.6 the <code>core-embed/*</code> blocks have all been replaced with Variations so this functionality now no longer works for all the various Embed “blocks”.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4700">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-katrinadtl odd alt thread-even depth-1" data-comment-id="4392" id="comment-4392">
<article class="comment-body" id="div-comment-4392">
<a class="screen-reader-text" href="#comment-content-4392">Skip to note 5 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4392">
<p>When filtering for allowed block types, return the boolean for the post types you are not restricting. Otherwise, it won’t work as Nilambar’s example because <code>$allowed_block_types</code> is expecting an array or a boolean.<br>
This worked for me when filtering allowed blocks for a custom post type. You’ll want to substitute ‘myplugin’ with your namespace and the post types you’re filtering in the switch statement.<br/>
<code></code></br></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function myplugin_allowed_block_types( $allowed_block_types, $post ) {
	
	switch( $post-&gt;post_type ) {
        case 'my_cpt_1':
            return array( 'core/paragraph' );
            break;
        case 'my_cpt_2':
            return array( 'core/paragraph', 'core/heading' );
            break;
        default:
            return true;
    }

    return $allowed_block_types;

}
add_filter( 'allowed_block_types', 'myplugin_allowed_block_types', 10, 2 );</code></pre>
<p></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-4392">
<ul class="children">
<li class="comment byuser comment-author-devper even depth-2" data-comment-id="4479" id="comment-4479">
<article class="comment-body" id="div-comment-4479">
<div class="wporg-has-embedded-code comment-content" id="comment-content-4479">
<div>I would recommend to use Nilambar Sharma’s example rather than this one.  First of all this example is expecting that no one else has already used this hook. If non of the cases is true, this example will set <code>$allowed_block_types</code> to true no matter if someone else has used this hook to allow or forbid block-types for any other post-types. Returning the current value of <code>$allowed_block_types</code> is the better option because when no one has ever used this hook, <code>$allowed_block_types</code> will be true by default. If someone has used it <code>$allowed_block_types</code> will be true, false or an array.  Second of all the return statement in line 14 is unreachable and therefore unnecessary.</div>
<div><a class="url" href="https://profiles.wordpress.org/devper/" rel="external nofollow">devper</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/allowed_block_types/#comment-4479"><time datetime="2020-11-02T14:58:01+00:00">4 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-rabmalin odd alt thread-odd thread-alt depth-1" data-comment-id="3176" id="comment-3176">
<article class="comment-body" id="div-comment-3176">
<a class="screen-reader-text" href="#comment-content-3176">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3176">
<p>This allows only paragraph block for post.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function wpdocs_allowed_block_types( $allowed_block_types, $post ) {
    if ( $post-&gt;post_type !== 'post' ) {
        return $allowed_block_types;
    }

    return array( 'core/paragraph' );
}

add_filter( 'allowed_block_types', 'wpdocs_allowed_block_types', 10, 2 );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-3176">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
