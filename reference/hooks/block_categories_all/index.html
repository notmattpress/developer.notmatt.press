
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span class="is-current-page">block_categories_all</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>block_categories_all</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">apply_filters</span>( ‘block_categories_all’,  <nobr><span class="arg-type">array[]</span> <span class="arg-name">$block_categories</span></nobr>,  <nobr><span class="arg-type">WP_Block_Editor_Context</span> <span class="arg-name">$block_editor_context</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Filters the default array of categories for block types.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$block_categories</code><span class="type"><span class="array[]">array[]</span></span></dt><dd><div class="desc"><span class="description">Array of categories for block types.</span></div></dd><dt><code>$block_editor_context</code><span class="type"><span class="WP_Block_Editor_Context"><a href="https://developer.notmatt.press/reference/classes/wp_block_editor_context/" rel="class">WP_Block_Editor_Context</a></span></span></dt><dd><div class="desc"><span class="description">The current block editor context.</span></div></dd></dl></section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="86"><code class="language-php line-numbers" id="wporg-source-code" lang="php">$block_categories = apply_filters( 'block_categories_all', $block_categories, $block_editor_context );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/block-editor.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/block-editor.php#L86">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/block-editor.php#L86-L86">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/get_block_categories/">get_block_categories()</a><code>wp-includes/block-editor.php</code></td><td><p>Returns all the categories for block types that will be shown in the block editor.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.8.0/">5.8.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-wpsuika even thread-even depth-1" data-comment-id="6056" id="comment-6056">
<article class="comment-body" id="div-comment-6056">
<a class="screen-reader-text" href="#comment-content-6056">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6056">
<p>Adding a new (custom) block category and show that category at the top</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">// Adding a new (custom) block category and show that category at the top
add_filter( 'block_categories_all', 'example_block_category', 10, 2);
function example_block_category( $categories, $post ) {
	
	array_unshift( $categories, array(
		'slug'	=&gt; 'example',
		'title' =&gt; 'Example'
	) );

	return $categories;
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6056">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-heldervilela odd alt thread-odd thread-alt depth-1" data-comment-id="5217" id="comment-5217">
<article class="comment-body" id="div-comment-5217">
<a class="screen-reader-text" href="#comment-content-5217">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5217">
<p>Adding a new (custom) block category.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Adding a new (custom) block category.
 *
 * @param   array $block_categories                         Array of categories for block types.
 * @param   WP_Block_Editor_Context $block_editor_context 	The current block editor context.
 */
function wpdocs_add_new_block_category( $block_categories, $block_editor_context ) {
	// You can add extra validation such as seeing which post type
	// is used to only include categories in some post types.
	// if ( in_array( $block_editor_context-&gt;post-&gt;post_type, ['post', 'my-post-type'] ) ) { ... }

	return array_merge(
		$block_categories,
		[
			[
				'slug'  =&gt; 'my-block-category',
				'title' =&gt; esc_html__( 'My Block Category', 'text-domain' ),
				'icon'  =&gt; 'wordpress', // Slug of a WordPress Dashicon or custom SVG
			],
		]
	);
}

add_filter( 'block_categories_all', 'wpdocs_add_new_block_category' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5217">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-michaelbourne even thread-even depth-1" data-comment-id="5218" id="comment-5218">
<article class="comment-body" id="div-comment-5218">
<a class="screen-reader-text" href="#comment-content-5218">Skip to note 9 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5218">
<p>Just a note that in base version WP 5.8, <code>$block_editor_context</code> can be either an <code>object</code> or a <code>string</code>. If you are using this filter and type hinting your callback, this could be the cause of the errors you’re undoubtedly seeing. </p>
<p>Using @heldervilela code above as an example, you may need to do this:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Adding a new (custom) block category.
 *
 * @param   array $block_categories                                Array of categories for block types.
 * @param   WP_Block_Editor_Context|string $block_editor_context   The current block editor context, or a string defining the context.
 */
function wpdocs_add_new_block_category( $block_categories, $block_editor_context ) {
    // Check the context of this filter, return default if not in the post/page block editor.
    // Alternatively, use this check to add custom categories to only the customizer or widget screens.
    if ( ! ( $block_editor_context instanceof WP_Block_Editor_Context ) ) {
        return $block_categories;
    }

    // You can add extra validation such as seeing which post type
    // is used to only include categories in some post types.
    // if ( in_array( $block_editor_context-&gt;post-&gt;post_type, ['post', 'my-post-type'] ) ) { ... }
 
    return array_merge(
        $block_categories,
        [
            [
                'slug'  =&gt; 'my-block-category',
                'title' =&gt; esc_html__( 'My Block Category', 'text-domain' ),
                'icon'  =&gt; 'wordpress', // Slug of a WordPress Dashicon or custom SVG
            ],
        ]
    );
}
 
add_filter( 'block_categories_all', 'wpdocs_add_new_block_category' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5218">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-ronalfy odd alt thread-odd thread-alt depth-1" data-comment-id="5232" id="comment-5232">
<article class="comment-body" id="div-comment-5232">
<a class="screen-reader-text" href="#comment-content-5232">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5232">
<p>This snippet allows you to add block categories on WP 5.8 and below.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">if ( version_compare( $GLOBALS['wp_version'], '5.8-alpha-1', '&lt;' ) ) {
	add_filter( 'block_categories', 'wpdocs_add_block_category', 10, 2 );
} else {
	add_filter( 'block_categories_all', 'wpdocs_add_block_category', 10, 2 );
}

/**
 * Adding a new (custom) block category.
 *
 * @param   array                   $block_categories       Array of categories for block types.
 * @param   WP_Block_Editor_Context $block_editor_context   The current block editor context.
 */
function wpdocs_add_block_category( $block_categories, $block_editor_context ) {
	return array_merge(
		$block_categories,
		array(
			array(
				'slug'  =&gt; 'block-slug',
				'title' =&gt; __( 'Block Category Title', 'text-domain' ),
			),
		)
	);
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-5232">
<ul class="children">
<li class="comment byuser comment-author-strarsis even depth-2" data-comment-id="5822" id="comment-5822">
<article class="comment-body" id="div-comment-5822">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5822">
<div>The old, deprecated <code>block_categories</code> filter passes a <code>WP_Post</code> instance as 2nd argument, the filter handler should check for that, as it currently always expects a `<a href="https://developer.notmatt.press/reference/classes/wp_block_editor_context/" rel="class">WP_Block_Editor_Context</a>` instance of the new <code>block_categories_all</code> filter.  The documentation recommends to check for the existence of the <code>WP_Block_Editor_Context</code> class as feature detection for the newer <code>block_categories_all</code> filter, see <a href="https://developer.notmatt.press/block-editor/reference-guides/filters/block-filters/#block_categories_all" rel="ugc">https://developer.notmatt.press/block-editor/reference-guides/filters/block-filters/#block_categories_all</a></div>
<div><a class="url" href="https://profiles.wordpress.org/strarsis/" rel="external nofollow">strarsis</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/block_categories_all/#comment-5822"><time datetime="2022-05-11T21:32:35+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-binsaifullah odd alt thread-even depth-1" data-comment-id="5672" id="comment-5672">
<article class="comment-body" id="div-comment-5672">
<a class="screen-reader-text" href="#comment-content-5672">Skip to note 11 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5672">
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">// Boilerplate - a prefix: change it as per yours

  if ( ! function_exists( 'boilerplate_register_block_category' ) ) {

	// wordpress version check and load filter for block category

	if( version_compare( $GLOBALS['wp_version'], '5.7', '&lt;' ) ) {
		add_filter( 'block_categories', 'boilerplate_register_block_category', 10, 2 );
	} else {
		add_filter( 'block_categories_all', 'boilerplate_register_block_category', 10, 2 );
	}

	/**
	 * Register custom category for blocks
	 */

	function boilerplate_register_block_category( $categories, $post ) {
		return array_merge(
			array(
				array(
					'slug'  =&gt; 'boilerplate',
					'title' =&gt; __( 'Boilerplate', 'boilerplate' ),
				),
			),
			$categories,
		);
	}

  }</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-5672">
<ul class="children">
<li class="comment byuser comment-author-strarsis even depth-2" data-comment-id="5821" id="comment-5821">
<article class="comment-body" id="div-comment-5821">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5821">
<div>The new <code>block_categories_all</code> filter passes as 2nd parameter a <code>WP_Block_Editor_Context</code> instead of a <code>WP_Post</code> instance. The post can be accessed as <code>WP_Block_Editor_Context</code> <code>post</code> property. Therefore your filter handler should check whether the 2nd parameter is a <code>WP_Post</code> or a <code>WP_Block_Editor_Context</code> so the post instance is correctly retrieved for further usage. The documentation recommends to check for the existence of the <code>WP_Block_Editor_Context</code> class as feature detection for the newer <code>block_categories_all</code> filter, see <a href="https://developer.notmatt.press/block-editor/reference-guides/filters/block-filters/#block_categories_all" rel="ugc">https://developer.notmatt.press/block-editor/reference-guides/filters/block-filters/#block_categories_all</a></div>
<div><a class="url" href="https://profiles.wordpress.org/strarsis/" rel="external nofollow">strarsis</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/block_categories_all/#comment-5821"><time datetime="2022-05-11T21:27:45+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-afterglow22 odd alt thread-odd thread-alt depth-1" data-comment-id="6633" id="comment-6633">
<article class="comment-body" id="div-comment-6633">
<a class="screen-reader-text" href="#comment-content-6633">Skip to note 12 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6633">
<p>Declare a block category just once, or it will throw an error. It is useful to know if you split your code in several plugins.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function my_block_category( $categories, $post ) {
        
    $category = array(
        'slug'  =&gt; 'my-category-slug',
        'title' =&gt; 'My category name,
    );

    if ( is_array( $categories ) ) {
        $existingSlugs = array_column( $categories, 'slug' );

        if ( is_array( $existingSlugs ) ) {
            if ( in_array( $category['slug'], $existingSlugs ) ) {
                return $categories; // Bail early if category exists
            }
        }
    }
        
    array_unshift( $categories, $category ); // Add category on top of pile

    return $categories;
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6633">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
