
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span><a href="https://developer.wordpress.org/reference/classes/wp_customize_manager/customize_preview_init/">WP_Customize_Manager::customize_preview_init</a></span><span class="is-current-page">customize_preview_init</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>customize_preview_init</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">do_action</span>( ‘customize_preview_init’,  <nobr><span class="arg-type">WP_Customize_Manager</span> <span class="arg-name">$manager</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Fires once the Customizer preview has initialized and JavaScript settings have been printed.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$manager</code><span class="type"><span class="WP_Customize_Manager"><a href="https://developer.notmatt.press/reference/classes/wp_customize_manager/" rel="class">WP_Customize_Manager</a></span></span></dt><dd><div class="desc"><span class="description"><a href="https://developer.notmatt.press/reference/classes/wp_customize_manager/" rel="class">WP_Customize_Manager</a> instance.</span></div></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<p>This action hook allows you to enqueue assets (such as javascript files) directly in the Theme Customizer <em>only</em>. To output saved settings onto your live site, you still need to output generated CSS using the <a href="https://developer.notmatt.press/reference/hooks/wp_head/">wp_head</a> hook.</p>
<p>Generally, this hook is used almost exclusively to enqueue a <em>theme-customizer.js</em> file for controlling live previews in WordPress’s Theme Customizer.</p>
<p>For more information, see the Theme Handbook article on the <a href="https://developer.notmatt.press/themes/customize-api/">Theme_Customization_API</a>.</p>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1960"><code class="language-php line-numbers" id="wporg-source-code" lang="php">do_action( 'customize_preview_init', $this );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/class-wp-customize-manager.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/class-wp-customize-manager.php#L1960">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/class-wp-customize-manager.php#L1960-L1960">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_customize_manager/customize_preview_init/">WP_Customize_Manager::customize_preview_init()</a><code>wp-includes/class-wp-customize-manager.php</code></td><td><p>Prints JavaScript settings.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/3.4.0/">3.4.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-stevenlinx even thread-even depth-1" data-comment-id="4429" id="comment-4429">
<article class="comment-body" id="div-comment-4429">
<a class="screen-reader-text" href="#comment-content-4429">Skip to note 5 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4429">
<p>Example migrated from Codex:</p>
<p>Usage might look like this…</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * This outputs the javascript needed to automate the live settings preview.
 * Also keep in mind that this function isn't necessary unless your settings 
 * are using 'transport'=&gt;'postMessage' instead of the default 'transport'
 * =&gt; 'refresh'
 * 
 * Used by hook: 'customize_preview_init'
 */
public static function mytheme_customizer_live_preview()
{
	wp_enqueue_script( 
		  'mytheme-themecustomizer',			//Give the script an ID
		  get_template_directory_uri().'/assets/js/theme-customizer.js',//Point to file
		  array( 'jquery','customize-preview' ),	//Define dependencies
		  '',						//Define a version (optional) 
		  true						//Put script in footer?
	);
}
add_action( 'customize_preview_init', 'mytheme_customizer_live_preview' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4429">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-stevenlinx odd alt thread-odd thread-alt depth-1" data-comment-id="4430" id="comment-4430">
<article class="comment-body" id="div-comment-4430">
<a class="screen-reader-text" href="#comment-content-4430">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4430">
<p>Example migrated from Codex:</p>
<p><strong>Example Javascript Handler</strong></p>
<p>The following is one example of what a Javascript live preview file might look like for a custom implementation of the Theme Customizer…</p>
<p>The contents of your theme-customizer.js file might look like this:</p>
<pre class="wp-block-code"><code class="language-js line-numbers" lang="js">/**
 * This file adds some LIVE to the Theme Customizer live preview. To leverage
 * this, set your custom settings to 'postMessage' and then add your handling
 * here. Your javascript should grab settings from customizer controls, and 
 * then make any necessary changes to the page using jQuery.
 */
( function( $ ) {

	// Update the site title in real time...
	wp.customize( 'blogname', function( value ) {
		value.bind( function( newval ) {
			$( '#site-title a' ).html( newval );
		} );
	} );
	
	//Update the site description in real time...
	wp.customize( 'blogdescription', function( value ) {
		value.bind( function( newval ) {
			$( '.site-description' ).html( newval );
		} );
	} );

	//Update site title color in real time...
	wp.customize( 'header_textcolor', function( value ) {
		value.bind( function( newval ) {
			$('#site-title a').css('color', newval );
		} );
	} );

	//Update site background color...
	wp.customize( 'background_color', function( value ) {
		value.bind( function( newval ) {
			$('body').css('background-color', newval );
		} );
	} );
	
	//Update site title color in real time...
	wp.customize( 'mytheme_options[link_textcolor]', function( value ) {
		value.bind( function( newval ) {
			$('a').css('color', newval );
		} );
	} );
	
} )( jQuery );</code></pre>
<p>As you can see from the example above, a single basic handler looks like this…</p>
<pre class="wp-block-code"><code class="language-js line-numbers" lang="js">wp.customize( 'YOUR_SETTING_ID', function( value ) {
	value.bind( function( newval ) {
		//Do stuff (newval variable contains your "new" setting data)
	} );
} );</code></pre>
<p>Note:<br/>
Keep in mind that the above will <em>only</em> work if you have set all referenced <code>SETTINGS</code> to ‘<code>transport</code>‘=&gt;’<code>postMessage</code>‘. By default, WordPress uses ‘<code>transport</code>‘=&gt;’<code>refresh</code>‘ for all settings (including the ones that are built in). You can override those defaults using the <a href="https://developer.notmatt.press/reference/hooks/customize_register/">customize_register</a> action hook.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4430">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-iamjaydip even thread-even depth-1" data-comment-id="5614" id="comment-5614">
<article class="comment-body" id="div-comment-5614">
<a class="screen-reader-text" href="#comment-content-5614">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-5614">
<p>When using the theme customizer’s live preview, this is an example of how to enqueue scripts.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function wpdocs_enqueue_customize_preview_script() {
	$theme = wp_get_theme();

	wp_register_script(
		'wpdocs-cript',
		get_theme_file_uri( 'js/script.js' ),
		array( 'jquery', 'customize-preview' ),
		$theme-&gt;get( 'Version' ),
	);

	wp_enqueue_script( 'wpdocs-script' );
}

add_action( 'customize_preview_init', 'wpdocs_enqueue_customize_preview_script' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-5614">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-stakazawa odd alt thread-odd thread-alt depth-1" data-comment-id="7149" id="comment-7149">
<article class="comment-body" id="div-comment-7149">
<a class="screen-reader-text" href="#comment-content-7149">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-7149">
<p>The customize_preview_init hook is used to add scripts at the time when the preview is initialized in the WordPress Theme Customizer. This hook allows you to add JavaScript code for real-time preview functionality in the Customizer.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-7149">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
