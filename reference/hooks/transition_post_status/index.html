
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span class="is-current-page">transition_post_status</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>transition_post_status</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">do_action</span>( ‘transition_post_status’,  <nobr><span class="arg-type">string</span> <span class="arg-name">$new_status</span></nobr>,  <nobr><span class="arg-type">string</span> <span class="arg-name">$old_status</span></nobr>,  <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Fires when a post is transitioned from one status to another.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$new_status</code><span class="type"><span class="string">string</span></span></dt><dd><div class="desc"><span class="description">New post status.</span></div></dd><dt><code>$old_status</code><span class="type"><span class="string">string</span></span></dt><dd><div class="desc"><span class="description">Old post status.</span></div></dd><dt><code>$post</code><span class="type"><span class="WP_Post"><a href="https://developer.notmatt.press/reference/classes/wp_post/" rel="class">WP_Post</a></span></span></dt><dd><div class="desc"><span class="description">Post object.</span></div></dd></dl></section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="5690"><code class="language-php line-numbers" id="wporg-source-code" lang="php">do_action( 'transition_post_status', $new_status, $old_status, $post );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/post.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/post.php#L5690">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/post.php#L5690-L5690">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_transition_post_status/">wp_transition_post_status()</a><code>wp-includes/post.php</code></td><td><p>Fires actions related to the transitioning of a post’s status.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.3.0/">2.3.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-ravanh odd alt thread-odd thread-alt depth-1" data-comment-id="2977" id="comment-2977">
<article class="comment-body" id="div-comment-2977">
<a class="screen-reader-text" href="#comment-content-2977">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-2977">
<p>Please note that the name transition_post_status is misleading. The hook does not only fire on a post status <em>transition</em> but also when a post is updated while the status is not changed from one to another at all.</p>
<p>So if you wish to really only do stuff on <strong>status transition</strong> and not on regular post updates, you will need to (at least) start with a basic bailout like this:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Do stuff only when posts are actually transitioned from one status to another.
 *
 * @param string  $new_status New post status.
 * @param string  $old_status Old post status.
 * @param WP_Post $post       Post object.
 */
function wpdocs_run_on_transition_only( $new_status, $old_status, $post ) {
    if ( $old_status == $new_status )
		return;

	// do stuff
}
add_action( 'transition_post_status', 'wpdocs_run_on_transition_only', 10, 3 );</code></pre>
<p>For doing stuff when moving <strong>in and out (!) of published status</strong> only, use </p>
<pre class="wp-block-code"><code class="language-php" lang="php">if ( $old_status == $new_status || $old_status != 'publish' &amp;&amp; $new_status != 'publish' )
	return;

// do stuff</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-2977">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-drewapicture even thread-even depth-1" data-comment-id="244" id="comment-244">
<article class="comment-body" id="div-comment-244">
<a class="screen-reader-text" href="#comment-content-244">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-244">
<p>Sometimes you only want to fire a callback when a post status is <em>transitioned</em> to ‘publish’, i.e. coming from some other status other than publish (published posts retain the publish status even when updating).</p>
<p><strong>Only fire a callback when a post status is transitioned to publish</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">/**
 * Fire a callback only when my-custom-post-type posts are transitioned to 'publish'.
 *
 * @param string  $new_status New post status.
 * @param string  $old_status Old post status.
 * @param WP_Post $post       Post object.
 */
function wpdocs_run_on_publish_only( $new_status, $old_status, $post ) {
	if ( ( 'publish' === $new_status &amp;&amp; 'publish' !== $old_status )
		&amp;&amp; 'my-custom-post-type' === $post-&gt;post_type
	) {
			// do stuff
	}
}
add_action( 'transition_post_status', 'wpdocs_run_on_publish_only', 10, 3 );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-244">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-mrasharirfan odd alt thread-odd thread-alt depth-1" data-comment-id="1753" id="comment-1753">
<article class="comment-body" id="div-comment-1753">
<a class="screen-reader-text" href="#comment-content-1753">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1753">
<p><strong>Example: Check if someone published a custom post type first time.</strong></p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">// Check to see if user posted first time.
add_action( 'transition_post_status', 'some_function', 10, 3 );
function some_function( $new, $old, $post ) {
    if ( ( $new == 'publish' ) &amp;&amp; ( $old != 'publish' ) &amp;&amp; ( $post-&gt;post_type == 'your_post_type' ) ) {
		// do stuff
	} else {
		return;
	}
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-1753">
<ul class="children">
<li class="comment byuser comment-author-crstauf even depth-2" data-comment-id="3824" id="comment-3824">
<article class="comment-body" id="div-comment-3824">
<div class="wporg-has-embedded-code comment-content" id="comment-content-3824">
<div>This does not guarantee that it is the <em>first</em> time the post was published: it will fire if the post was published, changed to a different status, and then published again.</div>
<div><a class="url" href="https://profiles.wordpress.org/crstauf/" rel="external nofollow">crstauf</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/transition_post_status/#comment-3824"><time datetime="2020-05-01T14:21:19+00:00">5 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-bplv odd alt thread-even depth-1" data-comment-id="3712" id="comment-3712">
<article class="comment-body" id="div-comment-3712">
<a class="screen-reader-text" href="#comment-content-3712">Skip to note 9 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3712">
<p>If you are looking to hook something on a specific post status change you can also use this hook</p>
<pre class="wp-block-code"><code class="language-php" lang="php">do_action( "{$old_status}_to_{$new_status}", $post );</code></pre>
<p>This could be used for two specific post status. For example if you are looking to hook something when a draft post is published you can use this hook like this,</p>
<pre class="wp-block-code"><code class="language-php" lang="php"> add_action( "draft_to_publish", function( $post ) { //do something here } );</code></pre>
<p>Of course this opens up a possibility for so many things and you don’t have to keep relying on <code> transition_post_status</code> which runs even when post status are not changed.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="1" id="feedback-3712">
<ul class="children">
<li class="comment byuser comment-author-vloo even depth-2" data-comment-id="5727" id="comment-5727">
<article class="comment-body" id="div-comment-5727">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5727">
<div>It’s important to note that using anonymous functions in <a href="https://developer.notmatt.press/reference/functions/add_action/" rel="function">add_action()</a>  or <a href="https://developer.notmatt.press/reference/functions/add_filter/" rel="function">add_filter()</a>  is in most cases an incredibly bad idea. This would make the code in the functions really hard to get rid of from another plugin or theme. In cases when your code is to be used in other people’s projects, anonymous functions are almost “immune” to being removed through remove_function() or <a href="https://developer.notmatt.press/reference/functions/remove_filter/" rel="function">remove_filter()</a>  and it’s rarely the case that one would look after this effect.</div>
<div><a class="url" href="https://profiles.wordpress.org/vloo/" rel="external nofollow">Vladimir Vassilev</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/transition_post_status/#comment-5727"><time datetime="2022-03-10T14:15:10+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-aurovrata odd alt thread-odd thread-alt depth-1" data-comment-id="3821" id="comment-3821">
<article class="comment-body" id="div-comment-3821">
<a class="screen-reader-text" href="#comment-content-3821">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-3821">
<p>Status can be one of: publish, future, draft, pending, private</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="2" id="feedback-3821">
<ul class="children">
<li class="comment byuser comment-author-crstauf even depth-2" data-comment-id="3825" id="comment-3825">
<article class="comment-body" id="div-comment-3825">
<div class="wporg-has-embedded-code comment-content" id="comment-content-3825">
<div>If there are plugins that introduce new status types, they may also be (untested) run through this hook.</div>
<div><a class="url" href="https://profiles.wordpress.org/crstauf/" rel="external nofollow">crstauf</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/transition_post_status/#comment-3825"><time datetime="2020-05-01T14:24:50+00:00">5 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
<li class="comment byuser comment-author-thomasebert odd alt depth-2" data-comment-id="5858" id="comment-5858">
<article class="comment-body" id="div-comment-5858">
<div class="wporg-has-embedded-code comment-content" id="comment-content-5858">
<div>This seems to be incomplete. List from old codex         <a href="https://codex.wordpress.org/Post_Status_Transitions" rel="nofollow ugc">https://codex.wordpress.org/Post_Status_Transitions</a>, section with title “The available post statuses are:”</div>
<div><a class="url" href="https://profiles.wordpress.org/thomasebert/" rel="external nofollow">te-online</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/transition_post_status/#comment-5858"><time datetime="2022-06-09T13:23:29+00:00">3 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
