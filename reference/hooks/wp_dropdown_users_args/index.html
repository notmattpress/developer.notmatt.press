
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/hooks/">Hooks</a></span><span class="is-current-page">wp_dropdown_users_args</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>wp_dropdown_users_args</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">apply_filters</span>( ‘wp_dropdown_users_args’,  <nobr><span class="arg-type">array</span> <span class="arg-name">$query_args</span></nobr>,  <nobr><span class="arg-type">array</span> <span class="arg-name">$parsed_args</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Filters the query arguments for the list of users in the dropdown.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$query_args</code><span class="type"><span class="array">array</span></span></dt><dd><div class="desc"><span class="description">The query arguments for <a href="https://developer.notmatt.press/reference/functions/get_users/" rel="function">get_users()</a> .</span><details class="extended-description"><summary>More Arguments from get_users( … $args )</summary><span class="description">Arguments to retrieve users. See <a href="https://developer.notmatt.press/reference/classes/wp_user_query/prepare_query/" rel="method">WP_User_Query::prepare_query()</a>                    for more information on accepted arguments.</span></details></div></dd><dt><code>$parsed_args</code><span class="type"><span class="array">array</span></span></dt><dd><div class="desc"><span class="description">The arguments passed to <a href="https://developer.notmatt.press/reference/functions/wp_dropdown_users/" rel="function">wp_dropdown_users()</a>  combined with the defaults.</span><details class="extended-description"><summary>More Arguments from wp_dropdown_users( … $args )</summary><span class="description">Array or string of arguments to generate a drop-down of users.<br/>
See <a href="https://developer.notmatt.press/reference/classes/wp_user_query/prepare_query/" rel="method">WP_User_Query::prepare_query()</a> for additional available arguments.<br/>
<ul class="param-hash"><li><code>show_option_all</code> <span class="type">string</span><div class="desc">Text to show as the drop-down default (all).<br/>
</div></li>
<li><code>show_option_none</code> <span class="type">string</span><div class="desc">Text to show as the drop-down default when no users were found. </div></li>
<li><code>option_none_value</code> <span class="type">int|string</span><div class="desc">Value to use for <code>$show_option_none</code> when no users were found. Default -1.</div></li>
<li><code>hide_if_only_one_author</code> <span class="type">string</span><div class="desc">Whether to skip generating the drop-down if only one user was found. </div></li>
<li><code>orderby</code> <span class="type">string</span><div class="desc">Field to order found users by. Accepts user fields.<br/>
Default <code>'display_name'</code>.</div></li>
<li><code>order</code> <span class="type">string</span><div class="desc">Whether to order users in ascending or descending order. Accepts <code>'ASC'</code> (ascending) or <code>'DESC'</code> (descending).<br/>
Default <code>'ASC'</code>.</div></li>
<li><code>include</code> <span class="type">int[]|string</span><div class="desc">Array or comma-separated list of user IDs to include.<br/>
</div></li>
<li><code>exclude</code> <span class="type">int[]|string</span><div class="desc">Array or comma-separated list of user IDs to exclude.<br/>
</div></li>
<li><code>multi</code> <span class="type">bool|int</span><div class="desc">Whether to skip the ID attribute on the <code>'select'</code> element.<br/>
Accepts <code>1|true</code> or <code>0|false</code>. Default <code>0|false</code>.</div></li>
<li><code>show</code> <span class="type">string</span><div class="desc">User data to display. If the selected item is empty then the <code>'user_login'</code> will be displayed in parentheses.<br/>
Accepts any user field, or <code>'display_name_with_login'</code> to show the display name with user_login in parentheses.<br/>
Default <code>'display_name'</code>.</div></li>
<li><code>echo</code> <span class="type">int|bool</span><div class="desc">Whether to echo or return the drop-down. Accepts <code>1|true</code> (echo) or <code>0|false</code> (return). Default <code>1|true</code>.</div></li>
<li><code>selected</code> <span class="type">int</span><div class="desc">Which user ID should be selected. Default 0.</div></li>
<li><code>include_selected</code> <span class="type">bool</span><div class="desc">Whether to always include the selected user ID in the drop- down. Default false.</div></li>
<li><code>name</code> <span class="type">string</span><div class="desc">Name attribute of select element. Default <code>'user'</code>.</div></li>
<li><code>id</code> <span class="type">string</span><div class="desc">ID attribute of the select element. Default is the value of <code>$name</code>.</div></li>
<li><code>class</code> <span class="type">string</span><div class="desc">Class attribute of the select element. </div></li>
<li><code>blog_id</code> <span class="type">int</span><div class="desc">ID of blog (Multisite only). Default is ID of the current blog.</div></li>
<li><code>who</code> <span class="type">string</span><div class="desc">Deprecated, use <code>$capability</code> instead.<br/>
Which type of users to query. Accepts only an empty string or <code>'authors'</code>. Default empty (all users).</div></li>
<li><code>role</code> <span class="type">string|string[]</span><div class="desc">An array or a comma-separated list of role names that users must match to be included in results. Note that this is an inclusive list: users must match *each* role. </div></li>
<li><code>role__in</code> <span class="type">string[]</span><div class="desc">An array of role names. Matched users must have at least one of these roles. Default empty array.</div></li>
<li><code>role__not_in</code> <span class="type">string[]</span><div class="desc">An array of role names to exclude. Users matching one or more of these roles will not be included in results. Default empty array.</div></li>
<li><code>capability</code> <span class="type">string|string[]</span><div class="desc">An array or a comma-separated list of capability names that users must match to be included in results. Note that this is an inclusive list: users must match *each* capability.<br/>
Does NOT work for capabilities not in the database or filtered via <a href="https://developer.notmatt.press/reference/hooks/map_meta_cap/">'map_meta_cap'</a>. </div></li>
<li><code>capability__in</code> <span class="type">string[]</span><div class="desc">An array of capability names. Matched users must have at least one of these capabilities.<br/>
Does NOT work for capabilities not in the database or filtered via <a href="https://developer.notmatt.press/reference/hooks/map_meta_cap/">'map_meta_cap'</a>. Default empty array.</div></li>
<li><code>capability__not_in</code> <span class="type">string[]</span><div class="desc">An array of capability names to exclude. Users matching one or more of these capabilities will not be included in results.<br/>
Does NOT work for capabilities not in the database or filtered via <a href="https://developer.notmatt.press/reference/hooks/map_meta_cap/">'map_meta_cap'</a>. Default empty array.</div></li>
</ul>
</span></details></div></dd></dl></section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="1713"><code class="language-php line-numbers" id="wporg-source-code" lang="php">$query_args = apply_filters( 'wp_dropdown_users_args', $query_args, $parsed_args );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/user.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-includes/user.php#L1713">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/user.php#L1713-L1713">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/functions/wp_dropdown_users/">wp_dropdown_users()</a><code>wp-includes/user.php</code></td><td><p>Creates dropdown HTML content of users.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/4.4.0/">4.4.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-jg-visual odd alt thread-odd thread-alt depth-1" data-comment-id="1024" id="comment-1024">
<article class="comment-body" id="div-comment-1024">
<a class="screen-reader-text" href="#comment-content-1024">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1024">
<p>This filter allows you to set subscribers as authors of blog posts within the admin without giving them additional privileges. Here’s the code:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_filter( 'wp_dropdown_users_args', 'wpdocs_add_subscribers_to_dropdown' );
function wpdocs_add_subscribers_to_dropdown( $query_args ) {

    $query_args['who'] = '';
    return $query_args;

}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="2" id="feedback-1024">
<ul class="children">
<li class="comment byuser comment-author-edouardflowasia even depth-2" data-comment-id="6134" id="comment-6134">
<article class="comment-body" id="div-comment-6134">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6134">
<div>I’ve been using this for a while and it was working well for both filtering by Author and Batch Editing post and assigning them to subscribers.  However batch editing now only shows Admin users.</div>
<div><a class="url" href="https://profiles.notmatt.press/edouardflowasia/" rel="external nofollow">edouardflowasia</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/wp_dropdown_users_args/#comment-6134"><time datetime="2022-10-14T08:06:45+00:00">2 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
<li class="comment byuser comment-author-lucaskich odd alt depth-2" data-comment-id="6394" id="comment-6394">
<article class="comment-body" id="div-comment-6394">
<div class="wporg-has-embedded-code comment-content" id="comment-content-6394">
<div>It seems like this code is not displaying subscribers in the dropdown anymore.</div>
<div><a class="url" href="https://profiles.notmatt.press/lucaskich/" rel="external nofollow">Kich</a> <a class="comment-date" href="https://developer.notmatt.press/reference/hooks/wp_dropdown_users_args/#comment-6394"><time datetime="2023-03-09T05:14:53+00:00">2 years ago</time></a></div>
</div><!-- .comment-content -->
</article>
</li>
</ul>
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-riseoflex88 even thread-even depth-1" data-comment-id="1607" id="comment-1607">
<article class="comment-body" id="div-comment-1607">
<a class="screen-reader-text" href="#comment-content-1607">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-1607">
<p>In addition to Jonathan’s contribution, you can also expand it further by specifying the role. This is undocumented on wp codex. But does work e.g.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function wpdocs_add_subscribers_to_dropdown( $query_args, $r ) {
 
	$query_args['role'] = array('contributor');

	// Unset the 'who' as this defaults to the 'author' role
	unset( $query_args['who'] );

	return $query_args;
}
add_filter( 'wp_dropdown_users_args', 'wpdocs_add_subscribers_to_dropdown', 10, 2 );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-1607">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-pgdarkness odd alt thread-odd thread-alt depth-1" data-comment-id="4087" id="comment-4087">
<article class="comment-body" id="div-comment-4087">
<a class="screen-reader-text" href="#comment-content-4087">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4087">
<p>In addition to RiseOfLex88’s contribution, you can also specify multiple roles.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">function wpdocs_add_subscribers_to_dropdown( $query_args ) {

	// Use this array to specify multiple roles to show in dropdown
    $query_args['role__in'] = array( 'contributor', 'administrator' );

	// Use this array to specify multiple roles to hide in dropdown
    $query_args['role__not_in'] = array( 'editor' );

    // Unset the 'who' as this defaults to the 'author' role
    unset( $query_args['who'] );
 
    return $query_args;
}
add_filter( 'wp_dropdown_users_args', 'wpdocs_add_subscribers_to_dropdown' );</code></pre>
<p>If you dump variable “$query_args” inside this function, this is what you will get:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">array(10) { 
  ["blog_id"]=&amp;gt; int(1) 
  ["include"]=&amp;gt; string(0) "" 
  ["exclude"]=&amp;gt; string(0) "" 
  ["orderby"]=&amp;gt; string(12) "display_name" 
  ["order"]=&amp;gt; string(3) "ASC" 
  ["who"]=&amp;gt; string(7) "authors" 
  ["role"]=&amp;gt; string(0) "" 
  ["role__in"]=&amp;gt; array(0) { } 
  ["role__not_in"]=&amp;gt; array(0) { } 
  ["fields"]=&amp;gt; array(3) { 
    [0]=&amp;gt; string(2) "ID" 
    [1]=&amp;gt; string(10) "user_login" 
    [2]=&amp;gt; string(12) "display_name" 
  } 
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4087">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-bookchiq even thread-even depth-1" data-comment-id="6209" id="comment-6209">
<article class="comment-body" id="div-comment-6209">
<a class="screen-reader-text" href="#comment-content-6209">Skip to note 9 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6209">
<p>Note that if you’re trying to filter the “Author” dropdown on the post editor screen, and the post editor is using Gutenberg, this filter doesn’t fire. You’ll need to work with the <a href="https://developer.notmatt.press/reference/hooks/rest_user_query/">rest_user_query</a> filter instead. (But also note that this filter is used for a lot more than the Author dropdown, so use it thoughtfully.)</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6209">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-jameskoussertari odd alt thread-odd thread-alt depth-1" data-comment-id="6924" id="comment-6924">
<article class="comment-body" id="div-comment-6924">
<a class="screen-reader-text" href="#comment-content-6924">Skip to note 10 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-6924">
<p>For this to work with Subscribers, you’ll also need to adjust the capability:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">// Show Subscribers in the 'author' drop down on the classic post editor
function wpdocs_add_subscribers_to_dropdown( $query_args ) {
    $query_args['who'] = ''; // reset the query
    $query_args['capability'] = ''; // reset the query
    $query_args['role__in'] = array( 'administrator', 'subscriber', 'author', 'editor' );
    $query_args['capability__in'] = array( 'edit_own_posts' ); // Custom capability for subscribers

    return $query_args;
}
add_filter( 'wp_dropdown_users_args', 'wpdocs_add_subscribers_to_dropdown' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-6924">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
