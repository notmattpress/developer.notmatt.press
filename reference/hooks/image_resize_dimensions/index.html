
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.notmatt.press">Home</a></span><span><a href="https://developer.notmatt.press/reference/">Reference</a></span><span><a href="https://developer.notmatt.press/reference/hooks/">Hooks</a></span><span class="is-current-page">image_resize_dimensions</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>image_resize_dimensions</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">apply_filters</span>( ‘image_resize_dimensions’,  <nobr><span class="arg-type">null|mixed</span> <span class="arg-name">$null</span></nobr>,  <nobr><span class="arg-type">int</span> <span class="arg-name">$orig_w</span></nobr>,  <nobr><span class="arg-type">int</span> <span class="arg-name">$orig_h</span></nobr>,  <nobr><span class="arg-type">int</span> <span class="arg-name">$dest_w</span></nobr>,  <nobr><span class="arg-type">int</span> <span class="arg-name">$dest_h</span></nobr>,  <nobr><span class="arg-type">bool|array</span> <span class="arg-name">$crop</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Filters whether to preempt calculating the image resize dimensions.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>Returning a non-null value from the filter will effectively short-circuit <a href="https://developer.notmatt.press/reference/functions/image_resize_dimensions/" rel="function">image_resize_dimensions()</a> , returning that value instead.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$null</code><span class="type"><span class="null">null</span>|<span class="mixed">mixed</span></span></dt><dd><div class="desc"><span class="description">Whether to preempt output of the resize dimensions.</span></div></dd><dt><code>$orig_w</code><span class="type"><span class="int">int</span></span></dt><dd><div class="desc"><span class="description">Original width in pixels.</span></div></dd><dt><code>$orig_h</code><span class="type"><span class="int">int</span></span></dt><dd><div class="desc"><span class="description">Original height in pixels.</span></div></dd><dt><code>$dest_w</code><span class="type"><span class="int">int</span></span></dt><dd><div class="desc"><span class="description">New width in pixels.</span></div></dd><dt><code>$dest_h</code><span class="type"><span class="int">int</span></span></dt><dd><div class="desc"><span class="description">New height in pixels.</span></div></dd><dt><code>$crop</code><span class="type"><span class="bool">bool</span>|<span class="array">array</span></span></dt><dd><div class="desc"><span class="description">Whether to crop image to specified width and height or resize.<br/>
An array can specify positioning of the crop area. Default false.</span></div></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<ul class="wp-block-list">
<li>Since version <a href="https://notmatt.press/support/wordpress-version/version-3-4/">3.4</a>, the <code>image_resize_dimensions</code> filter is used to filter the thumbnail and alternative sizes dimensions of image assets during resizing operations. This enables the override of WordPress default behavior on image resizing, including the thumbnail cropping.</li>
<li>Note that the filter function <strong>must</strong> return an array matching the parameters to <code>imagecopyresampled()</code>, <strong>or</strong> <code>false</code> if the resizing is impossible, <strong>or</strong> should not occur, <strong>or</strong> <code>null</code> to fallback to WordPress default behavior.</li>
</ul>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="564"><code class="language-php line-numbers" id="wporg-source-code" lang="php">$output = apply_filters( 'image_resize_dimensions', null, $orig_w, $orig_h, $dest_w, $dest_h, $crop );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/media.php/">View all references</a> <a href="https://core.trac.notmatt.press/browser/tags/6.7/src/wp-includes/media.php#L564">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/media.php#L564-L564">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/3.4.0/">3.4.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-stevenlinx odd alt thread-odd thread-alt depth-1" data-comment-id="4721" id="comment-4721">
<article class="comment-body" id="div-comment-4721">
<a class="screen-reader-text" href="#comment-content-4721">Skip to note 2 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4721">
<p>Example migrated from Codex:</p>
<p>This example filters the image resizing dimensions to force WordPress to crop thumbnails by keeping the top of the image, instead of the default center.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_filter( 'image_resize_dimensions', 'custom_image_resize_dimensions', 10, 6 );

function custom_image_resize_dimensions( $payload, $orig_w, $orig_h, $dest_w, $dest_h, $crop ){

	// Change this to a conditional that decides whether you 
	// want to override the defaults for this image or not.
	if( false )
		return $payload;

	if ( $crop ) {
		// crop the largest possible portion of the original image that we can size to $dest_w x $dest_h
		$aspect_ratio = $orig_w / $orig_h;
		$new_w = min($dest_w, $orig_w);
		$new_h = min($dest_h, $orig_h);

		if ( !$new_w ) {
			$new_w = intval($new_h * $aspect_ratio);
		}

		if ( !$new_h ) {
			$new_h = intval($new_w / $aspect_ratio);
		}

		$size_ratio = max($new_w / $orig_w, $new_h / $orig_h);

		$crop_w = round($new_w / $size_ratio);
		$crop_h = round($new_h / $size_ratio);

		$s_x = floor( ($orig_w - $crop_w) / 2 );
		$s_y = 0; // [[ formerly ]] ==&gt; floor( ($orig_h - $crop_h) / 2 );
	} else {
		// don't crop, just resize using $dest_w x $dest_h as a maximum bounding box
		$crop_w = $orig_w;
		$crop_h = $orig_h;

		$s_x = 0;
		$s_y = 0;

		list( $new_w, $new_h ) = wp_constrain_dimensions( $orig_w, $orig_h, $dest_w, $dest_h );
	}

	// if the resulting image would be the same size or larger we don't want to resize it
	if ( $new_w &gt;= $orig_w &amp;&amp; $new_h &gt;= $orig_h )
		return false;

	// the return array matches the parameters to imagecopyresampled()
	// int dst_x, int dst_y, int src_x, int src_y, int dst_w, int dst_h, int src_w, int src_h
	return array( 0, 0, (int) $s_x, (int) $s_y, (int) $new_w, (int) $new_h, (int) $crop_w, (int) $crop_h );

}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4721">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
