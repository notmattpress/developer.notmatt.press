
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span><a href="https://developer.wordpress.org/reference/classes/wp_upgrader/run/">WP_Upgrader::run</a></span><span class="is-current-page">upgrader_process_complete</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>upgrader_process_complete</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">do_action</span>( ‘upgrader_process_complete’,  <nobr><span class="arg-type">WP_Upgrader</span> <span class="arg-name">$upgrader</span></nobr>,  <nobr><span class="arg-type">array</span> <span class="arg-name">$hook_extra</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Fires when the upgrader process is complete.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>See also <a href="https://developer.notmatt.press/reference/hooks/upgrader_package_options/">‘upgrader_package_options’</a>.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$upgrader</code><span class="type"><span class="WP_Upgrader"><a href="https://developer.notmatt.press/reference/classes/wp_upgrader/" rel="class">WP_Upgrader</a></span></span></dt><dd><div class="desc"><span class="description"><a href="https://developer.notmatt.press/reference/classes/wp_upgrader/" rel="class">WP_Upgrader</a> instance. In other contexts this might be a                                <a href="https://developer.notmatt.press/reference/classes/theme_upgrader/" rel="class">Theme_Upgrader</a>, <a href="https://developer.notmatt.press/reference/classes/plugin_upgrader/" rel="class">Plugin_Upgrader</a>, Core_Upgrade, or <a href="https://developer.notmatt.press/reference/classes/language_pack_upgrader/" rel="class">Language_Pack_Upgrader</a> instance.</span></div></dd><dt><code>$hook_extra</code><span class="type"><span class="array">array</span></span></dt><dd><div class="desc"><span class="description">Array of bulk item update data.<br/>
<ul class="param-hash"><li><code>action</code> <span class="type">string</span><div class="desc">Type of action. Default <code>'update'</code>.</div></li>
<li><code>type</code> <span class="type">string</span><div class="desc">Type of update process. Accepts <code>'plugin'</code>, <code>'theme'</code>, <code>'translation'</code>, or <code>'core'</code>.</div></li>
<li><code>bulk</code> <span class="type">bool</span><div class="desc">Whether the update process is a bulk update. Default true.</div></li>
<li><code>plugins</code> <span class="type">array</span><div class="desc">Array of the basename paths of the plugins’ main files.</div></li>
<li><code>themes</code> <span class="type">array</span><div class="desc">The theme slugs.</div></li>
<li><code>translations</code> <span class="type">array</span><div class="desc"> Array of translations update data.<ul class="param-hash">
<li><code>language</code> <span class="type">string</span><div class="desc">The locale the translation is for.</div></li>
<li><code>type</code> <span class="type">string</span><div class="desc">Type of translation. Accepts <code>'plugin'</code>, <code>'theme'</code>, or <code>'core'</code>.</div></li>
<li><code>slug</code> <span class="type">string</span><div class="desc">Text domain the translation is for. The slug of a theme/plugin or <code>'default'</code> for core translations.</div></li>
<li><code>version</code> <span class="type">string</span><div class="desc">The version of a theme, plugin, or core.<br/>
</div></li></ul>
</div></li>
</ul>
</span></div></dd></dl></section>
<section class="wporg-has-embedded-code wp-block-wporg-code-reference-explanation"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="more-information" tabindex="-1"><a href="#more-information">More Information</a></h2>
<p>The <code>upgrader_process_complete</code> action hook is run when the download process for a plugin install or update finishes.</p>
<p>Use with caution: When you use the <code>upgrader_process_complete</code> action hook in your plugin and your plugin is the one which under upgrade, then this action will run the old version of your plugin.</p>
</section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="984"><code class="language-php line-numbers" id="wporg-source-code" lang="php">do_action( 'upgrader_process_complete', $this, $options['hook_extra'] );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-admin/includes/class-wp-upgrader.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-admin/includes/class-wp-upgrader.php#L984">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-admin/includes/class-wp-upgrader.php#L984-L984">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/core_upgrader/upgrade/">Core_Upgrader::upgrade()</a><code>wp-admin/includes/class-core-upgrader.php</code></td><td><p>Upgrades WordPress core.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/language_pack_upgrader/bulk_upgrade/">Language_Pack_Upgrader::bulk_upgrade()</a><code>wp-admin/includes/class-language-pack-upgrader.php</code></td><td><p>Upgrades several language packs at once.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/plugin_upgrader/bulk_upgrade/">Plugin_Upgrader::bulk_upgrade()</a><code>wp-admin/includes/class-plugin-upgrader.php</code></td><td><p>Upgrades several plugins at once.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/theme_upgrader/bulk_upgrade/">Theme_Upgrader::bulk_upgrade()</a><code>wp-admin/includes/class-theme-upgrader.php</code></td><td><p>Upgrades several themes at once.</p>
</td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/wp_upgrader/run/">WP_Upgrader::run()</a><code>wp-admin/includes/class-wp-upgrader.php</code></td><td><p>Runs an upgrade/installation.</p>
</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/4.6.0/">4.6.0</a></td><td><span class="since-description"><code>$translations</code> was added as a possible argument to <code>$hook_extra</code>.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/3.7.0/">3.7.0</a></td><td><span class="since-description">Added to <a href="https://developer.notmatt.press/reference/classes/wp_upgrader/run/" rel="method">WP_Upgrader::run()</a>.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/3.6.0/">3.6.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-stevenlinx even thread-even depth-1" data-comment-id="4371" id="comment-4371">
<article class="comment-body" id="div-comment-4371">
<a class="screen-reader-text" href="#comment-content-4371">Skip to note 5 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4371">
<p>Example migrated from Codex:</p>
<p>Do stuff if the current plug-in is being updated.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_action( 'upgrader_process_complete', 'my_upgrade_function',10, 2);

function my_upgrade_function( $upgrader_object, $options ) {
    $current_plugin_path_name = plugin_basename( __FILE__ );

    if ($options['action'] == 'update' &amp;&amp; $options['type'] == 'plugin' ) {
       foreach($options['plugins'] as $each_plugin) {
          if ($each_plugin==$current_plugin_path_name) {
             // .......................... YOUR CODES .............

          }
       }
    }
}</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4371">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-stevenlinx odd alt thread-odd thread-alt depth-1" data-comment-id="4372" id="comment-4372">
<article class="comment-body" id="div-comment-4372">
<a class="screen-reader-text" href="#comment-content-4372">Skip to note 6 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4372">
<p>Example migrated from Codex:</p>
<p>This short plugin demonstrates how to display a notice to the user when they update the plugin. It displays a different notice when they first install the plugin:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">&lt;?php
/*Plugin Name: Upgrader Process Example
Plugin URI: <a href="https://catapultthemes.com/wordpress-plugin-update-hook-upgrader_process_complete/" rel="nofollow ugc">https://catapultthemes.com/wordpress-plugin-update-hook-upgrader_process_complete/</a>
Description: Just an example of using upgrader_process_complete
Version: 1.0.0
Author: Catapult Themes
Author URI: <a href="https://catapultthemes.com/" rel="nofollow ugc">https://catapultthemes.com/</a>
Text Domain: wp-upe
Domain Path: /languages*/

// Exit if accessed directly
if ( ! defined( 'ABSPATH' ) ) {
 exit;
}

/**
 * This function runs when WordPress completes its upgrade process
 * It iterates through each plugin updated to see if ours is included
 * @param $upgrader_object Array
 * @param $options Array
 */
function wp_upe_upgrade_completed( $upgrader_object, $options ) {
 // The path to our plugin's main file
 $our_plugin = plugin_basename( __FILE__ );
 // If an update has taken place and the updated type is plugins and the plugins element exists
 if( $options['action'] == 'update' &amp;&amp; $options['type'] == 'plugin' &amp;&amp; isset( $options['plugins'] ) ) {
  // Iterate through the plugins being updated and check if ours is there
  foreach( $options['plugins'] as $plugin ) {
   if( $plugin == $our_plugin ) {
    // Set a transient to record that our plugin has just been updated
    set_transient( 'wp_upe_updated', 1 );
   }
  }
 }
}
add_action( 'upgrader_process_complete', 'wp_upe_upgrade_completed', 10, 2 );

/**
 * Show a notice to anyone who has just updated this plugin
 * This notice shouldn't display to anyone who has just installed the plugin for the first time
 */
function wp_upe_display_update_notice() {
 // Check the transient to see if we've just updated the plugin
 if( get_transient( 'wp_upe_updated' ) ) {
  echo '&lt;div class="notice notice-success"&gt;' . __( 'Thanks for updating', 'wp-upe' ) . '&lt;/div&gt;';
  delete_transient( 'wp_upe_updated' );
 }
}
add_action( 'admin_notices', 'wp_upe_display_update_notice' );

/**
 * Show a notice to anyone who has just installed the plugin for the first time
 * This notice shouldn't display to anyone who has just updated this plugin
 */
function wp_upe_display_install_notice() {
 // Check the transient to see if we've just activated the plugin
 if( get_transient( 'wp_upe_activated' ) ) {
  echo '&lt;div class="notice notice-success"&gt;' . __( 'Thanks for installing', 'wp-upe' ) . '&lt;/div&gt;';
  // Delete the transient so we don't keep displaying the activation message
 delete_transient( 'wp_upe_activated' );
 }
}
add_action( 'admin_notices', 'wp_upe_display_install_notice' );

/**
 * Run this on activation
 * Set a transient so that we know we've just activated the plugin
 */
function wp_upe_activate() {
 set_transient( 'wp_upe_activated', 1 );
}
register_activation_hook( __FILE__, 'wp_upe_activate' );</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4372">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-stevenlinx even thread-even depth-1" data-comment-id="4373" id="comment-4373">
<article class="comment-body" id="div-comment-4373">
<a class="screen-reader-text" href="#comment-content-4373">Skip to note 7 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4373">
<p>Example migrated from Codex:</p>
<p>The following is example data of the $hook_extra parameter passed to this hook (as of v4.8.1):</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">Array
(
    [action] =&gt; update
    [type] =&gt; plugin
    [bulk] =&gt; 1
    [plugins] =&gt; Array
        (
            [0] =&gt; wordpress-beta-tester/wp-beta-tester.php
        )
)</code></pre>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4373">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
<li class="comment byuser comment-author-gnowland odd alt thread-odd thread-alt depth-1" data-comment-id="4476" id="comment-4476">
<article class="comment-body" id="div-comment-4476">
<a class="screen-reader-text" href="#comment-content-4476">Skip to note 8 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4476">
<p>In Parameters &gt; $this “Core_Upgrade” should be “<a href="https://developer.notmatt.press/reference/classes/core_upgrader/" rel="class">Core_Upgrader</a>” and link to <a href="https://developer.notmatt.press/reference/classes/core_upgrader/" rel="ugc">https://developer.notmatt.press/reference/classes/core_upgrader/</a></p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4476">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
