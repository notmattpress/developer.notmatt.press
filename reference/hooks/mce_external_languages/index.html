
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Quicksand', 'Open Sans', 'Helvetica', 'Arial', san-serif;
        }
        a, h1, h2, h3, h4, h5, h6 {
            color: #0073aa;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .has-small-font-size.is-link-to-top {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .entry-content {
            position:relative;
        }
        .entry-content img {
            max-width: 100%;
        }
    </style>
</head>
<body>
<div class='container'>
    
    <div class="page-metadata" data-published="" data-last-updated=""></div>
    
    <div aria-label="Breadcrumbs" class="wp-block-wporg-site-breadcrumbs has-small-font-size" role="navigation"><div class="wporg-site-breadcrumbs__wrapper"><span><a href="https://developer.wordpress.org">Home</a></span><span><a href="https://developer.wordpress.org/reference/">Reference</a></span><span><a href="https://developer.wordpress.org/reference/hooks/">Hooks</a></span><span><a href="https://developer.wordpress.org/reference/classes/_wp_editors/editor_settings/">_WP_Editors::editor_settings</a></span><span class="is-current-page">mce_external_languages</span></div></div>  <!-- Full breadcrumbs HTML -->
    <h1>mce_external_languages</h1>
    <h1 class="wp-block-wporg-code-reference-title" style="margin-bottom:40px;"><span class="hook-func">apply_filters</span>( ‘mce_external_languages’,  <nobr><span class="arg-type">array</span> <span class="arg-name">$translations</span></nobr>,  <nobr><span class="arg-type">string</span> <span class="arg-name">$editor_id</span></nobr> )</h1>
    
    <div class="content"><div class="entry-content wp-block-post-content is-layout-flow wp-container-core-post-content-is-layout-1 wp-block-post-content-is-layout-flow">
<section class="wp-block-wporg-code-reference-summary"><p>Filters the translations loaded for external TinyMCE 3.x plugins.</p>
</section>
<section class="wp-block-wporg-code-reference-description"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="description" tabindex="-1"><a href="#description">Description</a></h2> <p>The filter takes an associative array (‘plugin_name’ =&gt; ‘path’) where ‘path’ is the include path to the file.</p>
<p>The language file should follow the same format as wp_mce_translation(), and should define a variable ($strings) that holds all translated strings.</p>
</section>
<section class="wp-block-wporg-code-reference-parameters"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="parameters" tabindex="-1"><a href="#parameters">Parameters</a></h2> <dl><dt><code>$translations</code><span class="type"><span class="array">array</span></span></dt><dd><div class="desc"><span class="description">Translations for external TinyMCE plugins.</span></div></dd><dt><code>$editor_id</code><span class="type"><span class="string">string</span></span></dt><dd><div class="desc"><span class="description">Unique editor identifier, e.g. <code>'content'</code>.</span></div></dd></dl></section>
<section class="wp-block-wporg-code-reference-source"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="source" tabindex="-1"><a href="#source">Source</a></h2> <pre aria-label="Function source code" class="wp-block-code" data-start="489"><code class="language-php line-numbers" id="wporg-source-code" lang="php">$mce_external_languages = apply_filters( 'mce_external_languages', array(), $editor_id );
</code></pre><p class="wporg-dot-link-list"><a href="https://developer.notmatt.press/reference/files/wp-includes/class-wp-editor.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/class-wp-editor.php#L489">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/class-wp-editor.php#L489-L489">View on GitHub</a></p></section>
<section class="wp-block-wporg-code-reference-related" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="related" tabindex="-1"><a href="#related">Related</a></h2> <section class="wp-block-wporg-code-table" id="used-by" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Used by</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/classes/_wp_editors/editor_settings/">_WP_Editors::editor_settings()</a><code>wp-includes/class-wp-editor.php</code></td><td></td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-changelog"><h2 class="is-toc-heading wp-block-heading has-heading-5-font-size" id="changelog" tabindex="-1"><a href="#changelog">Changelog</a></h2> <section class="wp-block-wporg-code-table" style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table"><table><thead><tr><th scope="col">Version</th><th scope="col">Description</th></tr></thead><tbody><tr class=""><td><a href="https://developer.notmatt.press/reference/since/5.3.0/">5.3.0</a></td><td><span class="since-description">The <code>$editor_id</code> parameter was added.</span></td></tr><tr class=""><td><a href="https://developer.notmatt.press/reference/since/2.5.0/">2.5.0</a></td><td>Introduced.</td></tr></tbody></table></figure></section> </section>
<section class="wp-block-wporg-code-reference-comments" data-nosnippet="true"><h2 class="is-toc-heading wp-block-heading" id="user-contributed-notes" tabindex="-1"><a href="#user-contributed-notes">User Contributed Notes</a></h2> <ol class="comment-list"> <li class="comment byuser comment-author-stevenlinx odd alt thread-odd thread-alt depth-1" data-comment-id="4845" id="comment-4845">
<article class="comment-body" id="div-comment-4845">
<a class="screen-reader-text" href="#comment-content-4845">Skip to note 2 content</a>

<!-- .comment-metadata -->
<div class="wporg-has-embedded-code comment-content" id="comment-content-4845">
<p>Example Migrated from Codex:</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">add_filter('mce_external_languages', 'my_custom_tinymce_plugin_add_locale');

function my_custom_tinymce_plugin_add_locale($locales) {
    $locales ['My-Custom-Tinymce-Plugin'] = plugin_dir_path ( __FILE__ ) . 'my-custom-tinymce-plugin-langs.php';
    return $locales;
}</code></pre>
<p>Replace My-Custom-Tinymce-Plugin with your identifier of your plugin and make sure the path to <code>my-custom-tinymce-plugin-langs.php</code> is correct.</p>
<p><strong>Translating strings with <code>mce_external_languages</code></strong></p>
<p>Create a new file, called something like <code>my-custom-tinymce-plugin-langs.php</code> and open it. Insert the following code.</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">// This file is based on wp-includes/js/tinymce/langs/wp-langs.php

if ( ! defined( 'ABSPATH' ) )
    exit;

if ( ! class_exists( '_WP_Editors' ) )
    require( ABSPATH . WPINC . '/class-wp-editor.php' );

function my_custom_tinymce_plugin_translation() {
    $strings = array(
        'somestring' =&gt; __('My custom Tinymce plugin', 'textdomain'),
    );
    $locale = _WP_Editors::$mce_locale;
    $translated = 'tinyMCE.addI18n("' . $locale . '.my_custom_tinymce_plugin", ' . json_encode( $strings ) . ");\n";

     return $translated;
}

$strings = my_custom_tinymce_plugin_translation();</code></pre>
<p><strong>What the code does</strong></p>
<p>The code first checks if the file is included by WordPress. If not, it exits. Next, it checks if the class <code>_WP_Editors</code> exists. If not, the class is loaded (from wp-includes/class-wp-editor.php).</p>
<p>We wrap the translation in a function (this to make sure there are no global variables) called <code>my_custom_tinymce_plugin_translation</code> (make sure your function is unique). This is where you can translate your strings with a associative array. The key in this array is also the key you will use later on to get the translation. Then we retrieve the locale for the editor and we build some JavaScript. We use the <code>tinyMCE.addI18n</code> JavaScript function to add the translated strings to the editor. Some information about the arguments:</p>
<p><strong><code>"' . $locale . '.my_custom_tinymce_plugin"</code></strong><br/>
This is the “textdomain” of the translation. It should look rendered like “<code>en.my_custom_tinymce_plugin</code>” (the language, in this case en, is set to the value of the variable <code>$locale</code>). We use <code>my_custom_tinymce_plugin</code> as “textdomain”.</p>
<p><strong><code>json_encode( $strings ) </code></strong><br/>
This converts the translated strings to JavaScript.</p>
<p>That bit of JavaScript code is returned by the function.</p>
<p>You can see that on the last line of the file, our function <code>my_custom_tinymce_plugin_translation</code> is called and that the translated strings are saved in the global variable <code>$strings</code> (The variable has to be called <code>$strings</code>, or it won’t work).</p>
<p><strong>Load the translations</strong></p>
<p>Next, use the next code to make sure WordPress loads the translations</p>
<pre class="wp-block-code"><code class="language-php line-numbers" lang="php">unction my_custom_tinymce_plugin_add_locale($locales) {
    $locales ['My-Custom-Tinymce-Plugin'] = plugin_dir_path ( __FILE__ ) . 'my-custom-tinymce-plugin-langs.php';
    return $locales;
}
add_filter('mce_external_languages', 'my_custom_tinymce_plugin_add_locale');</code></pre>
<p><strong>Use the translations in your Javascript</strong></p>
<pre class="wp-block-code"><code class="language-php" lang="php">// ed is the current tinymce editor.
ed.getLang('my_custom_tinymce_plugin.somestring');</code></pre>
<p>This will return the translation of “My custom Tinymce plugin”.</p>
</div><!-- .comment-content -->
<section class="wporg-has-embedded-code feedback hide-if-js" data-comment-count="0" id="feedback-4845">
</section><!-- .feedback -->

</article><!-- .comment-body -->
</li>
</ol></section>
</div></div>
    </div>
<footer class="text-center mt-10 py-5">
    <p class="text-sm"><a href="https://notmatt.press">NotMattPress</a>.</p>
</footer>
</body>
</html>
